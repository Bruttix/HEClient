{"ast":null,"code":"import _slicedToArray from \"D:\\\\WebProjects\\\\Barbershops\\\\MERN-barberShops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nvar _jsxFileName = \"D:\\\\WebProjects\\\\Barbershops\\\\MERN-barberShops\\\\HighEnd\\\\Client\\\\src\\\\components\\\\availability\\\\Time\\\\TimePreference.js\";\nimport React, { useCallback, useState, useEffect } from \"react\";\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport moment from \"moment\";\nimport { Collapse } from \"reactstrap\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faChevronLeft, faChevronRight } from \"@fortawesome/free-solid-svg-icons\";\nimport { useQuery } from \"@apollo/react-hooks\";\nimport getAllAppointmentsQuery from \"../../../graphql/queries/getAllAppointmentsQuery\";\nimport getAllPersonalEventsQuery from \"../../../graphql/queries/getAllPersonalEventsQuery\";\nimport { animateScroll } from \"react-scroll\";\nimport ACTION_DAY_OF_THE_WEEK from \"../../../actions/SelectedDay/DayOfTheWeek/ACTION_DAY_OF_THE_WEEK\";\nimport ACTION_REFORMATTED_DAY_CLONE_RESET from \"../../../actions/SelectedDay/ReformattedDayClone/ACTION_REFORMATTED_DAY_CLONE_RESET\";\nimport ACTION_SELECTED_TIME from \"../../../actions/SelectedTime/ACTION_SELECTED_TIME\";\nimport ACTION_SELECTED_TIME_RESET from \"../../../actions/SelectedTime/ACTION_SELECTED_TIME_RESET\";\nimport ACTION_AFTERNOON_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/Afternoon/ACTION_AFTERNOON_OPEN\";\nimport ACTION_AFTERNOON_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/Afternoon/ACTION_AFTERNOON_CLOSED\";\nimport ACTION_LATE_AFTERNOON_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/LateAfternoon/ACTION_LATE_AFTERNOON_OPEN\";\nimport ACTION_LATE_AFTERNOON_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/LateAfternoon/ACTION_LATE_AFTERNOON_CLOSED\";\nimport ACTION_MORNING_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/Morning/ACTION_MORNING_OPEN\";\nimport ACTION_MORNING_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/Morning/ACTION_MORNING_CLOSED\";\nimport ACTION_EVENING_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/Evening/ACTION_EVENING_OPEN\";\nimport ACTION_EVENING_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/Evening/ACTION_EVENING_CLOSED\";\nimport ACTION_CONTINUE_BUTTON_ACTIVE from \"../../../actions/ContinueToCheckoutButtonActive/ACTION_CONTINUE_BUTTON_ACTIVE\";\nimport ACTION_CONTINUE_BUTTON_RESET from \"../../../actions/ContinueToCheckoutButtonActive/ACTION_CONTINUE_BUTTON_RESET\";\nimport ACTION_FIRST_NAME_RESET from \"../../../actions/GuestCheckoutForm/FirstName/ACTION_FIRST_NAME_RESET\";\nimport ACTION_LAST_NAME_RESET from \"../../../actions/GuestCheckoutForm/LastName/ACTION_LAST_NAME_RESET\";\nimport ACTION_EMAIL_RESET from \"../../../actions/GuestCheckoutForm/Email/ACTION_EMAIL_RESET\";\nimport ACTION_EMAIL_NOT_INVALID from \"../../../actions/EmailValidation/Invalid/ACTION_EMAIL_NOT_INVALID\";\nimport ACTION_EMAIL_NOT_VALID from \"../../../actions/EmailValidation/Valid/ACTION_EMAIL_NOT_VALID\";\nimport ACTION_PHONE_NUMBER_RESET from \"../../../actions/GuestCheckoutForm/PhoneNumber/ACTION_PHONE_NUMBER_RESET\";\nimport ACTION_PHONE_NOT_INVALID from \"../../../actions/PhoneNumberValidation/Invalid/ACTION_PHONE_NOT_INVALID\";\nimport ACTION_PHONE_NOT_VALID from \"../../../actions/PhoneNumberValidation/Valid/ACTION_PHONE_NOT_VALID\";\nimport ACTION_APPOINTMENT_NOTES_RESET from \"../../../actions/GuestCheckoutForm/AppointmentNotes/ACTION_APPOINTMENT_NOTES_RESET\";\nimport ACTION_APPOINTMENT_END_TIME from \"../../../actions/AppointmentEndTime/ACTION_APPOINTMENT_END_TIME\";\nimport ACTION_TOTAL_DURATION from \"../../../actions/TotalDuration/ACTION_TOTAL_DURATION\";\nimport ACTION_AVAILABILITY_PAGE_OPENED from \"../../../actions/InCart/CartPageOpened/ACTION_AVAILABILITY_PAGE_OPENED\";\nimport ACTION_PAYMENT_INFO_PAGE_OPENED from \"../../../actions/InCart/CartPageOpened/ACTION_PAYMENT_INFO_PAGE_OPENED\";\nimport ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED from \"../../../actions/InCart/CartPageOpened/ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED\";\nimport \"./TimePreference.css\"; // Minified Bootstrap CSS file (for Collapse feature)\n\nimport \"../../../bootstrap.min.css\";\n\nconst TimePreference = props => {\n  const dispatch = useDispatch();\n  const location = useLocation();\n  const addOnsArr = useSelector(state => state.addOnsArr.add_ons_arr);\n  const treatmentsArr = useSelector(state => state.treatmentsArr.treatments_arr);\n  const reformattedDay = useSelector(state => state.reformattedDay.reformattedDay);\n  const selectedDay = useSelector(state => state.selectedDay.selectedDay);\n  const dayOfTheWeek = useSelector(state => state.dayOfTheWeek.dayOfTheWeek);\n  const selectedTime = useSelector(state => state.selectedTime.selectedTime);\n  const totalDuration = useSelector(state => state.totalDuration.totalDuration);\n  const continueToCheckoutButton = useSelector(state => state.continueToCheckoutButton.continueButtonActive);\n  const morningCollapseIsOpen = useSelector(state => state.morningCollapse.collapseIsOpen);\n  const afternoonCollapseIsOpen = useSelector(state => state.afternoonCollapse.collapseIsOpen);\n  const lateAfternoonCollapseIsOpen = useSelector(state => state.lateAfternoonCollapse.collapseIsOpen);\n  const eveningCollapseIsOpen = useSelector(state => state.eveningCollapse.collapseIsOpen);\n  const splashScreenComplete = useSelector(state => state.splashScreenComplete.splashScreenComplete);\n  const userAuthenticated = useSelector(state => state.userAuthenticated.user_authenticated);\n  const selectedEsthetician = useSelector(state => state.selectedEsthetician.selectedEsthetician);\n  const saltCaveInCart = useSelector(state => state.saltCaveInCart.in_cart);\n\n  const _useState = useState(null),\n        _useState2 = _slicedToArray(_useState, 2),\n        bookedTimes = _useState2[0],\n        changeBookedTimes = _useState2[1]; // Checkout Form States\n\n\n  const firstName = useSelector(state => state.firstName.first_name);\n  const lastName = useSelector(state => state.lastName.last_name);\n  const appointmentNotes = useSelector(state => state.appointmentNotes.appointment_notes); // Email States\n\n  const email = useSelector(state => state.email.email);\n  const emailIsValid = useSelector(state => state.emailIsValid.email_valid);\n  const emailIsInvalid = useSelector(state => state.emailIsInvalid.email_invalid); // Phone Number States\n\n  const phoneNumber = useSelector(state => state.phoneNumber.phone_number);\n  const phoneIsValid = useSelector(state => state.phoneIsValid.phone_valid);\n  const phoneIsInvalid = useSelector(state => state.phoneIsInvalid.phone_invalid);\n\n  const _useState3 = useState(\"\"),\n        _useState4 = _slicedToArray(_useState3, 2),\n        individualItemHovered = _useState4[0],\n        changeIndividualItemHovered = _useState4[1];\n\n  const _useState5 = useState(false),\n        _useState6 = _slicedToArray(_useState5, 2),\n        checkedForBlockedTimes = _useState6[0],\n        changeCheckedForBlockedTimes = _useState6[1];\n\n  const _useQuery = useQuery(getAllAppointmentsQuery, {\n    fetchPolicy: \"no-cache\"\n  }),\n        appointmentsData = _useQuery.data,\n        appointmentsLoading = _useQuery.loading;\n\n  const _useQuery2 = useQuery(getAllPersonalEventsQuery, {\n    fetchPolicy: \"no-cache\"\n  }),\n        personalEventsData = _useQuery2.data,\n        personalEventsLoading = _useQuery2.loading;\n\n  useEffect(() => {\n    if (location.pathname.includes(\"/availability/timepreference\")) {\n      animateScroll.scrollToTop({\n        containerId: \"time_page\"\n      });\n    }\n  }, [location.pathname]);\n  const alreadyBookedAppointments = appointmentsData ? appointmentsData.all_appointments.filter(item => item.date === reformattedDay && item.esthetician === selectedEsthetician) : null;\n  const blockedTimeForPersonalEvent = personalEventsData ? personalEventsData.all_personal_events.filter(item => moment(item.date, \"L\").format(\"MMMM D, YYYY\") === reformattedDay && item.staff.split(\" \")[0] + \" \" + item.staff.split(\" \")[1][0] + \".\" === selectedEsthetician && item.blockTime) : null;\n  const alreadyBookedTimes = useCallback(() => {\n    const alreadyBookedTimesArr = [];\n    let minutesArr = [\"00\", \"15\", \"30\", \"45\"];\n\n    if (alreadyBookedAppointments !== null) {\n      for (let i = 0; i < alreadyBookedAppointments.length; i++) {\n        if (alreadyBookedAppointments) {\n          const startMinutes = Number(alreadyBookedAppointments[i].startTime.slice(-2));\n          const minutes = startMinutes + Math.ceil(alreadyBookedAppointments[i].duration / 15) * 15;\n          const currentDurationMinutes = totalDuration - Math.floor(totalDuration / 60) * 60 > 30 ? Math.ceil(totalDuration / 15) * 15 : Math.floor(totalDuration / 15) * 15;\n          const currentDurationEndHour = Math.ceil(currentDurationMinutes / 60);\n          const endHour = (Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) + Number((minutes / 60).toString().slice(0, 1))).toString();\n          const endMinutes = (minutes / 60).toString().length > 1 ? (Number((minutes / 60).toString().slice(1, minutes.length)) * 60).toString() : \"00\";\n          const calendarEndTime = (Number(endHour) > 12 ? (Number(endHour) - 12).toString() : endHour) + \":\" + endMinutes;\n          const intervalArr = new Array(Math.ceil(Math.ceil(alreadyBookedAppointments[i].duration / 15) / minutesArr.length)).fill(minutesArr).reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);\n          const hourArr = [];\n\n          for (let j = Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) - currentDurationEndHour; j < Number(endHour) + 1; j++) {\n            if (j > 12) {\n              hourArr.push(j - 12);\n            } else {\n              hourArr.push(j);\n            }\n          }\n\n          const quadrupleHourArr = hourArr.map(e => {\n            return [e.toString() + \":\" + intervalArr[0], e.toString() + \":\" + intervalArr[1], e.toString() + \":\" + intervalArr[2], e.toString() + \":\" + intervalArr[3]];\n          }).reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);\n          const startSliceBasedOnDuration = Number.isInteger(totalDuration / 15) ? // Rounds available apppointment time up if total duration is divisibile by 15\n          (Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) * 60 + Number(alreadyBookedAppointments[i].startTime.split(\":\")[1]) - totalDuration) / 60 : // Rounds available apppointment time down if total duration is not divisibile by 15\n          Math.floor((Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) * 60 + (Number(alreadyBookedAppointments[i].startTime.split(\":\")[1]) - totalDuration)) / 60 / 0.25) * 0.25;\n\n          const endSliceBasedOnDuration = () => {\n            let emptyArr = [];\n            emptyArr.push(startSliceBasedOnDuration.toString().split(\".\")[1]);\n            emptyArr.unshift(\".\");\n            emptyArr = (Number(emptyArr.join(\"\")) * 60).toString();\n            return emptyArr;\n          };\n\n          alreadyBookedTimesArr.push(alreadyBookedAppointments[i].startTime, quadrupleHourArr.slice(quadrupleHourArr.indexOf(Number.isInteger(startSliceBasedOnDuration) ? startSliceBasedOnDuration.toString() + \":00\" : startSliceBasedOnDuration.toString().split(\".\")[0] + \":\" + endSliceBasedOnDuration()), quadrupleHourArr.length - (Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) === 30 || Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) === 35 || Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) === 40 || Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) === 45 ? 0 : 4 - minutesArr.indexOf(Math.floor((Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) + 25) / 15) * 15 > 60 ? (Math.floor((Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) + 25) / 15) * 15 - 60).toString() : (Math.floor((Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) + 25) / 15) * 15).toString()))).sort(), calendarEndTime);\n        } else {\n          return null;\n        }\n      }\n\n      changeBookedTimes(alreadyBookedTimesArr.reduce((accumulator, currentValue) => accumulator.concat(currentValue), []));\n    }\n  }, [alreadyBookedAppointments, totalDuration]);\n  const blockPersonalEventTimes = useCallback(() => {\n    const blockedTimeArr = [];\n\n    if (blockedTimeForPersonalEvent !== null) {\n      for (let i = 0; i < blockedTimeForPersonalEvent.length; i++) {\n        const allDay = blockedTimeForPersonalEvent[i].allDay;\n        let start = \"\";\n        let end = \"\";\n\n        if (!allDay) {\n          start = moment(blockedTimeForPersonalEvent[i].startTime, \"h:mm A\");\n          end = moment(blockedTimeForPersonalEvent[i].endTime, \"h:mm A\");\n        } else {\n          start = moment(\"12:00 AM\", \"h:mm A\");\n          end = moment(\"11:30 PM\", \"h:mm A\");\n        }\n\n        let current = moment(start);\n\n        while (current <= end) {\n          blockedTimeArr.push(current.format(\"h:mm\"));\n          current.add(15, \"minutes\");\n        }\n\n        if (bookedTimes) {\n          changeBookedTimes(bookedTimes.concat(blockedTimeArr));\n        } else {\n          changeBookedTimes(blockedTimeArr);\n        }\n      }\n    }\n  }, [blockedTimeForPersonalEvent, bookedTimes]);\n  useEffect(() => {\n    if (!appointmentsLoading && !personalEventsLoading) {\n      if (!checkedForBlockedTimes) {\n        alreadyBookedTimes();\n        blockPersonalEventTimes();\n        changeCheckedForBlockedTimes(true);\n      }\n    }\n  }, [checkedForBlockedTimes, appointmentsLoading, personalEventsLoading, alreadyBookedTimes, blockPersonalEventTimes]);\n\n  const redirectToHome = () => {\n    if (!splashScreenComplete) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 14\n        }\n      });\n    } else if (!props.currentScreenSize) {\n      if (props.initialScreenSize >= 1200) {\n        return /*#__PURE__*/React.createElement(Redirect, {\n          to: \"/\",\n          __self: this,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 398,\n            columnNumber: 16\n          }\n        });\n      }\n    } else if (props.currentScreenSize >= 1200) {\n      return /*#__PURE__*/React.createElement(Redirect, {\n        to: \"/\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 14\n        }\n      });\n    }\n  };\n\n  const daysOfTheWeekArr = [{\n    Mon: \"Monday\"\n  }, {\n    Tue: \"Tuesday\"\n  }, {\n    Wed: \"Wednesday\"\n  }, {\n    Thu: \"Thursday\"\n  }, {\n    Fri: \"Friday\"\n  }, {\n    Sat: \"Saturday\"\n  }, {\n    Sun: \"Sunday\"\n  }];\n  const getFullDayOfTheWeek = useCallback(() => {\n    if (selectedDay) {\n      const dayThreeLetters = selectedDay.toString().slice(0, 3);\n      let fullDayName = \"\";\n\n      for (let i = 0; i < daysOfTheWeekArr.length; i++) {\n        if (daysOfTheWeekArr[i][dayThreeLetters]) {\n          fullDayName = daysOfTheWeekArr[i][dayThreeLetters];\n        }\n      }\n\n      return fullDayName;\n    }\n  }, [daysOfTheWeekArr, selectedDay]);\n  useEffect(() => {\n    if (!dayOfTheWeek) {\n      dispatch(ACTION_DAY_OF_THE_WEEK(getFullDayOfTheWeek()));\n    }\n  }, [dayOfTheWeek, dispatch, getFullDayOfTheWeek]);\n\n  const handleMorningCollapse = () => {\n    if (morningCollapseIsOpen) {\n      dispatch(ACTION_MORNING_CLOSED());\n    } else {\n      dispatch(ACTION_MORNING_OPEN());\n    }\n\n    if (afternoonCollapseIsOpen) {\n      dispatch(ACTION_AFTERNOON_CLOSED());\n    }\n\n    if (eveningCollapseIsOpen) {\n      dispatch(ACTION_EVENING_CLOSED());\n    }\n\n    if (lateAfternoonCollapseIsOpen) {\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\n    }\n  };\n\n  const handleAfternoonCollapse = () => {\n    if (afternoonCollapseIsOpen) {\n      dispatch(ACTION_AFTERNOON_CLOSED());\n    } else {\n      dispatch(ACTION_AFTERNOON_OPEN());\n    }\n\n    if (morningCollapseIsOpen) {\n      dispatch(ACTION_MORNING_CLOSED());\n    }\n\n    if (eveningCollapseIsOpen) {\n      dispatch(ACTION_EVENING_CLOSED());\n    }\n\n    if (lateAfternoonCollapseIsOpen) {\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\n    }\n  };\n\n  const handleLateAfternoonCollapse = () => {\n    if (lateAfternoonCollapseIsOpen) {\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\n    } else {\n      dispatch(ACTION_LATE_AFTERNOON_OPEN());\n    }\n\n    if (morningCollapseIsOpen) {\n      dispatch(ACTION_MORNING_CLOSED());\n    }\n\n    if (afternoonCollapseIsOpen) {\n      dispatch(ACTION_AFTERNOON_CLOSED());\n    }\n\n    if (eveningCollapseIsOpen) {\n      dispatch(ACTION_EVENING_CLOSED());\n    }\n  };\n\n  const handleEveningCollapse = () => {\n    if (eveningCollapseIsOpen) {\n      dispatch(ACTION_EVENING_CLOSED());\n    } else {\n      dispatch(ACTION_EVENING_OPEN());\n    }\n\n    if (morningCollapseIsOpen) {\n      dispatch(ACTION_MORNING_CLOSED());\n    }\n\n    if (afternoonCollapseIsOpen) {\n      dispatch(ACTION_AFTERNOON_CLOSED());\n    }\n\n    if (lateAfternoonCollapseIsOpen) {\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\n    }\n  };\n\n  const handleContinueCheckoutButtonClick = () => {\n    dispatch(ACTION_CONTINUE_BUTTON_ACTIVE());\n    dispatch(ACTION_DAY_OF_THE_WEEK(dayOfTheWeek));\n  };\n\n  const fifteenMinuteIntervals = [\"00\", \"15\", \"30\", \"45\"];\n  const morningTimesArr = [];\n\n  const createMorningTimeInstances = () => {\n    let hours = [];\n    let minutes = fifteenMinuteIntervals.concat(fifteenMinuteIntervals);\n\n    for (let i = 10; i < 12; i++) {\n      hours.push(i);\n    }\n\n    const multipleHours = hours.map(e => [e, e, e, e]).reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);\n\n    for (let i = 0; i < multipleHours.length; i++) {\n      morningTimesArr.push(multipleHours[i].toString() + \":\" + minutes[i].toString());\n    }\n  };\n\n  createMorningTimeInstances();\n  const afternoonTimesArr = [];\n\n  const createAfternoonTimeInstances = () => {\n    let hours = [];\n    let minutes = new Array(20).fill(fifteenMinuteIntervals).reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);\n\n    for (let i = 12; i < 17; i++) {\n      hours.push(i);\n    }\n\n    const multipleHours = hours.map(e => e > 12 ? [e - 12, e - 12, e - 12, e - 12] : [e, e, e, e]).reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);\n\n    for (let i = 0; i < multipleHours.length; i++) {\n      afternoonTimesArr.push(multipleHours[i].toString() + \":\" + minutes[i].toString());\n    }\n  };\n\n  createAfternoonTimeInstances();\n  let lateAfternoonTimesArr = afternoonTimesArr.splice(12, 10);\n  const eveningTimesArr = [];\n\n  const createEveningTimeInstances = () => {\n    let hours = [];\n    let minutes = new Array(dayOfTheWeek === \"Sunday\" ? 5 : 12).fill(fifteenMinuteIntervals).reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);\n\n    for (let i = 17; i < (dayOfTheWeek === \"Sunday\" ? 19 : 20); i++) {\n      hours.push(i);\n    }\n\n    const multipleHours = hours.map(e => [e - 12, e - 12, e - 12, e - 12]).reduce((accumulator, currentValue) => accumulator.concat(currentValue), []);\n\n    for (let i = 0; i < multipleHours.length; i++) {\n      eveningTimesArr.push(multipleHours[i].toString() + \":\" + minutes[i].toString());\n    }\n  };\n\n  createEveningTimeInstances();\n\n  const handleTimeClick = e => {\n    let renderedTime = \"\"; // Required for button border click to trigger selected time on mobile\n\n    if (e.target.lastChild.innerText) {\n      renderedTime = e.target.lastChild.innerText;\n    } else {\n      renderedTime = e.target.innerText;\n    }\n\n    dispatch(ACTION_SELECTED_TIME(renderedTime));\n\n    if (selectedTime === renderedTime) {\n      dispatch(ACTION_SELECTED_TIME_RESET());\n      dispatch(ACTION_CONTINUE_BUTTON_RESET());\n\n      if (firstName) {\n        dispatch(ACTION_FIRST_NAME_RESET());\n      }\n\n      if (lastName) {\n        dispatch(ACTION_LAST_NAME_RESET());\n      }\n\n      if (email) {\n        dispatch(ACTION_EMAIL_RESET());\n      }\n\n      if (emailIsInvalid) {\n        dispatch(ACTION_EMAIL_NOT_INVALID());\n      }\n\n      if (emailIsValid) {\n        dispatch(ACTION_EMAIL_NOT_VALID());\n      }\n\n      if (phoneNumber) {\n        dispatch(ACTION_PHONE_NUMBER_RESET());\n      }\n\n      if (phoneIsInvalid) {\n        dispatch(ACTION_PHONE_NOT_INVALID());\n      }\n\n      if (phoneIsValid) {\n        dispatch(ACTION_PHONE_NOT_VALID());\n      }\n\n      if (appointmentNotes) {\n        dispatch(ACTION_APPOINTMENT_NOTES_RESET());\n      }\n    }\n  };\n\n  useEffect(() => {\n    const treatmentDurationArr = treatmentsArr.map(item => item.duration);\n    const addOnsDurationArr = addOnsArr.map(item => item.duration);\n    const totalDurationArr = treatmentDurationArr.concat(addOnsDurationArr);\n    let totalDurationValue;\n    totalDurationArr[0] === undefined ? totalDurationValue = null : totalDurationValue = totalDurationArr.reduce((a, b) => a + b);\n\n    if (totalDuration !== totalDurationValue) {\n      dispatch(ACTION_TOTAL_DURATION(totalDurationValue));\n    }\n  }, [addOnsArr, dispatch, treatmentsArr, totalDuration]);\n  useEffect(() => {\n    if (selectedTime) {\n      let endTotalTime = \"\";\n      let endMinutes = Number(selectedTime.slice(selectedTime.length - 2, selectedTime.length)) + totalDuration;\n      let endHours = Number(selectedTime.slice(0, selectedTime.indexOf(\":\")));\n\n      if (endMinutes >= 240) {\n        endMinutes -= 240;\n        endHours += 4;\n      } else {\n        if (endMinutes >= 180) {\n          endMinutes -= 180;\n          endHours += 3;\n        } else {\n          if (endMinutes >= 120) {\n            endMinutes -= 120;\n            endHours += 2;\n          } else {\n            if (endMinutes >= 60) {\n              endMinutes -= 60;\n              endHours += 1;\n            }\n          }\n        }\n      }\n\n      if (endHours > 12) {\n        endHours -= 12;\n      }\n\n      endMinutes = endMinutes.toString().split(\"\");\n\n      if (endMinutes.toString().length < 2) {\n        endMinutes.splice(0, 0, \"0\");\n      }\n\n      endTotalTime = endHours.toString() + \":\" + endMinutes.join(\"\");\n      dispatch(ACTION_APPOINTMENT_END_TIME(endTotalTime));\n    }\n  }, [selectedTime, totalDuration, dispatch]);\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"select_time_container\",\n    id: \"time_page\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 705,\n      columnNumber: 5\n    }\n  }, redirectToHome(), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"select_time_container_header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 707,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          return \"/availability\";\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          return \"/availability\";\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 708,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"select_time_back_arrow\",\n    icon: faChevronLeft,\n    onClick: () => {\n      dispatch(ACTION_AVAILABILITY_PAGE_OPENED());\n      dispatch(ACTION_REFORMATTED_DAY_CLONE_RESET);\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 725,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 734,\n      columnNumber: 9\n    }\n  }, \"AVAILABILITY\"), /*#__PURE__*/React.createElement(Link, {\n    to: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          if (userAuthenticated) {\n            return \"/paymentinfo\";\n          } else {\n            return \"/checkout\";\n          }\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          if (userAuthenticated) {\n            return \"/paymentinfo\";\n          } else {\n            return \"/checkout\";\n          }\n        }\n      }\n    },\n    onClick: () => {\n      if (userAuthenticated) {\n        dispatch(ACTION_PAYMENT_INFO_PAGE_OPENED());\n      } else {\n        dispatch(ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED());\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(FontAwesomeIcon, {\n    className: \"select_time_forward_arrow\",\n    style: {\n      display: continueToCheckoutButton ? \"block\" : \"none\"\n    },\n    icon: faChevronRight,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 767,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"select_a_time_header\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 774,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"h2\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 775,\n      columnNumber: 9\n    }\n  }, \"SELECT A TIME\", saltCaveInCart ? null : selectedEsthetician ? \" WITH \" + selectedEsthetician.split(\" \")[0].toUpperCase() + \" \" + selectedEsthetician.split(\" \")[1][0].toUpperCase() + \".\" : null)), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"time_statement\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 788,\n      columnNumber: 7\n    }\n  }, \"Choose a time for your appointment on \", getFullDayOfTheWeek(), \",\", \" \", reformattedDay, \".\"), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_selectors_wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 792,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 793,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_top_wrapping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 794,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 795,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 796,\n      columnNumber: 15\n    }\n  }, \"Morning\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"time_of_day_card_show_more\",\n    onClick: handleMorningCollapse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 798,\n      columnNumber: 13\n    }\n  }, \"Show \", morningCollapseIsOpen ? \"Less\" : \"Times\")), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: morningCollapseIsOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 805,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner_times_wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 806,\n      columnNumber: 13\n    }\n  }, morningTimesArr.map((item, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"individual_time_wrapper\",\n    onClick: handleTimeClick,\n    onMouseOver: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"morningTimesArr\",\n            index: i\n          });\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"morningTimesArr\",\n            index: i\n          });\n        }\n      }\n    },\n    onMouseOut: () => {\n      if (individualItemHovered !== \"\") {\n        changeIndividualItemHovered(\"\");\n      }\n    },\n    style: {\n      background: bookedTimes ? item === selectedTime ? \"rgb(44, 44, 52)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"#f0f0f0\" : individualItemHovered.arr === \"morningTimesArr\" && individualItemHovered.index === i ? \"rgba(0, 129, 177, 0.4)\" : \"rgb(255, 255, 255)\" : \"rgb(255, 255, 255)\",\n      color: bookedTimes ? item === selectedTime ? \"rgb(255, 255, 255)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : \"rgb(0, 0, 0)\" : \"rgb(0, 0, 0)\",\n      border: bookedTimes ? item === selectedTime ? \"2px solid transparent\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : individualItemHovered.arr === \"morningTimesArr\" && individualItemHovered.index === i ? \"2px solid rgba(0, 129, 177, 0.4)\" : \"2px solid rgb(0, 0, 0)\" : \"2px solid rgb(0, 0, 0)\",\n      pointerEvents: bookedTimes ? bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"none\" : \"auto\" : \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 808,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 945,\n      columnNumber: 19\n    }\n  }, item)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 951,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_top_wrapping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 952,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 953,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 954,\n      columnNumber: 15\n    }\n  }, \"Afternoon\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"time_of_day_card_show_more\",\n    onClick: handleAfternoonCollapse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 956,\n      columnNumber: 13\n    }\n  }, \"Show \", afternoonCollapseIsOpen ? \"Less\" : \"Times\")), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: afternoonCollapseIsOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 963,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner_times_wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 964,\n      columnNumber: 13\n    }\n  }, afternoonTimesArr.map((item, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"individual_time_wrapper\",\n    onClick: handleTimeClick,\n    onMouseOver: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"afternoonTimesArr\",\n            index: i\n          });\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"afternoonTimesArr\",\n            index: i\n          });\n        }\n      }\n    },\n    onMouseOut: () => {\n      if (individualItemHovered !== \"\") {\n        changeIndividualItemHovered(\"\");\n      }\n    },\n    style: {\n      background: bookedTimes ? item === selectedTime ? \"rgb(44, 44, 52)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"#f0f0f0\" : individualItemHovered.arr === \"afternoonTimesArr\" && individualItemHovered.index === i ? \"rgba(0, 129, 177, 0.4)\" : \"rgb(255, 255, 255)\" : \"rgb(255, 255, 255)\",\n      color: bookedTimes ? item === selectedTime ? \"rgb(255, 255, 255)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : \"rgb(0, 0, 0)\" : \"rgb(0, 0, 0)\",\n      border: bookedTimes ? item === selectedTime ? \"2px solid transparent\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : individualItemHovered.arr === \"afternoonTimesArr\" && individualItemHovered.index === i ? \"2px solid rgba(0, 129, 177, 0.4)\" : \"2px solid rgb(0, 0, 0)\" : \"2px solid rgb(0, 0, 0)\",\n      pointerEvents: bookedTimes ? bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"none\" : \"auto\" : \"auto\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 966,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1103,\n      columnNumber: 19\n    }\n  }, item)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1109,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_top_wrapping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1110,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1111,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1112,\n      columnNumber: 15\n    }\n  }, \"Late Afternoon\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"time_of_day_card_show_more\",\n    onClick: handleLateAfternoonCollapse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1114,\n      columnNumber: 13\n    }\n  }, \"Show \", lateAfternoonCollapseIsOpen ? \"Less\" : \"Times\")), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: lateAfternoonCollapseIsOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1121,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner_times_wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1122,\n      columnNumber: 13\n    }\n  }, lateAfternoonTimesArr.map((item, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"individual_time_wrapper\",\n    onClick: handleTimeClick,\n    onMouseOver: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"lateAfternoonTimesArr\",\n            index: i\n          });\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"lateAfternoonTimesArr\",\n            index: i\n          });\n        }\n      }\n    },\n    onMouseOut: () => {\n      if (individualItemHovered !== \"\") {\n        changeIndividualItemHovered(\"\");\n      }\n    },\n    style: {\n      opacity: dayOfTheWeek === \"Friday\" ? parseInt(item[0], 10) > 3 ? 0 : 1 : 1,\n      pointerEvents: bookedTimes ? dayOfTheWeek === \"Friday\" ? parseInt(item[0], 10) > 3 ? \"none\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"none\" : \"auto\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"none\" : \"auto\" : \"auto\",\n      background: bookedTimes ? item === selectedTime ? \"rgb(44, 44, 52)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"#f0f0f0\" : individualItemHovered.arr === \"lateAfternoonTimesArr\" && individualItemHovered.index === i ? \"rgba(0, 129, 177, 0.4)\" : \"rgb(255, 255, 255)\" : \"rgb(255, 255, 255)\",\n      color: bookedTimes ? item === selectedTime ? \"rgb(255, 255, 255)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : \"rgb(0, 0, 0)\" : \"rgb(0, 0, 0)\",\n      border: bookedTimes ? item === selectedTime ? \"2px solid transparent\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : individualItemHovered.arr === \"lateAfternoonTimesArr\" && individualItemHovered.index === i ? \"2px solid rgba(0, 129, 177, 0.4)\" : \"2px solid rgb(0, 0, 0)\" : \"2px solid rgb(0, 0, 0)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1124,\n      columnNumber: 17\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1294,\n      columnNumber: 19\n    }\n  }, item)))))), dayOfTheWeek === \"Friday\" ? null : /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1301,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_card_top_wrapping\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1302,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_of_day_heading\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1303,\n      columnNumber: 15\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1304,\n      columnNumber: 17\n    }\n  }, \"Evening\")), /*#__PURE__*/React.createElement(\"p\", {\n    className: \"time_of_day_card_show_more\",\n    onClick: handleEveningCollapse,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1306,\n      columnNumber: 15\n    }\n  }, \"Show \", eveningCollapseIsOpen ? \"Less\" : \"Times\")), /*#__PURE__*/React.createElement(Collapse, {\n    isOpen: eveningCollapseIsOpen,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1313,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inner_times_wrapper\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1314,\n      columnNumber: 15\n    }\n  }, eveningTimesArr.map((item, i) => /*#__PURE__*/React.createElement(\"div\", {\n    key: i,\n    className: \"individual_time_wrapper\",\n    onClick: handleTimeClick,\n    onMouseOver: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"eveningTimesArr\",\n            index: i\n          });\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          changeIndividualItemHovered({\n            arr: \"eveningTimesArr\",\n            index: i\n          });\n        }\n      }\n    },\n    onMouseOut: () => {\n      if (individualItemHovered !== \"\") {\n        changeIndividualItemHovered(\"\");\n      }\n    },\n    style: {\n      opacity: dayOfTheWeek === \"Sunday\" ? parseInt(item[0], 10) > 5 ? 0 : 1 : 1,\n      pointerEvents: bookedTimes ? dayOfTheWeek === \"Sunday\" ? parseInt(item[0], 10) > 5 ? \"none\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"none\" : \"auto\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"none\" : \"auto\" : \"auto\",\n      background: bookedTimes ? item === selectedTime ? \"rgb(44, 44, 52)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"#f0f0f0\" : individualItemHovered.arr === \"eveningTimesArr\" && individualItemHovered.index === i ? \"rgba(0, 129, 177, 0.4)\" : \"rgb(255, 255, 255)\" : \"rgb(255, 255, 255)\",\n      color: bookedTimes ? item === selectedTime ? \"rgb(255, 255, 255)\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : \"rgb(0, 0, 0)\" : \"rgb(0, 0, 0)\",\n      border: bookedTimes ? item === selectedTime ? \"2px solid transparent\" : bookedTimes.includes(item) || moment(dayOfTheWeek + \", \" + reformattedDay + \" \" + item + \" \" + (Number(item.split(\":\")[0]) >= 12 || Number(item.split(\":\")[0]) < 9 ? \"PM\" : \"AM\"), \"LLLL\").utc().subtract(12, \"hours\").valueOf() <= moment().utc().valueOf() ? \"rgb(201, 201, 201)\" : individualItemHovered.arr === \"eveningTimesArr\" && individualItemHovered.index === i ? \"2px solid rgba(0, 129, 177, 0.4)\" : \"2px solid rgb(0, 0, 0)\" : \"2px solid rgb(0, 0, 0)\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1316,\n      columnNumber: 19\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1484,\n      columnNumber: 21\n    }\n  }, item)))))), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_preference_bottom_buttons_container\",\n    style: {\n      paddingTop: \"5vh\",\n      marginTop: dayOfTheWeek === \"Sunday\" ? eveningCollapseIsOpen ? \"-10vh\" : \"0vh\" : dayOfTheWeek === \"Friday\" ? lateAfternoonCollapseIsOpen ? \"-10vh\" : \"0vh\" : eveningCollapseIsOpen ? \"-4vh\" : \"0vh\",\n      transition: \"margin-top 0.4s ease, padding-top 0.4s ease\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1491,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(Link, {\n    to: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          if (userAuthenticated) {\n            return \"/paymentinfo\";\n          } else {\n            return \"/checkout\";\n          }\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          if (userAuthenticated) {\n            return \"/paymentinfo\";\n          } else {\n            return \"/checkout\";\n          }\n        }\n      }\n    },\n    style: {\n      display: \"block\",\n      pointerEvents: selectedTime !== \"\" ? \"auto\" : \"none\"\n    },\n    onClick: handleContinueCheckoutButtonClick,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1510,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"time_preference_continue_button\",\n    style: {\n      background: selectedTime ? \"rgb(44, 44, 52)\" : \"#f0f0f0\",\n      color: selectedTime ? \"rgb(255, 255, 255)\" : \"rgb(201, 201, 201)\",\n      transition: \"background 0.5s ease, color 0.5s ease\"\n    },\n    onClick: () => {\n      if (userAuthenticated) {\n        dispatch(ACTION_PAYMENT_INFO_PAGE_OPENED());\n      } else {\n        dispatch(ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED());\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1540,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1557,\n      columnNumber: 15\n    }\n  }, \"Continue Checkout\"))), /*#__PURE__*/React.createElement(Link, {\n    to: () => {\n      if (!props.currentScreenSize) {\n        if (props.initialScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          return \"/availability\";\n        }\n      } else {\n        if (props.currentScreenSize >= 1200) {\n          return \"/\";\n        } else {\n          return \"/availability\";\n        }\n      }\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1560,\n      columnNumber: 11\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"change_date_button\",\n    onClick: () => dispatch(ACTION_AVAILABILITY_PAGE_OPENED()),\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1577,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"p\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 1581,\n      columnNumber: 15\n    }\n  }, \"Change Date\"))))));\n};\n\nexport default TimePreference;","map":{"version":3,"sources":["D:/WebProjects/Barbershops/MERN-barberShops/HighEnd/Client/src/components/availability/Time/TimePreference.js"],"names":["React","useCallback","useState","useEffect","Link","Redirect","useLocation","useDispatch","useSelector","moment","Collapse","FontAwesomeIcon","faChevronLeft","faChevronRight","useQuery","getAllAppointmentsQuery","getAllPersonalEventsQuery","animateScroll","ACTION_DAY_OF_THE_WEEK","ACTION_REFORMATTED_DAY_CLONE_RESET","ACTION_SELECTED_TIME","ACTION_SELECTED_TIME_RESET","ACTION_AFTERNOON_OPEN","ACTION_AFTERNOON_CLOSED","ACTION_LATE_AFTERNOON_OPEN","ACTION_LATE_AFTERNOON_CLOSED","ACTION_MORNING_OPEN","ACTION_MORNING_CLOSED","ACTION_EVENING_OPEN","ACTION_EVENING_CLOSED","ACTION_CONTINUE_BUTTON_ACTIVE","ACTION_CONTINUE_BUTTON_RESET","ACTION_FIRST_NAME_RESET","ACTION_LAST_NAME_RESET","ACTION_EMAIL_RESET","ACTION_EMAIL_NOT_INVALID","ACTION_EMAIL_NOT_VALID","ACTION_PHONE_NUMBER_RESET","ACTION_PHONE_NOT_INVALID","ACTION_PHONE_NOT_VALID","ACTION_APPOINTMENT_NOTES_RESET","ACTION_APPOINTMENT_END_TIME","ACTION_TOTAL_DURATION","ACTION_AVAILABILITY_PAGE_OPENED","ACTION_PAYMENT_INFO_PAGE_OPENED","ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED","TimePreference","props","dispatch","location","addOnsArr","state","add_ons_arr","treatmentsArr","treatments_arr","reformattedDay","selectedDay","dayOfTheWeek","selectedTime","totalDuration","continueToCheckoutButton","continueButtonActive","morningCollapseIsOpen","morningCollapse","collapseIsOpen","afternoonCollapseIsOpen","afternoonCollapse","lateAfternoonCollapseIsOpen","lateAfternoonCollapse","eveningCollapseIsOpen","eveningCollapse","splashScreenComplete","userAuthenticated","user_authenticated","selectedEsthetician","saltCaveInCart","in_cart","bookedTimes","changeBookedTimes","firstName","first_name","lastName","last_name","appointmentNotes","appointment_notes","email","emailIsValid","email_valid","emailIsInvalid","email_invalid","phoneNumber","phone_number","phoneIsValid","phone_valid","phoneIsInvalid","phone_invalid","individualItemHovered","changeIndividualItemHovered","checkedForBlockedTimes","changeCheckedForBlockedTimes","fetchPolicy","appointmentsData","data","appointmentsLoading","loading","personalEventsData","personalEventsLoading","pathname","includes","scrollToTop","containerId","alreadyBookedAppointments","all_appointments","filter","item","date","esthetician","blockedTimeForPersonalEvent","all_personal_events","format","staff","split","blockTime","alreadyBookedTimes","alreadyBookedTimesArr","minutesArr","i","length","startMinutes","Number","startTime","slice","minutes","Math","ceil","duration","currentDurationMinutes","floor","currentDurationEndHour","endHour","toString","endMinutes","calendarEndTime","intervalArr","Array","fill","reduce","accumulator","currentValue","concat","hourArr","j","push","quadrupleHourArr","map","e","startSliceBasedOnDuration","isInteger","endSliceBasedOnDuration","emptyArr","unshift","join","indexOf","endTime","sort","blockPersonalEventTimes","blockedTimeArr","allDay","start","end","current","add","redirectToHome","currentScreenSize","initialScreenSize","daysOfTheWeekArr","Mon","Tue","Wed","Thu","Fri","Sat","Sun","getFullDayOfTheWeek","dayThreeLetters","fullDayName","handleMorningCollapse","handleAfternoonCollapse","handleLateAfternoonCollapse","handleEveningCollapse","handleContinueCheckoutButtonClick","fifteenMinuteIntervals","morningTimesArr","createMorningTimeInstances","hours","multipleHours","afternoonTimesArr","createAfternoonTimeInstances","lateAfternoonTimesArr","splice","eveningTimesArr","createEveningTimeInstances","handleTimeClick","renderedTime","target","lastChild","innerText","treatmentDurationArr","addOnsDurationArr","totalDurationArr","totalDurationValue","undefined","a","b","endTotalTime","endHours","display","toUpperCase","arr","index","background","utc","subtract","valueOf","color","border","pointerEvents","opacity","parseInt","paddingTop","marginTop","transition"],"mappings":"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","sourcesContent":["import React, { useCallback, useState, useEffect } from \"react\";\r\nimport { Link, Redirect, useLocation } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport moment from \"moment\";\r\nimport { Collapse } from \"reactstrap\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faChevronLeft,\r\n  faChevronRight,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { useQuery } from \"@apollo/react-hooks\";\r\nimport getAllAppointmentsQuery from \"../../../graphql/queries/getAllAppointmentsQuery\";\r\nimport getAllPersonalEventsQuery from \"../../../graphql/queries/getAllPersonalEventsQuery\";\r\nimport { animateScroll } from \"react-scroll\";\r\nimport ACTION_DAY_OF_THE_WEEK from \"../../../actions/SelectedDay/DayOfTheWeek/ACTION_DAY_OF_THE_WEEK\";\r\nimport ACTION_REFORMATTED_DAY_CLONE_RESET from \"../../../actions/SelectedDay/ReformattedDayClone/ACTION_REFORMATTED_DAY_CLONE_RESET\";\r\nimport ACTION_SELECTED_TIME from \"../../../actions/SelectedTime/ACTION_SELECTED_TIME\";\r\nimport ACTION_SELECTED_TIME_RESET from \"../../../actions/SelectedTime/ACTION_SELECTED_TIME_RESET\";\r\nimport ACTION_AFTERNOON_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/Afternoon/ACTION_AFTERNOON_OPEN\";\r\nimport ACTION_AFTERNOON_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/Afternoon/ACTION_AFTERNOON_CLOSED\";\r\nimport ACTION_LATE_AFTERNOON_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/LateAfternoon/ACTION_LATE_AFTERNOON_OPEN\";\r\nimport ACTION_LATE_AFTERNOON_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/LateAfternoon/ACTION_LATE_AFTERNOON_CLOSED\";\r\nimport ACTION_MORNING_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/Morning/ACTION_MORNING_OPEN\";\r\nimport ACTION_MORNING_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/Morning/ACTION_MORNING_CLOSED\";\r\nimport ACTION_EVENING_OPEN from \"../../../actions/SelectedTime/CollapseIsOpen/Evening/ACTION_EVENING_OPEN\";\r\nimport ACTION_EVENING_CLOSED from \"../../../actions/SelectedTime/CollapseIsOpen/Evening/ACTION_EVENING_CLOSED\";\r\nimport ACTION_CONTINUE_BUTTON_ACTIVE from \"../../../actions/ContinueToCheckoutButtonActive/ACTION_CONTINUE_BUTTON_ACTIVE\";\r\nimport ACTION_CONTINUE_BUTTON_RESET from \"../../../actions/ContinueToCheckoutButtonActive/ACTION_CONTINUE_BUTTON_RESET\";\r\nimport ACTION_FIRST_NAME_RESET from \"../../../actions/GuestCheckoutForm/FirstName/ACTION_FIRST_NAME_RESET\";\r\nimport ACTION_LAST_NAME_RESET from \"../../../actions/GuestCheckoutForm/LastName/ACTION_LAST_NAME_RESET\";\r\nimport ACTION_EMAIL_RESET from \"../../../actions/GuestCheckoutForm/Email/ACTION_EMAIL_RESET\";\r\nimport ACTION_EMAIL_NOT_INVALID from \"../../../actions/EmailValidation/Invalid/ACTION_EMAIL_NOT_INVALID\";\r\nimport ACTION_EMAIL_NOT_VALID from \"../../../actions/EmailValidation/Valid/ACTION_EMAIL_NOT_VALID\";\r\nimport ACTION_PHONE_NUMBER_RESET from \"../../../actions/GuestCheckoutForm/PhoneNumber/ACTION_PHONE_NUMBER_RESET\";\r\nimport ACTION_PHONE_NOT_INVALID from \"../../../actions/PhoneNumberValidation/Invalid/ACTION_PHONE_NOT_INVALID\";\r\nimport ACTION_PHONE_NOT_VALID from \"../../../actions/PhoneNumberValidation/Valid/ACTION_PHONE_NOT_VALID\";\r\nimport ACTION_APPOINTMENT_NOTES_RESET from \"../../../actions/GuestCheckoutForm/AppointmentNotes/ACTION_APPOINTMENT_NOTES_RESET\";\r\nimport ACTION_APPOINTMENT_END_TIME from \"../../../actions/AppointmentEndTime/ACTION_APPOINTMENT_END_TIME\";\r\nimport ACTION_TOTAL_DURATION from \"../../../actions/TotalDuration/ACTION_TOTAL_DURATION\";\r\nimport ACTION_AVAILABILITY_PAGE_OPENED from \"../../../actions/InCart/CartPageOpened/ACTION_AVAILABILITY_PAGE_OPENED\";\r\nimport ACTION_PAYMENT_INFO_PAGE_OPENED from \"../../../actions/InCart/CartPageOpened/ACTION_PAYMENT_INFO_PAGE_OPENED\";\r\nimport ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED from \"../../../actions/InCart/CartPageOpened/ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED\";\r\nimport \"./TimePreference.css\";\r\n// Minified Bootstrap CSS file (for Collapse feature)\r\nimport \"../../../bootstrap.min.css\";\r\n\r\nconst TimePreference = (props) => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const addOnsArr = useSelector((state) => state.addOnsArr.add_ons_arr);\r\n  const treatmentsArr = useSelector(\r\n    (state) => state.treatmentsArr.treatments_arr\r\n  );\r\n  const reformattedDay = useSelector(\r\n    (state) => state.reformattedDay.reformattedDay\r\n  );\r\n  const selectedDay = useSelector((state) => state.selectedDay.selectedDay);\r\n  const dayOfTheWeek = useSelector((state) => state.dayOfTheWeek.dayOfTheWeek);\r\n  const selectedTime = useSelector((state) => state.selectedTime.selectedTime);\r\n  const totalDuration = useSelector(\r\n    (state) => state.totalDuration.totalDuration\r\n  );\r\n  const continueToCheckoutButton = useSelector(\r\n    (state) => state.continueToCheckoutButton.continueButtonActive\r\n  );\r\n  const morningCollapseIsOpen = useSelector(\r\n    (state) => state.morningCollapse.collapseIsOpen\r\n  );\r\n  const afternoonCollapseIsOpen = useSelector(\r\n    (state) => state.afternoonCollapse.collapseIsOpen\r\n  );\r\n  const lateAfternoonCollapseIsOpen = useSelector(\r\n    (state) => state.lateAfternoonCollapse.collapseIsOpen\r\n  );\r\n  const eveningCollapseIsOpen = useSelector(\r\n    (state) => state.eveningCollapse.collapseIsOpen\r\n  );\r\n  const splashScreenComplete = useSelector(\r\n    (state) => state.splashScreenComplete.splashScreenComplete\r\n  );\r\n  const userAuthenticated = useSelector(\r\n    (state) => state.userAuthenticated.user_authenticated\r\n  );\r\n  const selectedEsthetician = useSelector(\r\n    (state) => state.selectedEsthetician.selectedEsthetician\r\n  );\r\n  const saltCaveInCart = useSelector((state) => state.saltCaveInCart.in_cart);\r\n\r\n  const [bookedTimes, changeBookedTimes] = useState(null);\r\n\r\n  // Checkout Form States\r\n  const firstName = useSelector((state) => state.firstName.first_name);\r\n  const lastName = useSelector((state) => state.lastName.last_name);\r\n  const appointmentNotes = useSelector(\r\n    (state) => state.appointmentNotes.appointment_notes\r\n  );\r\n\r\n  // Email States\r\n  const email = useSelector((state) => state.email.email);\r\n  const emailIsValid = useSelector((state) => state.emailIsValid.email_valid);\r\n  const emailIsInvalid = useSelector(\r\n    (state) => state.emailIsInvalid.email_invalid\r\n  );\r\n\r\n  // Phone Number States\r\n  const phoneNumber = useSelector((state) => state.phoneNumber.phone_number);\r\n  const phoneIsValid = useSelector((state) => state.phoneIsValid.phone_valid);\r\n  const phoneIsInvalid = useSelector(\r\n    (state) => state.phoneIsInvalid.phone_invalid\r\n  );\r\n\r\n  const [individualItemHovered, changeIndividualItemHovered] = useState(\"\");\r\n  const [checkedForBlockedTimes, changeCheckedForBlockedTimes] = useState(\r\n    false\r\n  );\r\n\r\n  const { data: appointmentsData, loading: appointmentsLoading } = useQuery(\r\n    getAllAppointmentsQuery,\r\n    {\r\n      fetchPolicy: \"no-cache\",\r\n    }\r\n  );\r\n\r\n  const { data: personalEventsData, loading: personalEventsLoading } = useQuery(\r\n    getAllPersonalEventsQuery,\r\n    {\r\n      fetchPolicy: \"no-cache\",\r\n    }\r\n  );\r\n\r\n  useEffect(() => {\r\n    if (location.pathname.includes(\"/availability/timepreference\")) {\r\n      animateScroll.scrollToTop({ containerId: \"time_page\" });\r\n    }\r\n  }, [location.pathname]);\r\n\r\n  const alreadyBookedAppointments = appointmentsData\r\n    ? appointmentsData.all_appointments.filter(\r\n        (item) =>\r\n          item.date === reformattedDay &&\r\n          item.esthetician === selectedEsthetician\r\n      )\r\n    : null;\r\n\r\n  const blockedTimeForPersonalEvent = personalEventsData\r\n    ? personalEventsData.all_personal_events.filter(\r\n        (item) =>\r\n          moment(item.date, \"L\").format(\"MMMM D, YYYY\") === reformattedDay &&\r\n          item.staff.split(\" \")[0] + \" \" + item.staff.split(\" \")[1][0] + \".\" ===\r\n            selectedEsthetician &&\r\n          item.blockTime\r\n      )\r\n    : null;\r\n\r\n  const alreadyBookedTimes = useCallback(() => {\r\n    const alreadyBookedTimesArr = [];\r\n    let minutesArr = [\"00\", \"15\", \"30\", \"45\"];\r\n\r\n    if (alreadyBookedAppointments !== null) {\r\n      for (let i = 0; i < alreadyBookedAppointments.length; i++) {\r\n        if (alreadyBookedAppointments) {\r\n          const startMinutes = Number(\r\n            alreadyBookedAppointments[i].startTime.slice(-2)\r\n          );\r\n          const minutes =\r\n            startMinutes +\r\n            Math.ceil(alreadyBookedAppointments[i].duration / 15) * 15;\r\n\r\n          const currentDurationMinutes =\r\n            totalDuration - Math.floor(totalDuration / 60) * 60 > 30\r\n              ? Math.ceil(totalDuration / 15) * 15\r\n              : Math.floor(totalDuration / 15) * 15;\r\n\r\n          const currentDurationEndHour = Math.ceil(currentDurationMinutes / 60);\r\n\r\n          const endHour = (\r\n            Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) +\r\n            Number((minutes / 60).toString().slice(0, 1))\r\n          ).toString();\r\n\r\n          const endMinutes =\r\n            (minutes / 60).toString().length > 1\r\n              ? (\r\n                  Number((minutes / 60).toString().slice(1, minutes.length)) *\r\n                  60\r\n                ).toString()\r\n              : \"00\";\r\n\r\n          const calendarEndTime =\r\n            (Number(endHour) > 12\r\n              ? (Number(endHour) - 12).toString()\r\n              : endHour) +\r\n            \":\" +\r\n            endMinutes;\r\n\r\n          const intervalArr = new Array(\r\n            Math.ceil(\r\n              Math.ceil(alreadyBookedAppointments[i].duration / 15) /\r\n                minutesArr.length\r\n            )\r\n          )\r\n            .fill(minutesArr)\r\n            .reduce(\r\n              (accumulator, currentValue) => accumulator.concat(currentValue),\r\n              []\r\n            );\r\n\r\n          const hourArr = [];\r\n\r\n          for (\r\n            let j =\r\n              Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) -\r\n              currentDurationEndHour;\r\n            j < Number(endHour) + 1;\r\n            j++\r\n          ) {\r\n            if (j > 12) {\r\n              hourArr.push(j - 12);\r\n            } else {\r\n              hourArr.push(j);\r\n            }\r\n          }\r\n\r\n          const quadrupleHourArr = hourArr\r\n            .map((e) => {\r\n              return [\r\n                e.toString() + \":\" + intervalArr[0],\r\n                e.toString() + \":\" + intervalArr[1],\r\n                e.toString() + \":\" + intervalArr[2],\r\n                e.toString() + \":\" + intervalArr[3],\r\n              ];\r\n            })\r\n            .reduce(\r\n              (accumulator, currentValue) => accumulator.concat(currentValue),\r\n              []\r\n            );\r\n\r\n          const startSliceBasedOnDuration = Number.isInteger(totalDuration / 15)\r\n            ? // Rounds available apppointment time up if total duration is divisibile by 15\r\n              (Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) *\r\n                60 +\r\n                Number(alreadyBookedAppointments[i].startTime.split(\":\")[1]) -\r\n                totalDuration) /\r\n              60\r\n            : // Rounds available apppointment time down if total duration is not divisibile by 15\r\n              Math.floor(\r\n                (Number(alreadyBookedAppointments[i].startTime.split(\":\")[0]) *\r\n                  60 +\r\n                  (Number(\r\n                    alreadyBookedAppointments[i].startTime.split(\":\")[1]\r\n                  ) -\r\n                    totalDuration)) /\r\n                  60 /\r\n                  0.25\r\n              ) * 0.25;\r\n\r\n          const endSliceBasedOnDuration = () => {\r\n            let emptyArr = [];\r\n\r\n            emptyArr.push(startSliceBasedOnDuration.toString().split(\".\")[1]);\r\n            emptyArr.unshift(\".\");\r\n            emptyArr = (Number(emptyArr.join(\"\")) * 60).toString();\r\n            return emptyArr;\r\n          };\r\n\r\n          alreadyBookedTimesArr.push(\r\n            alreadyBookedAppointments[i].startTime,\r\n            quadrupleHourArr\r\n              .slice(\r\n                quadrupleHourArr.indexOf(\r\n                  Number.isInteger(startSliceBasedOnDuration)\r\n                    ? startSliceBasedOnDuration.toString() + \":00\"\r\n                    : startSliceBasedOnDuration.toString().split(\".\")[0] +\r\n                        \":\" +\r\n                        endSliceBasedOnDuration()\r\n                ),\r\n                quadrupleHourArr.length -\r\n                  (Number(\r\n                    alreadyBookedAppointments[i].endTime.split(\":\")[1]\r\n                  ) === 30 ||\r\n                  Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) ===\r\n                    35 ||\r\n                  Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) ===\r\n                    40 ||\r\n                  Number(alreadyBookedAppointments[i].endTime.split(\":\")[1]) ===\r\n                    45\r\n                    ? 0\r\n                    : 4 -\r\n                      minutesArr.indexOf(\r\n                        Math.floor(\r\n                          (Number(\r\n                            alreadyBookedAppointments[i].endTime.split(\":\")[1]\r\n                          ) +\r\n                            25) /\r\n                            15\r\n                        ) *\r\n                          15 >\r\n                          60\r\n                          ? (\r\n                              Math.floor(\r\n                                (Number(\r\n                                  alreadyBookedAppointments[i].endTime.split(\r\n                                    \":\"\r\n                                  )[1]\r\n                                ) +\r\n                                  25) /\r\n                                  15\r\n                              ) *\r\n                                15 -\r\n                              60\r\n                            ).toString()\r\n                          : (\r\n                              Math.floor(\r\n                                (Number(\r\n                                  alreadyBookedAppointments[i].endTime.split(\r\n                                    \":\"\r\n                                  )[1]\r\n                                ) +\r\n                                  25) /\r\n                                  15\r\n                              ) * 15\r\n                            ).toString()\r\n                      ))\r\n              )\r\n              .sort(),\r\n            calendarEndTime\r\n          );\r\n        } else {\r\n          return null;\r\n        }\r\n      }\r\n      changeBookedTimes(\r\n        alreadyBookedTimesArr.reduce(\r\n          (accumulator, currentValue) => accumulator.concat(currentValue),\r\n          []\r\n        )\r\n      );\r\n    }\r\n  }, [alreadyBookedAppointments, totalDuration]);\r\n\r\n  const blockPersonalEventTimes = useCallback(() => {\r\n    const blockedTimeArr = [];\r\n\r\n    if (blockedTimeForPersonalEvent !== null) {\r\n      for (let i = 0; i < blockedTimeForPersonalEvent.length; i++) {\r\n        const allDay = blockedTimeForPersonalEvent[i].allDay;\r\n\r\n        let start = \"\";\r\n        let end = \"\";\r\n\r\n        if (!allDay) {\r\n          start = moment(blockedTimeForPersonalEvent[i].startTime, \"h:mm A\");\r\n          end = moment(blockedTimeForPersonalEvent[i].endTime, \"h:mm A\");\r\n        } else {\r\n          start = moment(\"12:00 AM\", \"h:mm A\");\r\n          end = moment(\"11:30 PM\", \"h:mm A\");\r\n        }\r\n\r\n        let current = moment(start);\r\n\r\n        while (current <= end) {\r\n          blockedTimeArr.push(current.format(\"h:mm\"));\r\n          current.add(15, \"minutes\");\r\n        }\r\n\r\n        if (bookedTimes) {\r\n          changeBookedTimes(bookedTimes.concat(blockedTimeArr));\r\n        } else {\r\n          changeBookedTimes(blockedTimeArr);\r\n        }\r\n      }\r\n    }\r\n  }, [blockedTimeForPersonalEvent, bookedTimes]);\r\n\r\n  useEffect(() => {\r\n    if (!appointmentsLoading && !personalEventsLoading) {\r\n      if (!checkedForBlockedTimes) {\r\n        alreadyBookedTimes();\r\n        blockPersonalEventTimes();\r\n\r\n        changeCheckedForBlockedTimes(true);\r\n      }\r\n    }\r\n  }, [\r\n    checkedForBlockedTimes,\r\n    appointmentsLoading,\r\n    personalEventsLoading,\r\n    alreadyBookedTimes,\r\n    blockPersonalEventTimes,\r\n  ]);\r\n\r\n  const redirectToHome = () => {\r\n    if (!splashScreenComplete) {\r\n      return <Redirect to=\"/\" />;\r\n    } else if (!props.currentScreenSize) {\r\n      if (props.initialScreenSize >= 1200) {\r\n        return <Redirect to=\"/\" />;\r\n      }\r\n    } else if (props.currentScreenSize >= 1200) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  const daysOfTheWeekArr = [\r\n    { Mon: \"Monday\" },\r\n    { Tue: \"Tuesday\" },\r\n    { Wed: \"Wednesday\" },\r\n    { Thu: \"Thursday\" },\r\n    { Fri: \"Friday\" },\r\n    { Sat: \"Saturday\" },\r\n    { Sun: \"Sunday\" },\r\n  ];\r\n\r\n  const getFullDayOfTheWeek = useCallback(() => {\r\n    if (selectedDay) {\r\n      const dayThreeLetters = selectedDay.toString().slice(0, 3);\r\n\r\n      let fullDayName = \"\";\r\n\r\n      for (let i = 0; i < daysOfTheWeekArr.length; i++) {\r\n        if (daysOfTheWeekArr[i][dayThreeLetters]) {\r\n          fullDayName = daysOfTheWeekArr[i][dayThreeLetters];\r\n        }\r\n      }\r\n\r\n      return fullDayName;\r\n    }\r\n  }, [daysOfTheWeekArr, selectedDay]);\r\n\r\n  useEffect(() => {\r\n    if (!dayOfTheWeek) {\r\n      dispatch(ACTION_DAY_OF_THE_WEEK(getFullDayOfTheWeek()));\r\n    }\r\n  }, [dayOfTheWeek, dispatch, getFullDayOfTheWeek]);\r\n\r\n  const handleMorningCollapse = () => {\r\n    if (morningCollapseIsOpen) {\r\n      dispatch(ACTION_MORNING_CLOSED());\r\n    } else {\r\n      dispatch(ACTION_MORNING_OPEN());\r\n    }\r\n    if (afternoonCollapseIsOpen) {\r\n      dispatch(ACTION_AFTERNOON_CLOSED());\r\n    }\r\n    if (eveningCollapseIsOpen) {\r\n      dispatch(ACTION_EVENING_CLOSED());\r\n    }\r\n    if (lateAfternoonCollapseIsOpen) {\r\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\r\n    }\r\n  };\r\n\r\n  const handleAfternoonCollapse = () => {\r\n    if (afternoonCollapseIsOpen) {\r\n      dispatch(ACTION_AFTERNOON_CLOSED());\r\n    } else {\r\n      dispatch(ACTION_AFTERNOON_OPEN());\r\n    }\r\n    if (morningCollapseIsOpen) {\r\n      dispatch(ACTION_MORNING_CLOSED());\r\n    }\r\n    if (eveningCollapseIsOpen) {\r\n      dispatch(ACTION_EVENING_CLOSED());\r\n    }\r\n    if (lateAfternoonCollapseIsOpen) {\r\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\r\n    }\r\n  };\r\n\r\n  const handleLateAfternoonCollapse = () => {\r\n    if (lateAfternoonCollapseIsOpen) {\r\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\r\n    } else {\r\n      dispatch(ACTION_LATE_AFTERNOON_OPEN());\r\n    }\r\n    if (morningCollapseIsOpen) {\r\n      dispatch(ACTION_MORNING_CLOSED());\r\n    }\r\n    if (afternoonCollapseIsOpen) {\r\n      dispatch(ACTION_AFTERNOON_CLOSED());\r\n    }\r\n    if (eveningCollapseIsOpen) {\r\n      dispatch(ACTION_EVENING_CLOSED());\r\n    }\r\n  };\r\n\r\n  const handleEveningCollapse = () => {\r\n    if (eveningCollapseIsOpen) {\r\n      dispatch(ACTION_EVENING_CLOSED());\r\n    } else {\r\n      dispatch(ACTION_EVENING_OPEN());\r\n    }\r\n    if (morningCollapseIsOpen) {\r\n      dispatch(ACTION_MORNING_CLOSED());\r\n    }\r\n    if (afternoonCollapseIsOpen) {\r\n      dispatch(ACTION_AFTERNOON_CLOSED());\r\n    }\r\n    if (lateAfternoonCollapseIsOpen) {\r\n      dispatch(ACTION_LATE_AFTERNOON_CLOSED());\r\n    }\r\n  };\r\n\r\n  const handleContinueCheckoutButtonClick = () => {\r\n    dispatch(ACTION_CONTINUE_BUTTON_ACTIVE());\r\n    dispatch(ACTION_DAY_OF_THE_WEEK(dayOfTheWeek));\r\n  };\r\n\r\n  const fifteenMinuteIntervals = [\"00\", \"15\", \"30\", \"45\"];\r\n  const morningTimesArr = [];\r\n\r\n  const createMorningTimeInstances = () => {\r\n    let hours = [];\r\n    let minutes = fifteenMinuteIntervals.concat(fifteenMinuteIntervals);\r\n\r\n    for (let i = 10; i < 12; i++) {\r\n      hours.push(i);\r\n    }\r\n\r\n    const multipleHours = hours\r\n      .map((e) => [e, e, e, e])\r\n      .reduce(\r\n        (accumulator, currentValue) => accumulator.concat(currentValue),\r\n        []\r\n      );\r\n\r\n    for (let i = 0; i < multipleHours.length; i++) {\r\n      morningTimesArr.push(\r\n        multipleHours[i].toString() + \":\" + minutes[i].toString()\r\n      );\r\n    }\r\n  };\r\n\r\n  createMorningTimeInstances();\r\n\r\n  const afternoonTimesArr = [];\r\n\r\n  const createAfternoonTimeInstances = () => {\r\n    let hours = [];\r\n    let minutes = new Array(20)\r\n      .fill(fifteenMinuteIntervals)\r\n      .reduce(\r\n        (accumulator, currentValue) => accumulator.concat(currentValue),\r\n        []\r\n      );\r\n\r\n    for (let i = 12; i < 17; i++) {\r\n      hours.push(i);\r\n    }\r\n\r\n    const multipleHours = hours\r\n      .map((e) => (e > 12 ? [e - 12, e - 12, e - 12, e - 12] : [e, e, e, e]))\r\n      .reduce(\r\n        (accumulator, currentValue) => accumulator.concat(currentValue),\r\n        []\r\n      );\r\n\r\n    for (let i = 0; i < multipleHours.length; i++) {\r\n      afternoonTimesArr.push(\r\n        multipleHours[i].toString() + \":\" + minutes[i].toString()\r\n      );\r\n    }\r\n  };\r\n\r\n  createAfternoonTimeInstances();\r\n\r\n  let lateAfternoonTimesArr = afternoonTimesArr.splice(12, 10);\r\n\r\n  const eveningTimesArr = [];\r\n\r\n  const createEveningTimeInstances = () => {\r\n    let hours = [];\r\n    let minutes = new Array(dayOfTheWeek === \"Sunday\" ? 5 : 12)\r\n      .fill(fifteenMinuteIntervals)\r\n      .reduce(\r\n        (accumulator, currentValue) => accumulator.concat(currentValue),\r\n        []\r\n      );\r\n\r\n    for (let i = 17; i < (dayOfTheWeek === \"Sunday\" ? 19 : 20); i++) {\r\n      hours.push(i);\r\n    }\r\n\r\n    const multipleHours = hours\r\n      .map((e) => [e - 12, e - 12, e - 12, e - 12])\r\n      .reduce(\r\n        (accumulator, currentValue) => accumulator.concat(currentValue),\r\n        []\r\n      );\r\n\r\n    for (let i = 0; i < multipleHours.length; i++) {\r\n      eveningTimesArr.push(\r\n        multipleHours[i].toString() + \":\" + minutes[i].toString()\r\n      );\r\n    }\r\n  };\r\n\r\n  createEveningTimeInstances();\r\n\r\n  const handleTimeClick = (e) => {\r\n    let renderedTime = \"\";\r\n\r\n    // Required for button border click to trigger selected time on mobile\r\n    if (e.target.lastChild.innerText) {\r\n      renderedTime = e.target.lastChild.innerText;\r\n    } else {\r\n      renderedTime = e.target.innerText;\r\n    }\r\n\r\n    dispatch(ACTION_SELECTED_TIME(renderedTime));\r\n    if (selectedTime === renderedTime) {\r\n      dispatch(ACTION_SELECTED_TIME_RESET());\r\n      dispatch(ACTION_CONTINUE_BUTTON_RESET());\r\n      if (firstName) {\r\n        dispatch(ACTION_FIRST_NAME_RESET());\r\n      }\r\n      if (lastName) {\r\n        dispatch(ACTION_LAST_NAME_RESET());\r\n      }\r\n      if (email) {\r\n        dispatch(ACTION_EMAIL_RESET());\r\n      }\r\n      if (emailIsInvalid) {\r\n        dispatch(ACTION_EMAIL_NOT_INVALID());\r\n      }\r\n      if (emailIsValid) {\r\n        dispatch(ACTION_EMAIL_NOT_VALID());\r\n      }\r\n      if (phoneNumber) {\r\n        dispatch(ACTION_PHONE_NUMBER_RESET());\r\n      }\r\n      if (phoneIsInvalid) {\r\n        dispatch(ACTION_PHONE_NOT_INVALID());\r\n      }\r\n      if (phoneIsValid) {\r\n        dispatch(ACTION_PHONE_NOT_VALID());\r\n      }\r\n      if (appointmentNotes) {\r\n        dispatch(ACTION_APPOINTMENT_NOTES_RESET());\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    const treatmentDurationArr = treatmentsArr.map((item) => item.duration);\r\n    const addOnsDurationArr = addOnsArr.map((item) => item.duration);\r\n    const totalDurationArr = treatmentDurationArr.concat(addOnsDurationArr);\r\n\r\n    let totalDurationValue;\r\n    totalDurationArr[0] === undefined\r\n      ? (totalDurationValue = null)\r\n      : (totalDurationValue = totalDurationArr.reduce((a, b) => a + b));\r\n\r\n    if (totalDuration !== totalDurationValue) {\r\n      dispatch(ACTION_TOTAL_DURATION(totalDurationValue));\r\n    }\r\n  }, [addOnsArr, dispatch, treatmentsArr, totalDuration]);\r\n\r\n  useEffect(() => {\r\n    if (selectedTime) {\r\n      let endTotalTime = \"\";\r\n      let endMinutes =\r\n        Number(\r\n          selectedTime.slice(selectedTime.length - 2, selectedTime.length)\r\n        ) + totalDuration;\r\n      let endHours = Number(selectedTime.slice(0, selectedTime.indexOf(\":\")));\r\n\r\n      if (endMinutes >= 240) {\r\n        endMinutes -= 240;\r\n        endHours += 4;\r\n      } else {\r\n        if (endMinutes >= 180) {\r\n          endMinutes -= 180;\r\n          endHours += 3;\r\n        } else {\r\n          if (endMinutes >= 120) {\r\n            endMinutes -= 120;\r\n            endHours += 2;\r\n          } else {\r\n            if (endMinutes >= 60) {\r\n              endMinutes -= 60;\r\n              endHours += 1;\r\n            }\r\n          }\r\n        }\r\n      }\r\n\r\n      if (endHours > 12) {\r\n        endHours -= 12;\r\n      }\r\n\r\n      endMinutes = endMinutes.toString().split(\"\");\r\n      if (endMinutes.toString().length < 2) {\r\n        endMinutes.splice(0, 0, \"0\");\r\n      }\r\n\r\n      endTotalTime = endHours.toString() + \":\" + endMinutes.join(\"\");\r\n\r\n      dispatch(ACTION_APPOINTMENT_END_TIME(endTotalTime));\r\n    }\r\n  }, [selectedTime, totalDuration, dispatch]);\r\n\r\n  return (\r\n    <div className=\"select_time_container\" id=\"time_page\">\r\n      {redirectToHome()}\r\n      <div className=\"select_time_container_header\">\r\n        <Link\r\n          to={() => {\r\n            if (!props.currentScreenSize) {\r\n              if (props.initialScreenSize >= 1200) {\r\n                return \"/\";\r\n              } else {\r\n                return \"/availability\";\r\n              }\r\n            } else {\r\n              if (props.currentScreenSize >= 1200) {\r\n                return \"/\";\r\n              } else {\r\n                return \"/availability\";\r\n              }\r\n            }\r\n          }}\r\n        >\r\n          <FontAwesomeIcon\r\n            className=\"select_time_back_arrow\"\r\n            icon={faChevronLeft}\r\n            onClick={() => {\r\n              dispatch(ACTION_AVAILABILITY_PAGE_OPENED());\r\n              dispatch(ACTION_REFORMATTED_DAY_CLONE_RESET);\r\n            }}\r\n          />\r\n        </Link>\r\n        <h1>AVAILABILITY</h1>\r\n        <Link\r\n          to={() => {\r\n            if (!props.currentScreenSize) {\r\n              if (props.initialScreenSize >= 1200) {\r\n                return \"/\";\r\n              } else {\r\n                if (userAuthenticated) {\r\n                  return \"/paymentinfo\";\r\n                } else {\r\n                  return \"/checkout\";\r\n                }\r\n              }\r\n            } else {\r\n              if (props.currentScreenSize >= 1200) {\r\n                return \"/\";\r\n              } else {\r\n                if (userAuthenticated) {\r\n                  return \"/paymentinfo\";\r\n                } else {\r\n                  return \"/checkout\";\r\n                }\r\n              }\r\n            }\r\n          }}\r\n          onClick={() => {\r\n            if (userAuthenticated) {\r\n              dispatch(ACTION_PAYMENT_INFO_PAGE_OPENED());\r\n            } else {\r\n              dispatch(ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED());\r\n            }\r\n          }}\r\n        >\r\n          <FontAwesomeIcon\r\n            className=\"select_time_forward_arrow\"\r\n            style={{ display: continueToCheckoutButton ? \"block\" : \"none\" }}\r\n            icon={faChevronRight}\r\n          />\r\n        </Link>\r\n      </div>\r\n      <div className=\"select_a_time_header\">\r\n        <h2>\r\n          SELECT A TIME\r\n          {saltCaveInCart\r\n            ? null\r\n            : selectedEsthetician\r\n            ? \" WITH \" +\r\n              selectedEsthetician.split(\" \")[0].toUpperCase() +\r\n              \" \" +\r\n              selectedEsthetician.split(\" \")[1][0].toUpperCase() +\r\n              \".\"\r\n            : null}\r\n        </h2>\r\n      </div>\r\n      <p className=\"time_statement\">\r\n        Choose a time for your appointment on {getFullDayOfTheWeek()},{\" \"}\r\n        {reformattedDay}.\r\n      </p>\r\n      <div className=\"time_of_day_selectors_wrapper\">\r\n        <div className=\"time_of_day_card_container\">\r\n          <div className=\"time_of_day_card_top_wrapping\">\r\n            <div className=\"time_of_day_heading\">\r\n              <p>Morning</p>\r\n            </div>\r\n            <p\r\n              className=\"time_of_day_card_show_more\"\r\n              onClick={handleMorningCollapse}\r\n            >\r\n              Show {morningCollapseIsOpen ? \"Less\" : \"Times\"}\r\n            </p>\r\n          </div>\r\n          <Collapse isOpen={morningCollapseIsOpen}>\r\n            <div className=\"inner_times_wrapper\">\r\n              {morningTimesArr.map((item, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"individual_time_wrapper\"\r\n                  onClick={handleTimeClick}\r\n                  onMouseOver={() => {\r\n                    if (!props.currentScreenSize) {\r\n                      if (props.initialScreenSize >= 1200) {\r\n                        changeIndividualItemHovered({\r\n                          arr: \"morningTimesArr\",\r\n                          index: i,\r\n                        });\r\n                      }\r\n                    } else {\r\n                      if (props.currentScreenSize >= 1200) {\r\n                        changeIndividualItemHovered({\r\n                          arr: \"morningTimesArr\",\r\n                          index: i,\r\n                        });\r\n                      }\r\n                    }\r\n                  }}\r\n                  onMouseOut={() => {\r\n                    if (individualItemHovered !== \"\") {\r\n                      changeIndividualItemHovered(\"\");\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    background: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"rgb(44, 44, 52)\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"#f0f0f0\"\r\n                        : individualItemHovered.arr === \"morningTimesArr\" &&\r\n                          individualItemHovered.index === i\r\n                        ? \"rgba(0, 129, 177, 0.4)\"\r\n                        : \"rgb(255, 255, 255)\"\r\n                      : \"rgb(255, 255, 255)\",\r\n                    color: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"rgb(255, 255, 255)\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"rgb(201, 201, 201)\"\r\n                        : \"rgb(0, 0, 0)\"\r\n                      : \"rgb(0, 0, 0)\",\r\n                    border: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"2px solid transparent\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"rgb(201, 201, 201)\"\r\n                        : individualItemHovered.arr === \"morningTimesArr\" &&\r\n                          individualItemHovered.index === i\r\n                        ? \"2px solid rgba(0, 129, 177, 0.4)\"\r\n                        : \"2px solid rgb(0, 0, 0)\"\r\n                      : \"2px solid rgb(0, 0, 0)\",\r\n                    pointerEvents: bookedTimes\r\n                      ? bookedTimes.includes(item) ||\r\n                        moment(\r\n                          dayOfTheWeek +\r\n                            \", \" +\r\n                            reformattedDay +\r\n                            \" \" +\r\n                            item +\r\n                            \" \" +\r\n                            (Number(item.split(\":\")[0]) >= 12 ||\r\n                            Number(item.split(\":\")[0]) < 9\r\n                              ? \"PM\"\r\n                              : \"AM\"),\r\n                          \"LLLL\"\r\n                        )\r\n                          .utc()\r\n                          .subtract(12, \"hours\")\r\n                          .valueOf() <=\r\n                          moment()\r\n                            .utc()\r\n                            .valueOf()\r\n                        ? \"none\"\r\n                        : \"auto\"\r\n                      : \"auto\",\r\n                  }}\r\n                >\r\n                  <p>{item}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </Collapse>\r\n        </div>\r\n        <div className=\"time_of_day_card_container\">\r\n          <div className=\"time_of_day_card_top_wrapping\">\r\n            <div className=\"time_of_day_heading\">\r\n              <p>Afternoon</p>\r\n            </div>\r\n            <p\r\n              className=\"time_of_day_card_show_more\"\r\n              onClick={handleAfternoonCollapse}\r\n            >\r\n              Show {afternoonCollapseIsOpen ? \"Less\" : \"Times\"}\r\n            </p>\r\n          </div>\r\n          <Collapse isOpen={afternoonCollapseIsOpen}>\r\n            <div className=\"inner_times_wrapper\">\r\n              {afternoonTimesArr.map((item, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"individual_time_wrapper\"\r\n                  onClick={handleTimeClick}\r\n                  onMouseOver={() => {\r\n                    if (!props.currentScreenSize) {\r\n                      if (props.initialScreenSize >= 1200) {\r\n                        changeIndividualItemHovered({\r\n                          arr: \"afternoonTimesArr\",\r\n                          index: i,\r\n                        });\r\n                      }\r\n                    } else {\r\n                      if (props.currentScreenSize >= 1200) {\r\n                        changeIndividualItemHovered({\r\n                          arr: \"afternoonTimesArr\",\r\n                          index: i,\r\n                        });\r\n                      }\r\n                    }\r\n                  }}\r\n                  onMouseOut={() => {\r\n                    if (individualItemHovered !== \"\") {\r\n                      changeIndividualItemHovered(\"\");\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    background: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"rgb(44, 44, 52)\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"#f0f0f0\"\r\n                        : individualItemHovered.arr === \"afternoonTimesArr\" &&\r\n                          individualItemHovered.index === i\r\n                        ? \"rgba(0, 129, 177, 0.4)\"\r\n                        : \"rgb(255, 255, 255)\"\r\n                      : \"rgb(255, 255, 255)\",\r\n                    color: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"rgb(255, 255, 255)\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"rgb(201, 201, 201)\"\r\n                        : \"rgb(0, 0, 0)\"\r\n                      : \"rgb(0, 0, 0)\",\r\n                    border: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"2px solid transparent\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"rgb(201, 201, 201)\"\r\n                        : individualItemHovered.arr === \"afternoonTimesArr\" &&\r\n                          individualItemHovered.index === i\r\n                        ? \"2px solid rgba(0, 129, 177, 0.4)\"\r\n                        : \"2px solid rgb(0, 0, 0)\"\r\n                      : \"2px solid rgb(0, 0, 0)\",\r\n                    pointerEvents: bookedTimes\r\n                      ? bookedTimes.includes(item) ||\r\n                        moment(\r\n                          dayOfTheWeek +\r\n                            \", \" +\r\n                            reformattedDay +\r\n                            \" \" +\r\n                            item +\r\n                            \" \" +\r\n                            (Number(item.split(\":\")[0]) >= 12 ||\r\n                            Number(item.split(\":\")[0]) < 9\r\n                              ? \"PM\"\r\n                              : \"AM\"),\r\n                          \"LLLL\"\r\n                        )\r\n                          .utc()\r\n                          .subtract(12, \"hours\")\r\n                          .valueOf() <=\r\n                          moment()\r\n                            .utc()\r\n                            .valueOf()\r\n                        ? \"none\"\r\n                        : \"auto\"\r\n                      : \"auto\",\r\n                  }}\r\n                >\r\n                  <p>{item}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </Collapse>\r\n        </div>\r\n        <div className=\"time_of_day_card_container\">\r\n          <div className=\"time_of_day_card_top_wrapping\">\r\n            <div className=\"time_of_day_heading\">\r\n              <p>Late Afternoon</p>\r\n            </div>\r\n            <p\r\n              className=\"time_of_day_card_show_more\"\r\n              onClick={handleLateAfternoonCollapse}\r\n            >\r\n              Show {lateAfternoonCollapseIsOpen ? \"Less\" : \"Times\"}\r\n            </p>\r\n          </div>\r\n          <Collapse isOpen={lateAfternoonCollapseIsOpen}>\r\n            <div className=\"inner_times_wrapper\">\r\n              {lateAfternoonTimesArr.map((item, i) => (\r\n                <div\r\n                  key={i}\r\n                  className=\"individual_time_wrapper\"\r\n                  onClick={handleTimeClick}\r\n                  onMouseOver={() => {\r\n                    if (!props.currentScreenSize) {\r\n                      if (props.initialScreenSize >= 1200) {\r\n                        changeIndividualItemHovered({\r\n                          arr: \"lateAfternoonTimesArr\",\r\n                          index: i,\r\n                        });\r\n                      }\r\n                    } else {\r\n                      if (props.currentScreenSize >= 1200) {\r\n                        changeIndividualItemHovered({\r\n                          arr: \"lateAfternoonTimesArr\",\r\n                          index: i,\r\n                        });\r\n                      }\r\n                    }\r\n                  }}\r\n                  onMouseOut={() => {\r\n                    if (individualItemHovered !== \"\") {\r\n                      changeIndividualItemHovered(\"\");\r\n                    }\r\n                  }}\r\n                  style={{\r\n                    opacity:\r\n                      dayOfTheWeek === \"Friday\"\r\n                        ? parseInt(item[0], 10) > 3\r\n                          ? 0\r\n                          : 1\r\n                        : 1,\r\n                    pointerEvents: bookedTimes\r\n                      ? dayOfTheWeek === \"Friday\"\r\n                        ? parseInt(item[0], 10) > 3\r\n                          ? \"none\"\r\n                          : bookedTimes.includes(item) ||\r\n                            moment(\r\n                              dayOfTheWeek +\r\n                                \", \" +\r\n                                reformattedDay +\r\n                                \" \" +\r\n                                item +\r\n                                \" \" +\r\n                                (Number(item.split(\":\")[0]) >= 12 ||\r\n                                Number(item.split(\":\")[0]) < 9\r\n                                  ? \"PM\"\r\n                                  : \"AM\"),\r\n                              \"LLLL\"\r\n                            )\r\n                              .utc()\r\n                              .subtract(12, \"hours\")\r\n                              .valueOf() <=\r\n                              moment()\r\n                                .utc()\r\n                                .valueOf()\r\n                          ? \"none\"\r\n                          : \"auto\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"none\"\r\n                        : \"auto\"\r\n                      : \"auto\",\r\n                    background: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"rgb(44, 44, 52)\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"#f0f0f0\"\r\n                        : individualItemHovered.arr ===\r\n                            \"lateAfternoonTimesArr\" &&\r\n                          individualItemHovered.index === i\r\n                        ? \"rgba(0, 129, 177, 0.4)\"\r\n                        : \"rgb(255, 255, 255)\"\r\n                      : \"rgb(255, 255, 255)\",\r\n                    color: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"rgb(255, 255, 255)\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"rgb(201, 201, 201)\"\r\n                        : \"rgb(0, 0, 0)\"\r\n                      : \"rgb(0, 0, 0)\",\r\n                    border: bookedTimes\r\n                      ? item === selectedTime\r\n                        ? \"2px solid transparent\"\r\n                        : bookedTimes.includes(item) ||\r\n                          moment(\r\n                            dayOfTheWeek +\r\n                              \", \" +\r\n                              reformattedDay +\r\n                              \" \" +\r\n                              item +\r\n                              \" \" +\r\n                              (Number(item.split(\":\")[0]) >= 12 ||\r\n                              Number(item.split(\":\")[0]) < 9\r\n                                ? \"PM\"\r\n                                : \"AM\"),\r\n                            \"LLLL\"\r\n                          )\r\n                            .utc()\r\n                            .subtract(12, \"hours\")\r\n                            .valueOf() <=\r\n                            moment()\r\n                              .utc()\r\n                              .valueOf()\r\n                        ? \"rgb(201, 201, 201)\"\r\n                        : individualItemHovered.arr ===\r\n                            \"lateAfternoonTimesArr\" &&\r\n                          individualItemHovered.index === i\r\n                        ? \"2px solid rgba(0, 129, 177, 0.4)\"\r\n                        : \"2px solid rgb(0, 0, 0)\"\r\n                      : \"2px solid rgb(0, 0, 0)\",\r\n                  }}\r\n                >\r\n                  <p>{item}</p>\r\n                </div>\r\n              ))}\r\n            </div>\r\n          </Collapse>\r\n        </div>\r\n        {dayOfTheWeek === \"Friday\" ? null : (\r\n          <div className=\"time_of_day_card_container\">\r\n            <div className=\"time_of_day_card_top_wrapping\">\r\n              <div className=\"time_of_day_heading\">\r\n                <p>Evening</p>\r\n              </div>\r\n              <p\r\n                className=\"time_of_day_card_show_more\"\r\n                onClick={handleEveningCollapse}\r\n              >\r\n                Show {eveningCollapseIsOpen ? \"Less\" : \"Times\"}\r\n              </p>\r\n            </div>\r\n            <Collapse isOpen={eveningCollapseIsOpen}>\r\n              <div className=\"inner_times_wrapper\">\r\n                {eveningTimesArr.map((item, i) => (\r\n                  <div\r\n                    key={i}\r\n                    className=\"individual_time_wrapper\"\r\n                    onClick={handleTimeClick}\r\n                    onMouseOver={() => {\r\n                      if (!props.currentScreenSize) {\r\n                        if (props.initialScreenSize >= 1200) {\r\n                          changeIndividualItemHovered({\r\n                            arr: \"eveningTimesArr\",\r\n                            index: i,\r\n                          });\r\n                        }\r\n                      } else {\r\n                        if (props.currentScreenSize >= 1200) {\r\n                          changeIndividualItemHovered({\r\n                            arr: \"eveningTimesArr\",\r\n                            index: i,\r\n                          });\r\n                        }\r\n                      }\r\n                    }}\r\n                    onMouseOut={() => {\r\n                      if (individualItemHovered !== \"\") {\r\n                        changeIndividualItemHovered(\"\");\r\n                      }\r\n                    }}\r\n                    style={{\r\n                      opacity:\r\n                        dayOfTheWeek === \"Sunday\"\r\n                          ? parseInt(item[0], 10) > 5\r\n                            ? 0\r\n                            : 1\r\n                          : 1,\r\n                      pointerEvents: bookedTimes\r\n                        ? dayOfTheWeek === \"Sunday\"\r\n                          ? parseInt(item[0], 10) > 5\r\n                            ? \"none\"\r\n                            : bookedTimes.includes(item) ||\r\n                              moment(\r\n                                dayOfTheWeek +\r\n                                  \", \" +\r\n                                  reformattedDay +\r\n                                  \" \" +\r\n                                  item +\r\n                                  \" \" +\r\n                                  (Number(item.split(\":\")[0]) >= 12 ||\r\n                                  Number(item.split(\":\")[0]) < 9\r\n                                    ? \"PM\"\r\n                                    : \"AM\"),\r\n                                \"LLLL\"\r\n                              )\r\n                                .utc()\r\n                                .subtract(12, \"hours\")\r\n                                .valueOf() <=\r\n                                moment()\r\n                                  .utc()\r\n                                  .valueOf()\r\n                            ? \"none\"\r\n                            : \"auto\"\r\n                          : bookedTimes.includes(item) ||\r\n                            moment(\r\n                              dayOfTheWeek +\r\n                                \", \" +\r\n                                reformattedDay +\r\n                                \" \" +\r\n                                item +\r\n                                \" \" +\r\n                                (Number(item.split(\":\")[0]) >= 12 ||\r\n                                Number(item.split(\":\")[0]) < 9\r\n                                  ? \"PM\"\r\n                                  : \"AM\"),\r\n                              \"LLLL\"\r\n                            )\r\n                              .utc()\r\n                              .subtract(12, \"hours\")\r\n                              .valueOf() <=\r\n                              moment()\r\n                                .utc()\r\n                                .valueOf()\r\n                          ? \"none\"\r\n                          : \"auto\"\r\n                        : \"auto\",\r\n                      background: bookedTimes\r\n                        ? item === selectedTime\r\n                          ? \"rgb(44, 44, 52)\"\r\n                          : bookedTimes.includes(item) ||\r\n                            moment(\r\n                              dayOfTheWeek +\r\n                                \", \" +\r\n                                reformattedDay +\r\n                                \" \" +\r\n                                item +\r\n                                \" \" +\r\n                                (Number(item.split(\":\")[0]) >= 12 ||\r\n                                Number(item.split(\":\")[0]) < 9\r\n                                  ? \"PM\"\r\n                                  : \"AM\"),\r\n                              \"LLLL\"\r\n                            )\r\n                              .utc()\r\n                              .subtract(12, \"hours\")\r\n                              .valueOf() <=\r\n                              moment()\r\n                                .utc()\r\n                                .valueOf()\r\n                          ? \"#f0f0f0\"\r\n                          : individualItemHovered.arr === \"eveningTimesArr\" &&\r\n                            individualItemHovered.index === i\r\n                          ? \"rgba(0, 129, 177, 0.4)\"\r\n                          : \"rgb(255, 255, 255)\"\r\n                        : \"rgb(255, 255, 255)\",\r\n                      color: bookedTimes\r\n                        ? item === selectedTime\r\n                          ? \"rgb(255, 255, 255)\"\r\n                          : bookedTimes.includes(item) ||\r\n                            moment(\r\n                              dayOfTheWeek +\r\n                                \", \" +\r\n                                reformattedDay +\r\n                                \" \" +\r\n                                item +\r\n                                \" \" +\r\n                                (Number(item.split(\":\")[0]) >= 12 ||\r\n                                Number(item.split(\":\")[0]) < 9\r\n                                  ? \"PM\"\r\n                                  : \"AM\"),\r\n                              \"LLLL\"\r\n                            )\r\n                              .utc()\r\n                              .subtract(12, \"hours\")\r\n                              .valueOf() <=\r\n                              moment()\r\n                                .utc()\r\n                                .valueOf()\r\n                          ? \"rgb(201, 201, 201)\"\r\n                          : \"rgb(0, 0, 0)\"\r\n                        : \"rgb(0, 0, 0)\",\r\n                      border: bookedTimes\r\n                        ? item === selectedTime\r\n                          ? \"2px solid transparent\"\r\n                          : bookedTimes.includes(item) ||\r\n                            moment(\r\n                              dayOfTheWeek +\r\n                                \", \" +\r\n                                reformattedDay +\r\n                                \" \" +\r\n                                item +\r\n                                \" \" +\r\n                                (Number(item.split(\":\")[0]) >= 12 ||\r\n                                Number(item.split(\":\")[0]) < 9\r\n                                  ? \"PM\"\r\n                                  : \"AM\"),\r\n                              \"LLLL\"\r\n                            )\r\n                              .utc()\r\n                              .subtract(12, \"hours\")\r\n                              .valueOf() <=\r\n                              moment()\r\n                                .utc()\r\n                                .valueOf()\r\n                          ? \"rgb(201, 201, 201)\"\r\n                          : individualItemHovered.arr === \"eveningTimesArr\" &&\r\n                            individualItemHovered.index === i\r\n                          ? \"2px solid rgba(0, 129, 177, 0.4)\"\r\n                          : \"2px solid rgb(0, 0, 0)\"\r\n                        : \"2px solid rgb(0, 0, 0)\",\r\n                    }}\r\n                  >\r\n                    <p>{item}</p>\r\n                  </div>\r\n                ))}\r\n              </div>\r\n            </Collapse>\r\n          </div>\r\n        )}\r\n        <div\r\n          className=\"time_preference_bottom_buttons_container\"\r\n          style={{\r\n            paddingTop: \"5vh\",\r\n            marginTop:\r\n              dayOfTheWeek === \"Sunday\"\r\n                ? eveningCollapseIsOpen\r\n                  ? \"-10vh\"\r\n                  : \"0vh\"\r\n                : dayOfTheWeek === \"Friday\"\r\n                ? lateAfternoonCollapseIsOpen\r\n                  ? \"-10vh\"\r\n                  : \"0vh\"\r\n                : eveningCollapseIsOpen\r\n                ? \"-4vh\"\r\n                : \"0vh\",\r\n            transition: \"margin-top 0.4s ease, padding-top 0.4s ease\",\r\n          }}\r\n        >\r\n          <Link\r\n            to={() => {\r\n              if (!props.currentScreenSize) {\r\n                if (props.initialScreenSize >= 1200) {\r\n                  return \"/\";\r\n                } else {\r\n                  if (userAuthenticated) {\r\n                    return \"/paymentinfo\";\r\n                  } else {\r\n                    return \"/checkout\";\r\n                  }\r\n                }\r\n              } else {\r\n                if (props.currentScreenSize >= 1200) {\r\n                  return \"/\";\r\n                } else {\r\n                  if (userAuthenticated) {\r\n                    return \"/paymentinfo\";\r\n                  } else {\r\n                    return \"/checkout\";\r\n                  }\r\n                }\r\n              }\r\n            }}\r\n            style={{\r\n              display: \"block\",\r\n              pointerEvents: selectedTime !== \"\" ? \"auto\" : \"none\",\r\n            }}\r\n            onClick={handleContinueCheckoutButtonClick}\r\n          >\r\n            <div\r\n              className=\"time_preference_continue_button\"\r\n              style={{\r\n                background: selectedTime ? \"rgb(44, 44, 52)\" : \"#f0f0f0\",\r\n                color: selectedTime\r\n                  ? \"rgb(255, 255, 255)\"\r\n                  : \"rgb(201, 201, 201)\",\r\n                transition: \"background 0.5s ease, color 0.5s ease\",\r\n              }}\r\n              onClick={() => {\r\n                if (userAuthenticated) {\r\n                  dispatch(ACTION_PAYMENT_INFO_PAGE_OPENED());\r\n                } else {\r\n                  dispatch(ACTION_GUEST_CHECKOUT_FORM_PAGE_OPENED());\r\n                }\r\n              }}\r\n            >\r\n              <p>Continue Checkout</p>\r\n            </div>\r\n          </Link>\r\n          <Link\r\n            to={() => {\r\n              if (!props.currentScreenSize) {\r\n                if (props.initialScreenSize >= 1200) {\r\n                  return \"/\";\r\n                } else {\r\n                  return \"/availability\";\r\n                }\r\n              } else {\r\n                if (props.currentScreenSize >= 1200) {\r\n                  return \"/\";\r\n                } else {\r\n                  return \"/availability\";\r\n                }\r\n              }\r\n            }}\r\n          >\r\n            <div\r\n              className=\"change_date_button\"\r\n              onClick={() => dispatch(ACTION_AVAILABILITY_PAGE_OPENED())}\r\n            >\r\n              <p>Change Date</p>\r\n            </div>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default TimePreference;\r\n"]},"metadata":{},"sourceType":"module"}