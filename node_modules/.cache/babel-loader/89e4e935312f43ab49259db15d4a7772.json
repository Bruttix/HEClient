{"ast":null,"code":"import _taggedTemplateLiteral from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";function _templateObject(){const data=_taggedTemplateLiteral([\"\\n    display: block;\\n    position: absolute;\\n    left: 25%;\\n    right: 25%;\\n  \"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useCallback,useEffect,useRef,useState}from\"react\";import LZString from\"lz-string\";import moment from\"moment\";import{useLocation,Redirect,Link}from\"react-router-dom\";import{useDispatch,useSelector}from\"react-redux\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faChevronLeft,faFileDownload,faUserCircle}from\"@fortawesome/free-solid-svg-icons\";import{css}from\"@emotion/css\";import ClipLoader from\"react-spinners/ClipLoader\";import{PDFDownloadLink}from\"@react-pdf/renderer\";import ConsentFormPDF from\"../ConsentForm/ConsentFormPDF\";import CanvasDraw from\"react-canvas-draw\";import ACTION_PDF_LOADING from\"../../../../actions/PDFLoading/ACTION_PDF_LOADING\";import ACTION_PDF_LOADING_RESET from\"../../../../actions/PDFLoading/ACTION_PDF_LOADING_RESET\";import\"./MyProfile.css\";const MyProfile=props=>{const location=useLocation();const dispatch=useDispatch();const splashScreenComplete=useSelector(state=>state.splashScreenComplete.splashScreenComplete);const userAuthenticated=useSelector(state=>state.userAuthenticated.user_authenticated);const logoutClicked=useSelector(state=>state.logoutClicked.log_out_clicked);const pdfLoading=useSelector(state=>state.pdfLoading.pdf_loading);const adminAuthenticated=useSelector(state=>state.adminAuthenticated.admin_authenticated);const _useState=useState(false),_useState2=_slicedToArray(_useState,2),pdfSpinnerActive=_useState2[0],changePDFSpinnerActive=_useState2[1];const signature=useRef(null);const pdfDownloadRef=useRef(null);const override=css(_templateObject());const redirectToHome=()=>{if(!splashScreenComplete){return/*#__PURE__*/React.createElement(Redirect,{to:\"/\"});}};const redirectToLogInPage=()=>{if(!userAuthenticated){return/*#__PURE__*/React.createElement(Redirect,{to:\"/account/login\"});}};useEffect(()=>{if(location.pathname){window.scrollTo(0,0);}},[location.pathname]);useEffect(()=>{return()=>{if(pdfLoading){dispatch(ACTION_PDF_LOADING_RESET());}};},[pdfLoading,dispatch]);const loadingCompleted=useCallback(()=>{changePDFSpinnerActive(true);if(!pdfLoading){dispatch(ACTION_PDF_LOADING());}else{return null;}},[pdfLoading,dispatch]);const handlePDFDownloadClick=useEffect(()=>{if(pdfSpinnerActive){const loadingSpinnerDuration=setTimeout(()=>{changePDFSpinnerActive(false);if(pdfDownloadRef){if(pdfDownloadRef.current){pdfDownloadRef.current.click();}}dispatch(ACTION_PDF_LOADING_RESET());},3000);return()=>{clearTimeout(loadingSpinnerDuration);};}},[pdfSpinnerActive,dispatch]);const consentFormOnFile=item=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"profile_button_container\",onClick:loadingCompleted},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_button_icon\",icon:faFileDownload,style:{color:\"rgba(0, 129, 177, 0.9)\"}}),/*#__PURE__*/React.createElement(\"h2\",{style:{color:\"rgba(0, 129, 177, 0.9)\"}},\"Download Latest Consent Form\"),/*#__PURE__*/React.createElement(\"p\",{style:{display:pdfLoading?\"none\":\"block\"}},\"(\"+moment.unix(item.consentForm.createdAt/1000).format(\"l\")+\")\"));};const noConsentFormOnFile=()=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"profile_button_container\",onClick:loadingCompleted},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_button_icon\",icon:faFileDownload,style:{color:\"rgba(177, 48, 0, 0.9)\"}}),/*#__PURE__*/React.createElement(\"h2\",{style:{color:\"rgba(177, 48, 0, 0.9)\"}},\"No Consent Form on File\"));};const renderDownloadConsentFormButton=()=>{if(props.getClientData){if(props.getClientData.client){if(props.getClientData.client.consentForm){if(props.getClientData.client.consentForm.date){return/*#__PURE__*/React.createElement(React.Fragment,null,pdfLoading?/*#__PURE__*/React.createElement(PDFDownloadLink,{document:props.getClientData?/*#__PURE__*/React.createElement(ConsentFormPDF,{getClientData:{client:props.getClientData.client},signature:signature?signature.current?signature.current.canvasContainer.children[1].toDataURL():null:null,consentFormLastUpdated:moment.unix(props.getClientData.client.consentForm.createdAt/1000).format(\"l\"),onClick:handlePDFDownloadClick}):null,fileName:props.getClientData.client.firstName[0].toUpperCase()+props.getClientData.client.firstName.slice(1).toLowerCase()+\"_\"+props.getClientData.client.lastName[0].toUpperCase()+props.getClientData.client.lastName.slice(1).toLowerCase()+\"_\"+\"Glow_Labs_Consent_Form.pdf\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile_button_container\",style:{display:\"flex\",alignItems:\"center\",justifyContent:\"center\",padding:\"1rem\"},ref:pdfDownloadRef},/*#__PURE__*/React.createElement(ClipLoader,{size:32,css:override,color:\"rgb(44, 44, 52)\",loading:pdfLoading}))):consentFormOnFile(props.getClientData.client));}else{if(!adminAuthenticated){return noConsentFormOnFile();}}}else{if(!adminAuthenticated){return noConsentFormOnFile();}}}else{if(!adminAuthenticated){return noConsentFormOnFile();}}}else{if(!adminAuthenticated){return noConsentFormOnFile();}}};return/*#__PURE__*/React.createElement(\"div\",{className:\"my_profile_container\",style:{zIndex:logoutClicked?-1:\"auto\"}},redirectToHome(),redirectToLogInPage(),/*#__PURE__*/React.createElement(CanvasDraw,{className:\"consent_form_signature\",saveData:props.getClientData?props.getClientData.client?props.getClientData.client.consentForm.consentFormSignature?LZString.decompressFromEncodedURIComponent(props.getClientData.client.consentForm.consentFormSignature)?LZString.decompressFromEncodedURIComponent(props.getClientData.client.consentForm.consentFormSignature).toString():\"\":\"\":\"\":\"\",hideGrid:true,hideInterface:true,disabled:true,canvasHeight:\"100%\",canvasWidth:\"100%\",immediateLoading:true,ref:signature?signature:null,style:{display:\"none\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"my_profile_header\",style:{zIndex:logoutClicked?0:3}},/*#__PURE__*/React.createElement(Link,{to:\"/account/clientprofile\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"my_profile_back_arrow\",icon:faChevronLeft})),/*#__PURE__*/React.createElement(\"h1\",null,\"MY PROFILE\")),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_top_section\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile_client_avatar_container\"},props.getClientData?props.getClientData.client?props.getClientData.client.profilePicture?/*#__PURE__*/React.createElement(\"img\",{className:\"profile_client_image_profile\",src:LZString.decompressFromEncodedURIComponent(props.getClientData.client.profilePicture),alt:props.getClientData.client.firstName[0].toUpperCase()+props.getClientData.client.firstName.slice(1).toLowerCase()+\" \"+props.getClientData.client.lastName[0].toUpperCase()+props.getClientData.client.lastName.slice(1).toLowerCase()+\" Profile Picture\"}):/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_client_avatar\",icon:faUserCircle}):/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_client_avatar\",icon:faUserCircle}):/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_client_avatar\",icon:faUserCircle})),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_contact_information_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile_name_container\"},/*#__PURE__*/React.createElement(\"p\",null,\"Name\"),/*#__PURE__*/React.createElement(\"p\",null,props.getClientData?props.getClientData.client.firstName:null,\" \",props.getClientData?props.getClientData.client.lastName:null)),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_email_container\"},/*#__PURE__*/React.createElement(\"p\",null,\"Email\"),/*#__PURE__*/React.createElement(\"p\",null,props.getClientData?props.getClientData.client.email:null)),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_phone_number_container\"},/*#__PURE__*/React.createElement(\"p\",null,\"Phone Number\"),/*#__PURE__*/React.createElement(\"p\",null,props.getClientData?props.getClientData.client.phoneNumber:null)),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_membership_type_container\"},/*#__PURE__*/React.createElement(\"p\",null,\"Membership Type\"),/*#__PURE__*/React.createElement(\"p\",null,\"Default\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_bottom_buttons_container\"},renderDownloadConsentFormButton()));};export default MyProfile;","map":{"version":3,"sources":["D:/WebProjects/Barbershops/HighEnd/Client/src/components/account/clientprofile/MyProfile/MyProfile.js"],"names":["React","useCallback","useEffect","useRef","useState","LZString","moment","useLocation","Redirect","Link","useDispatch","useSelector","FontAwesomeIcon","faChevronLeft","faFileDownload","faUserCircle","css","ClipLoader","PDFDownloadLink","ConsentFormPDF","CanvasDraw","ACTION_PDF_LOADING","ACTION_PDF_LOADING_RESET","MyProfile","props","location","dispatch","splashScreenComplete","state","userAuthenticated","user_authenticated","logoutClicked","log_out_clicked","pdfLoading","pdf_loading","adminAuthenticated","admin_authenticated","pdfSpinnerActive","changePDFSpinnerActive","signature","pdfDownloadRef","override","redirectToHome","redirectToLogInPage","pathname","window","scrollTo","loadingCompleted","handlePDFDownloadClick","loadingSpinnerDuration","setTimeout","current","click","clearTimeout","consentFormOnFile","item","color","display","unix","consentForm","createdAt","format","noConsentFormOnFile","renderDownloadConsentFormButton","getClientData","client","date","canvasContainer","children","toDataURL","firstName","toUpperCase","slice","toLowerCase","lastName","alignItems","justifyContent","padding","zIndex","consentFormSignature","decompressFromEncodedURIComponent","toString","profilePicture","email","phoneNumber"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from \"react\";\r\nimport LZString from \"lz-string\";\r\nimport moment from \"moment\";\r\nimport { useLocation, Redirect, Link } from \"react-router-dom\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faChevronLeft,\r\n  faFileDownload,\r\n  faUserCircle,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport { css } from \"@emotion/css\";\r\nimport ClipLoader from \"react-spinners/ClipLoader\";\r\nimport { PDFDownloadLink } from \"@react-pdf/renderer\";\r\nimport ConsentFormPDF from \"../ConsentForm/ConsentFormPDF\";\r\nimport CanvasDraw from \"react-canvas-draw\";\r\nimport ACTION_PDF_LOADING from \"../../../../actions/PDFLoading/ACTION_PDF_LOADING\";\r\nimport ACTION_PDF_LOADING_RESET from \"../../../../actions/PDFLoading/ACTION_PDF_LOADING_RESET\";\r\nimport \"./MyProfile.css\";\r\n\r\nconst MyProfile = (props) => {\r\n  const location = useLocation();\r\n  const dispatch = useDispatch();\r\n  const splashScreenComplete = useSelector(\r\n    (state) => state.splashScreenComplete.splashScreenComplete\r\n  );\r\n  const userAuthenticated = useSelector(\r\n    (state) => state.userAuthenticated.user_authenticated\r\n  );\r\n  const logoutClicked = useSelector(\r\n    (state) => state.logoutClicked.log_out_clicked\r\n  );\r\n  const pdfLoading = useSelector((state) => state.pdfLoading.pdf_loading);\r\n  const adminAuthenticated = useSelector(\r\n    (state) => state.adminAuthenticated.admin_authenticated\r\n  );\r\n\r\n  const [pdfSpinnerActive, changePDFSpinnerActive] = useState(false);\r\n\r\n  const signature = useRef(null);\r\n  const pdfDownloadRef = useRef(null);\r\n\r\n  const override = css`\r\n    display: block;\r\n    position: absolute;\r\n    left: 25%;\r\n    right: 25%;\r\n  `;\r\n\r\n  const redirectToHome = () => {\r\n    if (!splashScreenComplete) {\r\n      return <Redirect to=\"/\" />;\r\n    }\r\n  };\r\n\r\n  const redirectToLogInPage = () => {\r\n    if (!userAuthenticated) {\r\n      return <Redirect to=\"/account/login\" />;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (location.pathname) {\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }, [location.pathname]);\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (pdfLoading) {\r\n        dispatch(ACTION_PDF_LOADING_RESET());\r\n      }\r\n    };\r\n  }, [pdfLoading, dispatch]);\r\n\r\n  const loadingCompleted = useCallback(() => {\r\n    changePDFSpinnerActive(true);\r\n    if (!pdfLoading) {\r\n      dispatch(ACTION_PDF_LOADING());\r\n    } else {\r\n      return null;\r\n    }\r\n  }, [pdfLoading, dispatch]);\r\n\r\n  const handlePDFDownloadClick = useEffect(() => {\r\n    if (pdfSpinnerActive) {\r\n      const loadingSpinnerDuration = setTimeout(() => {\r\n        changePDFSpinnerActive(false);\r\n        if (pdfDownloadRef) {\r\n          if (pdfDownloadRef.current) {\r\n            pdfDownloadRef.current.click();\r\n          }\r\n        }\r\n        dispatch(ACTION_PDF_LOADING_RESET());\r\n      }, 3000);\r\n      return () => {\r\n        clearTimeout(loadingSpinnerDuration);\r\n      };\r\n    }\r\n  }, [pdfSpinnerActive, dispatch]);\r\n\r\n  const consentFormOnFile = (item) => {\r\n    return (\r\n      <div className=\"profile_button_container\" onClick={loadingCompleted}>\r\n        <FontAwesomeIcon\r\n          className=\"profile_button_icon\"\r\n          icon={faFileDownload}\r\n          style={{\r\n            color: \"rgba(0, 129, 177, 0.9)\",\r\n          }}\r\n        />\r\n        <h2\r\n          style={{\r\n            color: \"rgba(0, 129, 177, 0.9)\",\r\n          }}\r\n        >\r\n          Download Latest Consent Form\r\n        </h2>\r\n        <p style={{ display: pdfLoading ? \"none\" : \"block\" }}>\r\n          {\"(\" +\r\n            moment.unix(item.consentForm.createdAt / 1000).format(\"l\") +\r\n            \")\"}\r\n        </p>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const noConsentFormOnFile = () => {\r\n    return (\r\n      <div className=\"profile_button_container\" onClick={loadingCompleted}>\r\n        <FontAwesomeIcon\r\n          className=\"profile_button_icon\"\r\n          icon={faFileDownload}\r\n          style={{\r\n            color: \"rgba(177, 48, 0, 0.9)\",\r\n          }}\r\n        />\r\n        <h2\r\n          style={{\r\n            color: \"rgba(177, 48, 0, 0.9)\",\r\n          }}\r\n        >\r\n          No Consent Form on File\r\n        </h2>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderDownloadConsentFormButton = () => {\r\n    if (props.getClientData) {\r\n      if (props.getClientData.client) {\r\n        if (props.getClientData.client.consentForm) {\r\n          if (props.getClientData.client.consentForm.date) {\r\n            return (\r\n              <>\r\n                {pdfLoading ? (\r\n                  <PDFDownloadLink\r\n                    document={\r\n                      props.getClientData ? (\r\n                        <ConsentFormPDF\r\n                          getClientData={{\r\n                            client: props.getClientData.client,\r\n                          }}\r\n                          signature={\r\n                            signature\r\n                              ? signature.current\r\n                                ? signature.current.canvasContainer.children[1].toDataURL()\r\n                                : null\r\n                              : null\r\n                          }\r\n                          consentFormLastUpdated={moment\r\n                            .unix(\r\n                              props.getClientData.client.consentForm.createdAt /\r\n                                1000\r\n                            )\r\n                            .format(\"l\")}\r\n                          onClick={handlePDFDownloadClick}\r\n                        />\r\n                      ) : null\r\n                    }\r\n                    fileName={\r\n                      props.getClientData.client.firstName[0].toUpperCase() +\r\n                      props.getClientData.client.firstName\r\n                        .slice(1)\r\n                        .toLowerCase() +\r\n                      \"_\" +\r\n                      props.getClientData.client.lastName[0].toUpperCase() +\r\n                      props.getClientData.client.lastName\r\n                        .slice(1)\r\n                        .toLowerCase() +\r\n                      \"_\" +\r\n                      \"Glow_Labs_Consent_Form.pdf\"\r\n                    }\r\n                  >\r\n                    <div\r\n                      className=\"profile_button_container\"\r\n                      style={{\r\n                        display: \"flex\",\r\n                        alignItems: \"center\",\r\n                        justifyContent: \"center\",\r\n                        padding: \"1rem\",\r\n                      }}\r\n                      ref={pdfDownloadRef}\r\n                    >\r\n                      <ClipLoader\r\n                        size={32}\r\n                        css={override}\r\n                        color={\"rgb(44, 44, 52)\"}\r\n                        loading={pdfLoading}\r\n                      />\r\n                    </div>\r\n                  </PDFDownloadLink>\r\n                ) : (\r\n                  consentFormOnFile(props.getClientData.client)\r\n                )}\r\n              </>\r\n            );\r\n          } else {\r\n            if (!adminAuthenticated) {\r\n              return noConsentFormOnFile();\r\n            }\r\n          }\r\n        } else {\r\n          if (!adminAuthenticated) {\r\n            return noConsentFormOnFile();\r\n          }\r\n        }\r\n      } else {\r\n        if (!adminAuthenticated) {\r\n          return noConsentFormOnFile();\r\n        }\r\n      }\r\n    } else {\r\n      if (!adminAuthenticated) {\r\n        return noConsentFormOnFile();\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div\r\n      className=\"my_profile_container\"\r\n      style={{ zIndex: logoutClicked ? -1 : \"auto\" }}\r\n    >\r\n      {redirectToHome()}\r\n      {redirectToLogInPage()}\r\n      <CanvasDraw\r\n        className=\"consent_form_signature\"\r\n        saveData={\r\n          props.getClientData\r\n            ? props.getClientData.client\r\n              ? props.getClientData.client.consentForm.consentFormSignature\r\n                ? LZString.decompressFromEncodedURIComponent(\r\n                    props.getClientData.client.consentForm.consentFormSignature\r\n                  )\r\n                  ? LZString.decompressFromEncodedURIComponent(\r\n                      props.getClientData.client.consentForm\r\n                        .consentFormSignature\r\n                    ).toString()\r\n                  : \"\"\r\n                : \"\"\r\n              : \"\"\r\n            : \"\"\r\n        }\r\n        hideGrid={true}\r\n        hideInterface={true}\r\n        disabled\r\n        canvasHeight=\"100%\"\r\n        canvasWidth=\"100%\"\r\n        immediateLoading={true}\r\n        ref={signature ? signature : null}\r\n        style={{ display: \"none\" }}\r\n      />\r\n      <div\r\n        className=\"my_profile_header\"\r\n        style={{ zIndex: logoutClicked ? 0 : 3 }}\r\n      >\r\n        <Link to=\"/account/clientprofile\">\r\n          <FontAwesomeIcon\r\n            className=\"my_profile_back_arrow\"\r\n            icon={faChevronLeft}\r\n          />\r\n        </Link>\r\n        <h1>MY PROFILE</h1>\r\n      </div>\r\n      <div className=\"profile_top_section\">\r\n        <div className=\"profile_client_avatar_container\">\r\n          {props.getClientData ? (\r\n            props.getClientData.client ? (\r\n              props.getClientData.client.profilePicture ? (\r\n                <img\r\n                  className=\"profile_client_image_profile\"\r\n                  src={LZString.decompressFromEncodedURIComponent(\r\n                    props.getClientData.client.profilePicture\r\n                  )}\r\n                  alt={\r\n                    props.getClientData.client.firstName[0].toUpperCase() +\r\n                    props.getClientData.client.firstName\r\n                      .slice(1)\r\n                      .toLowerCase() +\r\n                    \" \" +\r\n                    props.getClientData.client.lastName[0].toUpperCase() +\r\n                    props.getClientData.client.lastName.slice(1).toLowerCase() +\r\n                    \" Profile Picture\"\r\n                  }\r\n                />\r\n              ) : (\r\n                <FontAwesomeIcon\r\n                  className=\"profile_client_avatar\"\r\n                  icon={faUserCircle}\r\n                />\r\n              )\r\n            ) : (\r\n              <FontAwesomeIcon\r\n                className=\"profile_client_avatar\"\r\n                icon={faUserCircle}\r\n              />\r\n            )\r\n          ) : (\r\n            <FontAwesomeIcon\r\n              className=\"profile_client_avatar\"\r\n              icon={faUserCircle}\r\n            />\r\n          )}\r\n        </div>\r\n        <div className=\"profile_contact_information_container\">\r\n          <div className=\"profile_name_container\">\r\n            <p>Name</p>\r\n            <p>\r\n              {props.getClientData\r\n                ? props.getClientData.client.firstName\r\n                : null}{\" \"}\r\n              {props.getClientData ? props.getClientData.client.lastName : null}\r\n            </p>\r\n          </div>\r\n          <div className=\"profile_email_container\">\r\n            <p>Email</p>\r\n            <p>\r\n              {props.getClientData ? props.getClientData.client.email : null}\r\n            </p>\r\n          </div>\r\n          <div className=\"profile_phone_number_container\">\r\n            <p>Phone Number</p>\r\n            <p>\r\n              {props.getClientData\r\n                ? props.getClientData.client.phoneNumber\r\n                : null}\r\n            </p>\r\n          </div>\r\n          <div className=\"profile_membership_type_container\">\r\n            <p>Membership Type</p>\r\n            <p>Default</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"profile_bottom_buttons_container\">\r\n        {renderDownloadConsentFormButton()}\r\n        {/* <Link to=\"/account/clientprofile/profile/routine\">\r\n          <div className=\"profile_button_container\">\r\n            <FontAwesomeIcon className=\"profile_button_icon\" icon={faSpa} />\r\n            <h2>Skin Care Routine</h2>\r\n            <FontAwesomeIcon\r\n              className=\"profile_button_expand\"\r\n              icon={faChevronRight}\r\n            />\r\n          </div>\r\n        </Link>\r\n        <div className=\"profile_button_container\">\r\n          <FontAwesomeIcon className=\"profile_button_icon\" icon={faPencilAlt} />\r\n          <h2>Quizzes</h2>\r\n          <FontAwesomeIcon\r\n            className=\"profile_button_expand\"\r\n            icon={faChevronRight}\r\n          />\r\n        </div>\r\n        <div className=\"profile_button_container\">\r\n          <FontAwesomeIcon className=\"profile_button_icon\" icon={faQuestion} />\r\n          <h2>FAQs</h2>\r\n          <FontAwesomeIcon\r\n            className=\"profile_button_expand\"\r\n            icon={faChevronRight}\r\n          />\r\n        </div>\r\n        <div className=\"profile_button_container\">\r\n          <FontAwesomeIcon className=\"profile_button_icon\" icon={faCamera} />\r\n          <h2>Before / After Photos</h2>\r\n          <FontAwesomeIcon\r\n            className=\"profile_button_expand\"\r\n            icon={faChevronRight}\r\n          />\r\n        </div> */}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default MyProfile;\r\n"]},"metadata":{},"sourceType":"module"}