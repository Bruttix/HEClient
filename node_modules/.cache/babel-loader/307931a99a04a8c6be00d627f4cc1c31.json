{"ast":null,"code":"import _objectSpread from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _taggedTemplateLiteral from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/taggedTemplateLiteral\";import _slicedToArray from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";function _templateObject(){const data=_taggedTemplateLiteral([\"\\n    display: block;\\n    position: absolute;\\n    left: 25%;\\n    right: 25%;\\n  \"]);_templateObject=function _templateObject(){return data;};return data;}import React,{useEffect,useState,useMemo,useRef,useCallback}from\"react\";import{useSelector,useDispatch}from\"react-redux\";import{Redirect,Link,useLocation}from\"react-router-dom\";import{FormGroup,Input}from\"reactstrap\";import Modal from\"react-modal\";import{Transition}from\"react-spring/renderprops\";import imageCompression from\"browser-image-compression\";import ImageUploader from\"react-images-upload\";import Camera,{IMAGE_TYPES}from\"react-html5-camera-photo\";import{useMutation,useLazyQuery}from\"@apollo/react-hooks\";import getOwnPastAppointmentsQuery from\"../../../graphql/queries/getOwnPastAppointmentsQuery\";import getOwnAppointmentsQuery from\"../../../graphql/queries/getOwnAppointmentsQuery\";import updateClientProfilePictureMutation from\"../../../graphql/mutations/updateClientProfilePictureMutation\";import moment from\"moment\";import LZString from\"lz-string\";import{css}from\"@emotion/css\";import BounceLoader from\"react-spinners/BounceLoader\";import CanvasDraw from\"react-canvas-draw\";import{PDFDownloadLink}from\"@react-pdf/renderer\";import ConsentFormPDF from\"../../account/clientprofile/ConsentForm/ConsentFormPDF\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faChevronLeft,faSearch,faEllipsisH,faLongArrowAltLeft,faTimes,faFilePdf,faFileDownload}from\"@fortawesome/free-solid-svg-icons\";import AdminClientIndividualProfile from\"./AdminClientIndividualProfile\";import AdminRenderUpcomingAppointments from\"./AdminRenderUpcomingAppointments\";import AdminRenderPastAppointments from\"./AdminRenderPastAppointments\";import ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET from\"../../../actions/Admin/AddProfilePhotoClicked/ACTION_ADD_PROFILE_CLICKED_RESET\";import ACTION_LOADING_SPINNER_RESET from\"../../../actions/LoadingSpinner/ACTION_LOADING_SPINNER_RESET\";import ACTION_LOADING_SPINNER_ACTIVE from\"../../../actions/LoadingSpinner/ACTION_LOADING_SPINNER_ACTIVE\";import ACTION_IMAGE_LOADING from\"../../../actions/Admin/ImageLoading/ACTION_IMAGE_LOADING\";import ACTION_IMAGE_LOADING_RESET from\"../../../actions/Admin/ImageLoading/ACTION_IMAGE_LOADING_RESET\";import ACTION_SPLASH_SCREEN_COMPLETE from\"../../../actions/SplashScreenComplete/ACTION_SPLASH_SCREEN_COMPLETE\";import ACTION_SPLASH_SCREEN_HALFWAY from\"../../../actions/SplashScreenHalfway/ACTION_SPLASH_SCREEN_HALFWAY\";import ACTION_LOGIN_IS_NOT_ACTIVE from\"../../../actions/Login/ACTION_LOGIN_IS_NOT_ACTIVE\";import ACTION_ADMIN_CLIENT_PROFILE_SELECTED from\"../../../actions/Admin/AdminLogin/AdminClientSectionSelected/ACTION_ADMIN_CLIENT_PROFILE_SELECTED.js\";import ACTION_ON_ACTIVITY_PAGE_RESET from\"../../../actions/Admin/OnActivityPage/ACTION_ON_ACTIVITY_PAGE_RESET\";import\"react-html5-camera-photo/build/css/index.css\";import\"./AdminClients.css\";const AdminClients=props=>{const dispatch=useDispatch();const location=useLocation();const getClientsData=props.getClientsData,getEmployeeError=props.getEmployeeError,getEmployeesError=props.getEmployeesError,employeeDataRefetch=props.employeeDataRefetch,getEmployeesRefetch=props.getEmployeesRefetch,getClientsLoading=props.getClientsLoading,initialScreenSize=props.initialScreenSize,currentScreenSize=props.currentScreenSize,resetNotifications=props.resetNotifications,getClientsRefetch=props.getClientsRefetch,getEmployeeData=props.getEmployeeData,randomColorArray=props.randomColorArray;let signature=useRef(null);let pdfDownloadRef=useRef(null);const selectedClientBackRef=useRef(null);const backToClientsRef=useRef(null);let individualClientRef=useRef(null);const splashScreenHalfway=useSelector(state=>state.splashScreenHalfway.splashScreenHalfway);const splashScreenComplete=useSelector(state=>state.splashScreenComplete.splashScreenComplete);const adminAuthenticated=useSelector(state=>state.adminAuthenticated.admin_authenticated);const logoutClicked=useSelector(state=>state.logoutClicked.log_out_clicked);const loginIsActive=useSelector(state=>state.loginIsActive.login_is_active);const adminClientSectionSelected=useSelector(state=>state.adminClientSectionSelected.admin_client_section_selected);const addProfilePhotoClicked=useSelector(state=>state.addProfilePhotoClicked.add_profile_photo_clicked);const loadingSpinnerActive=useSelector(state=>state.loadingSpinnerActive.loading_spinner);const imageLoading=useSelector(state=>state.imageLoading.image_loading);const cancelAppointmentClicked=useSelector(state=>state.cancelAppointmentClicked.cancelAppointmentClicked);const onActivityPage=useSelector(state=>state.onActivityPage.on_activity_page);const _useState=useState([]),_useState2=_slicedToArray(_useState,2),filteredAllClients=_useState2[0],changeFilteredAllClients=_useState2[1];const _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),clientFilter=_useState4[0],changeClientFilter=_useState4[1];const _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),clientToggled=_useState6[0],changeClientToggled=_useState6[1];const _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),takeAPhotoSelected=_useState8[0],changeTakeAPhotoSelected=_useState8[1];const _useState9=useState(\"\"),_useState10=_slicedToArray(_useState9,2),webcamURI=_useState10[0],changeWebcamURI=_useState10[1];const _useState11=useState(\"\"),_useState12=_slicedToArray(_useState11,2),imageUploaded=_useState12[0],changeImageUploaded=_useState12[1];const _useState13=useState(false),_useState14=_slicedToArray(_useState13,2),imagePreviewAvailable=_useState14[0],changeImagePreviewAvailable=_useState14[1];const _useState15=useState(false),_useState16=_slicedToArray(_useState15,2),pdfLoading=_useState16[0],changePDFLoading=_useState16[1];const _useMutation=useMutation(updateClientProfilePictureMutation),_useMutation2=_slicedToArray(_useMutation,2),updateClientProfilePicture=_useMutation2[0],updateClientProfilePictureData=_useMutation2[1].data;const override=css(_templateObject());const _useLazyQuery=useLazyQuery(getOwnAppointmentsQuery,{fetchPolicy:\"no-cache\"}),_useLazyQuery2=_slicedToArray(_useLazyQuery,2),getOwnAppointments=_useLazyQuery2[0],_useLazyQuery2$=_useLazyQuery2[1],getOwnAppointmentsData=_useLazyQuery2$.data,getOwnAppointmentsRefetch=_useLazyQuery2$.refetch;const _useLazyQuery3=useLazyQuery(getOwnPastAppointmentsQuery,{fetchPolicy:\"no-cache\"}),_useLazyQuery4=_slicedToArray(_useLazyQuery3,2),getOwnPastAppointments=_useLazyQuery4[0],getOwnPastAppointmentsData=_useLazyQuery4[1].data;useEffect(()=>{if(!splashScreenComplete){dispatch(ACTION_SPLASH_SCREEN_COMPLETE());}if(!splashScreenHalfway){dispatch(ACTION_SPLASH_SCREEN_HALFWAY());}},[dispatch,splashScreenComplete,splashScreenHalfway]);const redirectToAdminLogInPage=()=>{if(!adminAuthenticated){return/*#__PURE__*/React.createElement(Redirect,{to:\"/admin\"});}};useEffect(()=>{return()=>{if(pdfLoading){changePDFLoading(false);}};},[pdfLoading]);const handleChangeClientFilter=e=>{changeClientFilter(e.currentTarget.value);};const handleDeletedPreviewImage=()=>{const deleteImageClass=document.getElementsByClassName(\"deleteImage\");const uploadPictureClass=document.getElementsByClassName(\"uploadPicture\");if(deleteImageClass){if(deleteImageClass[0]){deleteImageClass[0].style.display=\"none\";}}if(uploadPictureClass){if(uploadPictureClass[0]){uploadPictureClass[0].style.display=\"none\";}}};const handleImageUploaded=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(picture){var reader,compressedImage;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:dispatch(ACTION_IMAGE_LOADING());if(!(picture[0]||typeof picture===\"string\")){_context3.next=24;break;}reader=new FileReader();changeImagePreviewAvailable(true);_context3.prev=4;if(!(typeof picture===\"object\")){_context3.next=11;break;}_context3.next=8;return imageCompression(picture[0],{maxSizeMB:0.3,maxWidthOrHeight:300});case 8:compressedImage=_context3.sent;_context3.next=14;break;case 11:if(!(typeof picture===\"string\")){_context3.next=14;break;}_context3.next=14;return fetch(picture).then(res=>{return res.blob();}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(blob){return _regeneratorRuntime.wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return imageCompression(blob,{maxSizeMB:0.3,maxWidthOrHeight:300});case 2:compressedImage=_context.sent;case 3:case\"end\":return _context.stop();}},_callee);}));return function(_x2){return _ref2.apply(this,arguments);};}());case 14:reader.readAsDataURL(compressedImage);reader.onloadend=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var base64data,compressedBase64data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:base64data=reader.result;compressedBase64data=LZString.compressToEncodedURIComponent(base64data);dispatch(ACTION_IMAGE_LOADING_RESET());changeImageUploaded(compressedBase64data);case 4:case\"end\":return _context2.stop();}},_callee2);}));_context3.next=22;break;case 18:_context3.prev=18;_context3.t0=_context3[\"catch\"](4);dispatch(ACTION_IMAGE_LOADING_RESET());console.log(_context3.t0);case 22:_context3.next=28;break;case 24:dispatch(ACTION_IMAGE_LOADING_RESET());changeImageUploaded(\"\");changeImagePreviewAvailable(false);handleDeletedPreviewImage();case 28:case\"end\":return _context3.stop();}},_callee3,null,[[4,18]]);}));return function handleImageUploaded(_x){return _ref.apply(this,arguments);};}();const preventKeys=e=>{if(e.key===\")\"||e.key===\"(\"||e.key===\"[\"||e.key===\"]\"||e.key===\"\\\\\"||e.key===\"/\"){e.preventDefault();}};useMemo(()=>{if(getClientsData){if(getClientsData.clients.length>0){if(changeClientFilter){changeFilteredAllClients([...getClientsData.clients].filter(x=>{return new RegExp(clientFilter,\"gi\").test(x.firstName+\" \"+x.lastName)||new RegExp(clientFilter,\"gi\").test(x.email)||new RegExp(clientFilter,\"gi\").test(x.phoneNumber)||new RegExp(clientFilter,\"gi\").test(x.phoneNumber.split(/[\\W_]+/g).join(\"\"));}));}}}},[clientFilter,getClientsData]);useMemo(()=>{if(clientToggled){const clientEmail=[...getClientsData.clients].filter(x=>x._id===clientToggled)[0].email;getOwnAppointments({variables:{_id:clientToggled,email:clientEmail}});getOwnPastAppointments({variables:{_id:clientToggled,email:clientEmail}});}},[clientToggled,getOwnAppointments,getOwnPastAppointments,getClientsData]);// Allows click only if selected client modal is not active\nconst handleClientToggled=(e,item)=>{if(e.currentTarget&&individualClientRef){if(individualClientRef.current){if(individualClientRef.current.className===e.currentTarget.className){if(selectedClientBackRef){if(!selectedClientBackRef.current){if(item){if(item._id){changeClientToggled(item._id);}}}}}}else{if(e.currentTarget.innerText.includes(item.email)&&e.currentTarget.innerText.includes(item.firstName[0].toUpperCase()+item.firstName.slice(1).toLowerCase())&&e.currentTarget.innerText.includes(item.lastName[0].toUpperCase()+item.lastName.slice(1).toLowerCase())){if(selectedClientBackRef){if(!selectedClientBackRef.current){if(item){if(item._id){changeClientToggled(item._id);}}}}}}}};// Function for back arrow click to reset selected toggled client\nconst handleClientUntoggled=e=>{if(e.currentTarget&&selectedClientBackRef||e.currentTarget&&backToClientsRef){if(selectedClientBackRef.current||backToClientsRef.current){if(selectedClientBackRef.current.className===e.currentTarget.className||backToClientsRef.current.className===e.currentTarget.className){changeClientToggled(\"\");if(pdfLoading){changePDFLoading(false);}}}}};useEffect(()=>{if(onActivityPage){resetNotifications();dispatch(ACTION_ON_ACTIVITY_PAGE_RESET());}},[onActivityPage,dispatch,resetNotifications]);useEffect(()=>{if(location.pathname||addProfilePhotoClicked||loadingSpinnerActive){window.scrollTo(0,0);}},[location.pathname,addProfilePhotoClicked,loadingSpinnerActive]);// When account screen unmounts, allow navbar\nuseEffect(()=>{if(loginIsActive){dispatch(ACTION_LOGIN_IS_NOT_ACTIVE());}},[dispatch,loginIsActive]);const handleConfirmPhotoSubmit=()=>{updateClientProfilePicture({variables:{id:clientToggled,profilePicture:imageUploaded}});dispatch(ACTION_IMAGE_LOADING());changeImageUploaded(\"\");dispatch(ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET());changeImagePreviewAvailable(false);changeTakeAPhotoSelected(false);changeWebcamURI(\"\");};useMemo(()=>{if(updateClientProfilePictureData){getClientsRefetch();}},[getClientsRefetch,updateClientProfilePictureData]);const handleProfilePictureRender=item=>{if(item.profilePicture){return/*#__PURE__*/React.createElement(\"img\",{className:\"admin_individual_client_picture_profile_avatar\",src:LZString.decompressFromEncodedURIComponent(item.profilePicture),alt:item.firstName[0].toUpperCase()+item.firstName.slice(1).toLowerCase()+\" \"+item.lastName[0].toUpperCase()+item.lastName.slice(1).toLowerCase()+\" Profile Picture\"});}else{return/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_initials_profile_avatar\",style:{background:randomColorArray[getClientsData.clients.sort((a,b)=>a.firstName.localeCompare(b.firstName)).map(x=>x.email).indexOf(item.email)]}},/*#__PURE__*/React.createElement(\"p\",null,item.firstName[0].toUpperCase()+item.lastName[0].toUpperCase()));}};useEffect(()=>{if(imageLoading){if(updateClientProfilePictureData){const imageDataReceived=setTimeout(()=>{dispatch(ACTION_IMAGE_LOADING_RESET());},500);return()=>{clearTimeout(imageDataReceived);};}}},[imageLoading,updateClientProfilePictureData,dispatch]);useEffect(()=>{if(location.state){if(location.state.changedAdminPassword){window.location.reload();}}},[location.state]);useEffect(()=>{if(loadingSpinnerActive){const loadingSpinnerDuration=setTimeout(()=>{if(pdfDownloadRef){if(pdfDownloadRef.current){pdfDownloadRef.current.click();}}dispatch(ACTION_LOADING_SPINNER_RESET());changePDFLoading(false);},3000);return()=>{clearTimeout(loadingSpinnerDuration);};}},[loadingSpinnerActive,dispatch]);const loadingCompleted=useCallback(()=>{dispatch(ACTION_LOADING_SPINNER_ACTIVE());if(!pdfLoading){changePDFLoading(true);}else{return null;}},[pdfLoading,dispatch]);const consentFormOnFile=item=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"profile_button_container\",onClick:()=>loadingCompleted(),style:{cursor:\"pointer\"}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_button_icon\",icon:faFileDownload,style:{color:\"rgba(0, 129, 177, 0.9)\",cursor:\"pointer\"}}),/*#__PURE__*/React.createElement(\"h2\",{style:{color:\"rgba(0, 129, 177, 0.9)\",cursor:\"pointer\"}},\"Download Latest Consent Form\"),/*#__PURE__*/React.createElement(\"p\",null,\"(\"+moment.unix(item.consentForm.createdAt/1000).format(\"l\")+\")\"));};const noConsentFormOnFile=()=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"profile_button_container\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_button_icon\",icon:faFilePdf,style:{color:\"rgba(177, 48, 0, 0.9)\",cursor:\"default\"}}),/*#__PURE__*/React.createElement(\"h2\",{style:{color:\"rgba(177, 48, 0, 0.9)\",cursor:\"default\"}},\"No Consent Form on File\"));};const renderBarInContactInfo=()=>{if(!currentScreenSize){if(initialScreenSize>=1200){return null;}else{return/*#__PURE__*/React.createElement(\"p\",{style:{color:\"rgb(200, 200, 200)\"}},\"|\");}}else{if(currentScreenSize>=1200){return null;}else{return/*#__PURE__*/React.createElement(\"p\",{style:{color:\"rgb(200, 200, 200)\"}},\"|\");}}};const renderDownloadConsentFormButton=item=>{if(item){if(item.consentForm){if(item.consentForm.date){return/*#__PURE__*/React.createElement(React.Fragment,null,pdfLoading?/*#__PURE__*/React.createElement(PDFDownloadLink,{document:/*#__PURE__*/React.createElement(ConsentFormPDF,{getClientData:{client:item},signature:signature?signature.current?signature.current.canvasContainer.children[1].toDataURL():null:null,consentFormLastUpdated:moment.unix(item.consentForm.createdAt/1000).format(\"l\")}),fileName:item.firstName[0].toUpperCase()+item.firstName.slice(1).toLowerCase()+\"_\"+item.lastName[0].toUpperCase()+item.lastName.slice(1).toLowerCase()+\"_\"+\"High_End_Consent_Form.pdf\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile_button_container\",ref:pdfDownloadRef,style:{cursor:item.consentForm?item.consentForm.date?\"pointer\":\"default\":\"default\"}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"profile_button_icon\",icon:item.consentForm?item.consentForm.date?faFileDownload:faFilePdf:faFilePdf,style:{color:item.consentForm?item.consentForm.date?\"rgba(0, 129, 177, 0.9)\":\"rgba(177, 48, 0, 0.9)\":\"rgba(177, 48, 0, 0.9)\",cursor:item.consentForm?item.consentForm.date?\"pointer\":\"default\":\"default\"}}),/*#__PURE__*/React.createElement(\"h2\",{style:{color:item.consentForm?item.consentForm.date?\"rgba(0, 129, 177, 0.9)\":\"rgba(177, 48, 0, 0.9)\":\"rgba(177, 48, 0, 0.9)\",cursor:item.consentForm?item.consentForm.date?\"pointer\":\"default\":\"default\"}},item.consentForm?item.consentForm.date?\"Download Latest Consent Form\":\"No Consent Form on File\":\"No Consent Form on File\"),item.consentForm?item.consentForm.date?/*#__PURE__*/React.createElement(\"p\",null,\"(\"+moment.unix(item.consentForm.createdAt/1000).format(\"l\")+\")\"):null:null)):consentFormOnFile(item));}else{return noConsentFormOnFile();}}else{return noConsentFormOnFile();}}else{return noConsentFormOnFile();}};useEffect(()=>{if(getClientsLoading){dispatch(ACTION_LOADING_SPINNER_ACTIVE());}else{dispatch(ACTION_LOADING_SPINNER_RESET());}},[dispatch,getClientsLoading]);useEffect(()=>{if(getEmployeeError){employeeDataRefetch();}},[getEmployeeError,employeeDataRefetch]);useEffect(()=>{if(getEmployeesError){getEmployeesRefetch();}},[getEmployeesError,getEmployeesRefetch]);return/*#__PURE__*/React.createElement(\"div\",{className:\"admin_clients_container\"},redirectToAdminLogInPage(),/*#__PURE__*/React.createElement(Modal,{isOpen:imageLoading||loadingSpinnerActive||getClientsLoading,style:{content:{position:\"fixed\",zIndex:\"10000\",height:\"100%\",backdropFilter:\"blur(5px)\",WebkitBackdropFilter:\"blur(5px)\",paddingBottom:\"10%\",borderRadius:\"none\",width:\"100vw\",top:\"0\",left:\"0\",right:\"0\",bottom:\"0\",border:\"none\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",background:\"rgba(0, 0, 0, 0.5)\"}}},/*#__PURE__*/React.createElement(BounceLoader,{size:100,css:override,color:\"rgb(44, 44, 52)\",loading:imageLoading||loadingSpinnerActive||getClientsLoading})),/*#__PURE__*/React.createElement(\"div\",{className:\"admin_clients_header\",style:{zIndex:logoutClicked||addProfilePhotoClicked||loadingSpinnerActive||imageLoading||cancelAppointmentClicked||getClientsLoading?0:5,filter:cancelAppointmentClicked||getClientsLoading?\"blur(5px)\":\"none\"}},/*#__PURE__*/React.createElement(Link,{to:\"/admin/menu\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"admin_clients_back_arrow\",icon:faChevronLeft})),/*#__PURE__*/React.createElement(\"h1\",null,\"CLIENTS\")),/*#__PURE__*/React.createElement(FormGroup,null,/*#__PURE__*/React.createElement(\"div\",{className:\"admin_clients_searchbar_container\"},/*#__PURE__*/React.createElement(Input,{className:\"admin_clients_searchbar_input_field\",placeholder:\"Filter by client name, email, or phone #\",onChange:handleChangeClientFilter,maxLength:128,onKeyDown:preventKeys}),/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"admin_clients_searchbar_icon\",icon:faSearch}))),/*#__PURE__*/React.createElement(\"div\",{className:\"admin_clients_content_container\"},getClientsData?getClientsData.clients.length>0?filteredAllClients.sort((a,b)=>a.firstName.localeCompare(b.firstName)).map((item,i)=>{return/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_container\",key:i,onClick:e=>handleClientToggled(e,item),ref:individualClientRef},/*#__PURE__*/React.createElement(Modal,{isOpen:addProfilePhotoClicked&&clientToggled===item._id,className:\"admin_individual_client_add_photo_modal\",style:{content:{position:\"fixed\",zIndex:10000,opacity:0.99,height:\"100%\",backdropFilter:\"blur(5px)\",WebkitBackdropFilter:\"blur(5px)\",paddingBottom:\"10%\",borderRadius:\"none\",width:\"100vw\",top:\"0\",left:\"0\",right:\"0\",bottom:\"0\",border:\"none\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",background:\"rgba(0, 0, 0, 0.5)\"}}},/*#__PURE__*/React.createElement(Transition,{items:addProfilePhotoClicked,from:{transform:\"translate3d(0, -65%, 0)\"},enter:{transform:\"translate3d(0, 0, 0)\"},leave:{display:\"none\"}},addProfilePhotoClicked=>addProfilePhotoClicked&&(styleprops=>/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_add_photo_modal_content_container\",style:styleprops},takeAPhotoSelected&&!imagePreviewAvailable?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Camera,{isSilentMode:true,onTakePhotoAnimationDone:dataUri=>{handleImageUploaded(dataUri);changeWebcamURI(dataUri);},imageType:IMAGE_TYPES.JPG}),/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_add_photo_modal_contents\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"modal_x\",icon:faTimes,onClick:()=>{dispatch(ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET());changeTakeAPhotoSelected(false);}}))):/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_add_photo_modal_contents\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{className:\"modal_x\",icon:faTimes,onClick:()=>{dispatch(ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET());changeTakeAPhotoSelected(false);changeImageUploaded(\"\");changeImagePreviewAvailable(false);changeWebcamURI(\"\");}}),/*#__PURE__*/React.createElement(\"h2\",null,\"Update client profile picture\"),/*#__PURE__*/React.createElement(\"span\",{className:\"admin_individual_client_add_photo_modal_buttons_container\",style:{top:imageUploaded||imagePreviewAvailable?\"35%\":\"45%\"}},/*#__PURE__*/React.createElement(ImageUploader,{withIcon:imageUploaded||imagePreviewAvailable?false:true,withLabel:false,buttonStyles:{display:imageUploaded||imagePreviewAvailable?\"none\":\"block\"},buttonText:\"Choose image\",imgExtension:[\".jpg\",\".png\",\".jpeg\"],maxFileSize:5242880,onChange:handleImageUploaded,singleImage:true,withPreview:true}),(imageUploaded||imagePreviewAvailable)&&takeAPhotoSelected?/*#__PURE__*/React.createElement(\"div\",{className:\"fileContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"uploadPictureContainer\"},/*#__PURE__*/React.createElement(\"div\",{className:\"deleteImage\",onClick:()=>{changeWebcamURI(\"\");changeImagePreviewAvailable(false);dispatch(ACTION_IMAGE_LOADING_RESET());changeImagePreviewAvailable(false);changeTakeAPhotoSelected(false);changeImageUploaded(\"\");}},\"X\"),/*#__PURE__*/React.createElement(\"img\",{src:webcamURI,className:\"uploadPicture\",alt:\"preview\"}))):null,imageUploaded||imagePreviewAvailable?/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_confirm_photo_button\",onClick:handleConfirmPhotoSubmit},/*#__PURE__*/React.createElement(\"p\",null,\"Confirm photo\")):null,initialScreenSize>=1200&&!imageUploaded&&!imagePreviewAvailable||currentScreenSize>=1200&&!imageUploaded&&!imagePreviewAvailable?/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(\"p\",{style:{display:!currentScreenSize?initialScreenSize>=1200?\"block\":\"none\":currentScreenSize>=1200?\"block\":\"none\"}},\"OR\"),/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_take_a_photo_button\",onClick:()=>changeTakeAPhotoSelected(true)},/*#__PURE__*/React.createElement(\"p\",null,\"Take a photo\")),\" \"):null)))))),/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_initials_square\",style:{background:randomColorArray[getClientsData.clients.sort((a,b)=>a.firstName.localeCompare(b.firstName)).map(x=>x.email).indexOf(item.email)]}},/*#__PURE__*/React.createElement(\"p\",null,item.firstName[0].toUpperCase()+item.lastName[0].toUpperCase())),/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_client_full_name\"},/*#__PURE__*/React.createElement(\"p\",null,item.firstName[0].toUpperCase()+item.firstName.slice(1).toLowerCase()+\" \"+item.lastName[0].toUpperCase()+item.lastName.slice(1).toLowerCase()),/*#__PURE__*/React.createElement(\"p\",null,item.email?item.email:null),/*#__PURE__*/React.createElement(\"p\",null,item.phoneNumber?item.phoneNumber:null)),/*#__PURE__*/React.createElement(\"span\",{className:\"admin_individual_client_spacer\"}),/*#__PURE__*/React.createElement(FontAwesomeIcon,{style:{zIndex:logoutClicked||clientToggled?0:1,transitionDelay:logoutClicked?\"initial\":!clientToggled?\"0.5s\":\"initial\"},icon:faEllipsisH,className:\"admin_individual_client_expand_icon\"}),/*#__PURE__*/React.createElement(Transition,{items:clientToggled,from:{transform:\"translateX(-100%)\"},enter:{transform:\"translateX(0%)\"},leave:{transform:\"translateX(-100%)\"},config:{duration:200}},clientToggled=>clientToggled===item._id&&(styleprops=>/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_selected_client_container\",style:_objectSpread(_objectSpread({},styleprops),{zIndex:logoutClicked||addProfilePhotoClicked||loadingSpinnerActive||imageLoading||cancelAppointmentClicked?0:1})},/*#__PURE__*/React.createElement(CanvasDraw,{className:\"consent_form_signature\",saveData:item.consentForm?item.consentForm.consentFormSignature?LZString.decompressFromEncodedURIComponent(item.consentForm.consentFormSignature):null:null,hideGrid:true,hideInterface:true,disabled:true,canvasHeight:\"100%\",canvasWidth:\"100%\",immediateLoading:true,ref:signature?signature:null,style:{display:\"none\"}}),/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_selected_client_contents_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"admin_individual_selected_client_back_container\",ref:selectedClientBackRef,onClick:e=>{adminClientSectionSelected===\"\"?handleClientUntoggled(e):dispatch(ACTION_ADMIN_CLIENT_PROFILE_SELECTED());}},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faLongArrowAltLeft,className:\"admin_individual_selected_client_back_arrow_icon\"}),/*#__PURE__*/React.createElement(\"p\",null,adminClientSectionSelected===\"\"?\"Back to all clients\":\"Back to \"+item.firstName[0].toUpperCase()+item.firstName.slice(1).toLowerCase()+\" \"+item.lastName[0].toUpperCase()+item.lastName.slice(1).toLowerCase()+\"'s Profile\")),adminClientSectionSelected===\"\"?/*#__PURE__*/React.createElement(AdminClientIndividualProfile,{item:item,clientToggled:clientToggled,changeClientToggled:changeClientToggled,handleProfilePictureRender:handleProfilePictureRender,renderBarInContactInfo:renderBarInContactInfo,renderDownloadConsentFormButton:renderDownloadConsentFormButton,getClientsData:getClientsData,getClientsRefetch:getClientsRefetch,getEmployeeData:getEmployeeData?getEmployeeData:null}):adminClientSectionSelected===\"UpcomingAppointments\"?/*#__PURE__*/React.createElement(\"div\",{className:\"admin_side_my_appointments_content_container\"},/*#__PURE__*/React.createElement(AdminRenderUpcomingAppointments,{data:getOwnAppointmentsData,getOwnAppointmentsRefetch:getOwnAppointmentsRefetch,item:item,override:override,loadingSpinnerActive:loadingSpinnerActive,currentScreenSize:currentScreenSize,initialScreenSize:initialScreenSize})):adminClientSectionSelected===\"PastAppointments\"?/*#__PURE__*/React.createElement(\"div\",{className:\"admin_side_my_appointments_content_container\"},/*#__PURE__*/React.createElement(AdminRenderPastAppointments,{data:getOwnPastAppointmentsData,item:item,currentScreenSize:currentScreenSize,initialScreenSize:initialScreenSize})):null)))));}):null:null));};export default AdminClients;","map":{"version":3,"sources":["D:/WebProjects/Barbershops/HighEnd/Client/src/components/admin/AdminClients/AdminClients.js"],"names":["React","useEffect","useState","useMemo","useRef","useCallback","useSelector","useDispatch","Redirect","Link","useLocation","FormGroup","Input","Modal","Transition","imageCompression","ImageUploader","Camera","IMAGE_TYPES","useMutation","useLazyQuery","getOwnPastAppointmentsQuery","getOwnAppointmentsQuery","updateClientProfilePictureMutation","moment","LZString","css","BounceLoader","CanvasDraw","PDFDownloadLink","ConsentFormPDF","FontAwesomeIcon","faChevronLeft","faSearch","faEllipsisH","faLongArrowAltLeft","faTimes","faFilePdf","faFileDownload","AdminClientIndividualProfile","AdminRenderUpcomingAppointments","AdminRenderPastAppointments","ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET","ACTION_LOADING_SPINNER_RESET","ACTION_LOADING_SPINNER_ACTIVE","ACTION_IMAGE_LOADING","ACTION_IMAGE_LOADING_RESET","ACTION_SPLASH_SCREEN_COMPLETE","ACTION_SPLASH_SCREEN_HALFWAY","ACTION_LOGIN_IS_NOT_ACTIVE","ACTION_ADMIN_CLIENT_PROFILE_SELECTED","ACTION_ON_ACTIVITY_PAGE_RESET","AdminClients","props","dispatch","location","getClientsData","getEmployeeError","getEmployeesError","employeeDataRefetch","getEmployeesRefetch","getClientsLoading","initialScreenSize","currentScreenSize","resetNotifications","getClientsRefetch","getEmployeeData","randomColorArray","signature","pdfDownloadRef","selectedClientBackRef","backToClientsRef","individualClientRef","splashScreenHalfway","state","splashScreenComplete","adminAuthenticated","admin_authenticated","logoutClicked","log_out_clicked","loginIsActive","login_is_active","adminClientSectionSelected","admin_client_section_selected","addProfilePhotoClicked","add_profile_photo_clicked","loadingSpinnerActive","loading_spinner","imageLoading","image_loading","cancelAppointmentClicked","onActivityPage","on_activity_page","filteredAllClients","changeFilteredAllClients","clientFilter","changeClientFilter","clientToggled","changeClientToggled","takeAPhotoSelected","changeTakeAPhotoSelected","webcamURI","changeWebcamURI","imageUploaded","changeImageUploaded","imagePreviewAvailable","changeImagePreviewAvailable","pdfLoading","changePDFLoading","updateClientProfilePicture","updateClientProfilePictureData","data","override","fetchPolicy","getOwnAppointments","getOwnAppointmentsData","getOwnAppointmentsRefetch","refetch","getOwnPastAppointments","getOwnPastAppointmentsData","redirectToAdminLogInPage","handleChangeClientFilter","e","currentTarget","value","handleDeletedPreviewImage","deleteImageClass","document","getElementsByClassName","uploadPictureClass","style","display","handleImageUploaded","picture","reader","FileReader","maxSizeMB","maxWidthOrHeight","compressedImage","fetch","then","res","blob","readAsDataURL","onloadend","base64data","result","compressedBase64data","compressToEncodedURIComponent","console","log","preventKeys","key","preventDefault","clients","length","filter","x","RegExp","test","firstName","lastName","email","phoneNumber","split","join","clientEmail","_id","variables","handleClientToggled","item","current","className","innerText","includes","toUpperCase","slice","toLowerCase","handleClientUntoggled","pathname","window","scrollTo","handleConfirmPhotoSubmit","id","profilePicture","handleProfilePictureRender","decompressFromEncodedURIComponent","background","sort","a","b","localeCompare","map","indexOf","imageDataReceived","setTimeout","clearTimeout","changedAdminPassword","reload","loadingSpinnerDuration","click","loadingCompleted","consentFormOnFile","cursor","color","unix","consentForm","createdAt","format","noConsentFormOnFile","renderBarInContactInfo","renderDownloadConsentFormButton","date","client","canvasContainer","children","toDataURL","content","position","zIndex","height","backdropFilter","WebkitBackdropFilter","paddingBottom","borderRadius","width","top","left","right","bottom","border","flexDirection","alignItems","justifyContent","i","opacity","transform","styleprops","dataUri","JPG","transitionDelay","duration","consentFormSignature"],"mappings":"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","sourcesContent":["import React, {\r\n  useEffect,\r\n  useState,\r\n  useMemo,\r\n  useRef,\r\n  useCallback,\r\n} from \"react\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { Redirect, Link, useLocation } from \"react-router-dom\";\r\nimport { FormGroup, Input } from \"reactstrap\";\r\nimport Modal from \"react-modal\";\r\nimport { Transition } from \"react-spring/renderprops\";\r\nimport imageCompression from \"browser-image-compression\";\r\nimport ImageUploader from \"react-images-upload\";\r\nimport Camera, { IMAGE_TYPES } from \"react-html5-camera-photo\";\r\nimport { useMutation, useLazyQuery } from \"@apollo/react-hooks\";\r\nimport getOwnPastAppointmentsQuery from \"../../../graphql/queries/getOwnPastAppointmentsQuery\";\r\nimport getOwnAppointmentsQuery from \"../../../graphql/queries/getOwnAppointmentsQuery\";\r\nimport updateClientProfilePictureMutation from \"../../../graphql/mutations/updateClientProfilePictureMutation\";\r\nimport moment from \"moment\";\r\nimport LZString from \"lz-string\";\r\nimport { css } from \"@emotion/css\";\r\nimport BounceLoader from \"react-spinners/BounceLoader\";\r\nimport CanvasDraw from \"react-canvas-draw\";\r\nimport { PDFDownloadLink } from \"@react-pdf/renderer\";\r\nimport ConsentFormPDF from \"../../account/clientprofile/ConsentForm/ConsentFormPDF\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faChevronLeft,\r\n  faSearch,\r\n  faEllipsisH,\r\n  faLongArrowAltLeft,\r\n  faTimes,\r\n  faFilePdf,\r\n  faFileDownload,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport AdminClientIndividualProfile from \"./AdminClientIndividualProfile\";\r\nimport AdminRenderUpcomingAppointments from \"./AdminRenderUpcomingAppointments\";\r\nimport AdminRenderPastAppointments from \"./AdminRenderPastAppointments\";\r\nimport ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET from \"../../../actions/Admin/AddProfilePhotoClicked/ACTION_ADD_PROFILE_CLICKED_RESET\";\r\nimport ACTION_LOADING_SPINNER_RESET from \"../../../actions/LoadingSpinner/ACTION_LOADING_SPINNER_RESET\";\r\nimport ACTION_LOADING_SPINNER_ACTIVE from \"../../../actions/LoadingSpinner/ACTION_LOADING_SPINNER_ACTIVE\";\r\nimport ACTION_IMAGE_LOADING from \"../../../actions/Admin/ImageLoading/ACTION_IMAGE_LOADING\";\r\nimport ACTION_IMAGE_LOADING_RESET from \"../../../actions/Admin/ImageLoading/ACTION_IMAGE_LOADING_RESET\";\r\nimport ACTION_SPLASH_SCREEN_COMPLETE from \"../../../actions/SplashScreenComplete/ACTION_SPLASH_SCREEN_COMPLETE\";\r\nimport ACTION_SPLASH_SCREEN_HALFWAY from \"../../../actions/SplashScreenHalfway/ACTION_SPLASH_SCREEN_HALFWAY\";\r\nimport ACTION_LOGIN_IS_NOT_ACTIVE from \"../../../actions/Login/ACTION_LOGIN_IS_NOT_ACTIVE\";\r\nimport ACTION_ADMIN_CLIENT_PROFILE_SELECTED from \"../../../actions/Admin/AdminLogin/AdminClientSectionSelected/ACTION_ADMIN_CLIENT_PROFILE_SELECTED.js\";\r\nimport ACTION_ON_ACTIVITY_PAGE_RESET from \"../../../actions/Admin/OnActivityPage/ACTION_ON_ACTIVITY_PAGE_RESET\";\r\nimport \"react-html5-camera-photo/build/css/index.css\";\r\nimport \"./AdminClients.css\";\r\n\r\nconst AdminClients = (props) => {\r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n\r\n  const {\r\n    getClientsData,\r\n    getEmployeeError,\r\n    getEmployeesError,\r\n    employeeDataRefetch,\r\n    getEmployeesRefetch,\r\n    getClientsLoading,\r\n    initialScreenSize,\r\n    currentScreenSize,\r\n    resetNotifications,\r\n    getClientsRefetch,\r\n    getEmployeeData,\r\n    randomColorArray,\r\n  } = props;\r\n\r\n  let signature = useRef(null);\r\n  let pdfDownloadRef = useRef(null);\r\n\r\n  const selectedClientBackRef = useRef(null);\r\n  const backToClientsRef = useRef(null);\r\n  let individualClientRef = useRef(null);\r\n\r\n  const splashScreenHalfway = useSelector(\r\n    (state) => state.splashScreenHalfway.splashScreenHalfway\r\n  );\r\n  const splashScreenComplete = useSelector(\r\n    (state) => state.splashScreenComplete.splashScreenComplete\r\n  );\r\n  const adminAuthenticated = useSelector(\r\n    (state) => state.adminAuthenticated.admin_authenticated\r\n  );\r\n  const logoutClicked = useSelector(\r\n    (state) => state.logoutClicked.log_out_clicked\r\n  );\r\n  const loginIsActive = useSelector(\r\n    (state) => state.loginIsActive.login_is_active\r\n  );\r\n  const adminClientSectionSelected = useSelector(\r\n    (state) => state.adminClientSectionSelected.admin_client_section_selected\r\n  );\r\n  const addProfilePhotoClicked = useSelector(\r\n    (state) => state.addProfilePhotoClicked.add_profile_photo_clicked\r\n  );\r\n  const loadingSpinnerActive = useSelector(\r\n    (state) => state.loadingSpinnerActive.loading_spinner\r\n  );\r\n  const imageLoading = useSelector((state) => state.imageLoading.image_loading);\r\n  const cancelAppointmentClicked = useSelector(\r\n    (state) => state.cancelAppointmentClicked.cancelAppointmentClicked\r\n  );\r\n  const onActivityPage = useSelector(\r\n    (state) => state.onActivityPage.on_activity_page\r\n  );\r\n\r\n  const [filteredAllClients, changeFilteredAllClients] = useState([]);\r\n  const [clientFilter, changeClientFilter] = useState(\"\");\r\n  const [clientToggled, changeClientToggled] = useState(\"\");\r\n\r\n  const [takeAPhotoSelected, changeTakeAPhotoSelected] = useState(false);\r\n  const [webcamURI, changeWebcamURI] = useState(\"\");\r\n  const [imageUploaded, changeImageUploaded] = useState(\"\");\r\n  const [imagePreviewAvailable, changeImagePreviewAvailable] = useState(false);\r\n  const [pdfLoading, changePDFLoading] = useState(false);\r\n\r\n  const [\r\n    updateClientProfilePicture,\r\n    { data: updateClientProfilePictureData },\r\n  ] = useMutation(updateClientProfilePictureMutation);\r\n\r\n  const override = css`\r\n    display: block;\r\n    position: absolute;\r\n    left: 25%;\r\n    right: 25%;\r\n  `;\r\n\r\n  const [\r\n    getOwnAppointments,\r\n    { data: getOwnAppointmentsData, refetch: getOwnAppointmentsRefetch },\r\n  ] = useLazyQuery(getOwnAppointmentsQuery, {\r\n    fetchPolicy: \"no-cache\",\r\n  });\r\n\r\n  const [\r\n    getOwnPastAppointments,\r\n    { data: getOwnPastAppointmentsData },\r\n  ] = useLazyQuery(getOwnPastAppointmentsQuery, {\r\n    fetchPolicy: \"no-cache\",\r\n  });\r\n\r\n  useEffect(() => {\r\n    if (!splashScreenComplete) {\r\n      dispatch(ACTION_SPLASH_SCREEN_COMPLETE());\r\n    }\r\n    if (!splashScreenHalfway) {\r\n      dispatch(ACTION_SPLASH_SCREEN_HALFWAY());\r\n    }\r\n  }, [dispatch, splashScreenComplete, splashScreenHalfway]);\r\n\r\n  const redirectToAdminLogInPage = () => {\r\n    if (!adminAuthenticated) {\r\n      return <Redirect to=\"/admin\" />;\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (pdfLoading) {\r\n        changePDFLoading(false);\r\n      }\r\n    };\r\n  }, [pdfLoading]);\r\n\r\n  const handleChangeClientFilter = (e) => {\r\n    changeClientFilter(e.currentTarget.value);\r\n  };\r\n\r\n  const handleDeletedPreviewImage = () => {\r\n    const deleteImageClass = document.getElementsByClassName(\"deleteImage\");\r\n    const uploadPictureClass = document.getElementsByClassName(\"uploadPicture\");\r\n\r\n    if (deleteImageClass) {\r\n      if (deleteImageClass[0]) {\r\n        deleteImageClass[0].style.display = \"none\";\r\n      }\r\n    }\r\n    if (uploadPictureClass) {\r\n      if (uploadPictureClass[0]) {\r\n        uploadPictureClass[0].style.display = \"none\";\r\n      }\r\n    }\r\n  };\r\n\r\n  const handleImageUploaded = async (picture) => {\r\n    dispatch(ACTION_IMAGE_LOADING());\r\n    if (picture[0] || typeof picture === \"string\") {\r\n      const reader = new FileReader();\r\n      changeImagePreviewAvailable(true);\r\n      try {\r\n        let compressedImage;\r\n\r\n        if (typeof picture === \"object\") {\r\n          compressedImage = await imageCompression(picture[0], {\r\n            maxSizeMB: 0.3,\r\n            maxWidthOrHeight: 300,\r\n          });\r\n        } else if (typeof picture === \"string\") {\r\n          await fetch(picture)\r\n            .then((res) => {\r\n              return res.blob();\r\n            })\r\n            .then(async (blob) => {\r\n              compressedImage = await imageCompression(blob, {\r\n                maxSizeMB: 0.3,\r\n                maxWidthOrHeight: 300,\r\n              });\r\n            });\r\n        }\r\n\r\n        reader.readAsDataURL(compressedImage);\r\n\r\n        reader.onloadend = async () => {\r\n          const base64data = reader.result;\r\n\r\n          const compressedBase64data = LZString.compressToEncodedURIComponent(\r\n            base64data\r\n          );\r\n          dispatch(ACTION_IMAGE_LOADING_RESET());\r\n          changeImageUploaded(compressedBase64data);\r\n        };\r\n      } catch (error) {\r\n        dispatch(ACTION_IMAGE_LOADING_RESET());\r\n        console.log(error);\r\n      }\r\n    } else {\r\n      dispatch(ACTION_IMAGE_LOADING_RESET());\r\n      changeImageUploaded(\"\");\r\n      changeImagePreviewAvailable(false);\r\n      handleDeletedPreviewImage();\r\n    }\r\n  };\r\n\r\n  const preventKeys = (e) => {\r\n    if (\r\n      e.key === \")\" ||\r\n      e.key === \"(\" ||\r\n      e.key === \"[\" ||\r\n      e.key === \"]\" ||\r\n      e.key === \"\\\\\" ||\r\n      e.key === \"/\"\r\n    ) {\r\n      e.preventDefault();\r\n    }\r\n  };\r\n\r\n  useMemo(() => {\r\n    if (getClientsData) {\r\n      if (getClientsData.clients.length > 0) {\r\n        if (changeClientFilter) {\r\n          changeFilteredAllClients(\r\n            [...getClientsData.clients].filter((x) => {\r\n              return (\r\n                new RegExp(clientFilter, \"gi\").test(\r\n                  x.firstName + \" \" + x.lastName\r\n                ) ||\r\n                new RegExp(clientFilter, \"gi\").test(x.email) ||\r\n                new RegExp(clientFilter, \"gi\").test(x.phoneNumber) ||\r\n                new RegExp(clientFilter, \"gi\").test(\r\n                  x.phoneNumber.split(/[\\W_]+/g).join(\"\")\r\n                )\r\n              );\r\n            })\r\n          );\r\n        }\r\n      }\r\n    }\r\n  }, [clientFilter, getClientsData]);\r\n\r\n  useMemo(() => {\r\n    if (clientToggled) {\r\n      const clientEmail = [...getClientsData.clients].filter(\r\n        (x) => x._id === clientToggled\r\n      )[0].email;\r\n\r\n      getOwnAppointments({\r\n        variables: { _id: clientToggled, email: clientEmail },\r\n      });\r\n\r\n      getOwnPastAppointments({\r\n        variables: { _id: clientToggled, email: clientEmail },\r\n      });\r\n    }\r\n  }, [\r\n    clientToggled,\r\n    getOwnAppointments,\r\n    getOwnPastAppointments,\r\n    getClientsData,\r\n  ]);\r\n\r\n  // Allows click only if selected client modal is not active\r\n\r\n  const handleClientToggled = (e, item) => {\r\n    if (e.currentTarget && individualClientRef) {\r\n      if (individualClientRef.current) {\r\n        if (\r\n          individualClientRef.current.className === e.currentTarget.className\r\n        ) {\r\n          if (selectedClientBackRef) {\r\n            if (!selectedClientBackRef.current) {\r\n              if (item) {\r\n                if (item._id) {\r\n                  changeClientToggled(item._id);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        if (\r\n          e.currentTarget.innerText.includes(item.email) &&\r\n          e.currentTarget.innerText.includes(\r\n            item.firstName[0].toUpperCase() +\r\n              item.firstName.slice(1).toLowerCase()\r\n          ) &&\r\n          e.currentTarget.innerText.includes(\r\n            item.lastName[0].toUpperCase() +\r\n              item.lastName.slice(1).toLowerCase()\r\n          )\r\n        ) {\r\n          if (selectedClientBackRef) {\r\n            if (!selectedClientBackRef.current) {\r\n              if (item) {\r\n                if (item._id) {\r\n                  changeClientToggled(item._id);\r\n                }\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  // Function for back arrow click to reset selected toggled client\r\n\r\n  const handleClientUntoggled = (e) => {\r\n    if (\r\n      (e.currentTarget && selectedClientBackRef) ||\r\n      (e.currentTarget && backToClientsRef)\r\n    ) {\r\n      if (selectedClientBackRef.current || backToClientsRef.current) {\r\n        if (\r\n          selectedClientBackRef.current.className ===\r\n            e.currentTarget.className ||\r\n          backToClientsRef.current.className === e.currentTarget.className\r\n        ) {\r\n          changeClientToggled(\"\");\r\n\r\n          if (pdfLoading) {\r\n            changePDFLoading(false);\r\n          }\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (onActivityPage) {\r\n      resetNotifications();\r\n      dispatch(ACTION_ON_ACTIVITY_PAGE_RESET());\r\n    }\r\n  }, [onActivityPage, dispatch, resetNotifications]);\r\n\r\n  useEffect(() => {\r\n    if (location.pathname || addProfilePhotoClicked || loadingSpinnerActive) {\r\n      window.scrollTo(0, 0);\r\n    }\r\n  }, [location.pathname, addProfilePhotoClicked, loadingSpinnerActive]);\r\n\r\n  // When account screen unmounts, allow navbar\r\n  useEffect(() => {\r\n    if (loginIsActive) {\r\n      dispatch(ACTION_LOGIN_IS_NOT_ACTIVE());\r\n    }\r\n  }, [dispatch, loginIsActive]);\r\n\r\n  const handleConfirmPhotoSubmit = () => {\r\n    updateClientProfilePicture({\r\n      variables: {\r\n        id: clientToggled,\r\n        profilePicture: imageUploaded,\r\n      },\r\n    });\r\n\r\n    dispatch(ACTION_IMAGE_LOADING());\r\n    changeImageUploaded(\"\");\r\n    dispatch(ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET());\r\n    changeImagePreviewAvailable(false);\r\n    changeTakeAPhotoSelected(false);\r\n    changeWebcamURI(\"\");\r\n  };\r\n\r\n  useMemo(() => {\r\n    if (updateClientProfilePictureData) {\r\n      getClientsRefetch();\r\n    }\r\n  }, [getClientsRefetch, updateClientProfilePictureData]);\r\n\r\n  const handleProfilePictureRender = (item) => {\r\n    if (item.profilePicture) {\r\n      return (\r\n        <img\r\n          className=\"admin_individual_client_picture_profile_avatar\"\r\n          src={LZString.decompressFromEncodedURIComponent(item.profilePicture)}\r\n          alt={\r\n            item.firstName[0].toUpperCase() +\r\n            item.firstName.slice(1).toLowerCase() +\r\n            \" \" +\r\n            item.lastName[0].toUpperCase() +\r\n            item.lastName.slice(1).toLowerCase() +\r\n            \" Profile Picture\"\r\n          }\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <div\r\n          className=\"admin_individual_client_initials_profile_avatar\"\r\n          style={{\r\n            background:\r\n              randomColorArray[\r\n                getClientsData.clients\r\n                  .sort((a, b) => a.firstName.localeCompare(b.firstName))\r\n                  .map((x) => x.email)\r\n                  .indexOf(item.email)\r\n              ],\r\n          }}\r\n        >\r\n          <p>\r\n            {item.firstName[0].toUpperCase() + item.lastName[0].toUpperCase()}\r\n          </p>\r\n        </div>\r\n      );\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (imageLoading) {\r\n      if (updateClientProfilePictureData) {\r\n        const imageDataReceived = setTimeout(() => {\r\n          dispatch(ACTION_IMAGE_LOADING_RESET());\r\n        }, 500);\r\n        return () => {\r\n          clearTimeout(imageDataReceived);\r\n        };\r\n      }\r\n    }\r\n  }, [imageLoading, updateClientProfilePictureData, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (location.state) {\r\n      if (location.state.changedAdminPassword) {\r\n        window.location.reload();\r\n      }\r\n    }\r\n  }, [location.state]);\r\n\r\n  useEffect(() => {\r\n    if (loadingSpinnerActive) {\r\n      const loadingSpinnerDuration = setTimeout(() => {\r\n        if (pdfDownloadRef) {\r\n          if (pdfDownloadRef.current) {\r\n            pdfDownloadRef.current.click();\r\n          }\r\n        }\r\n        dispatch(ACTION_LOADING_SPINNER_RESET());\r\n        changePDFLoading(false);\r\n      }, 3000);\r\n      return () => {\r\n        clearTimeout(loadingSpinnerDuration);\r\n      };\r\n    }\r\n  }, [loadingSpinnerActive, dispatch]);\r\n\r\n  const loadingCompleted = useCallback(() => {\r\n    dispatch(ACTION_LOADING_SPINNER_ACTIVE());\r\n\r\n    if (!pdfLoading) {\r\n      changePDFLoading(true);\r\n    } else {\r\n      return null;\r\n    }\r\n  }, [pdfLoading, dispatch]);\r\n\r\n  const consentFormOnFile = (item) => {\r\n    return (\r\n      <div\r\n        className=\"profile_button_container\"\r\n        onClick={() => loadingCompleted()}\r\n        style={{\r\n          cursor: \"pointer\",\r\n        }}\r\n      >\r\n        <FontAwesomeIcon\r\n          className=\"profile_button_icon\"\r\n          icon={faFileDownload}\r\n          style={{\r\n            color: \"rgba(0, 129, 177, 0.9)\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        />\r\n        <h2\r\n          style={{\r\n            color: \"rgba(0, 129, 177, 0.9)\",\r\n            cursor: \"pointer\",\r\n          }}\r\n        >\r\n          Download Latest Consent Form\r\n        </h2>\r\n        <p>\r\n          {\"(\" +\r\n            moment.unix(item.consentForm.createdAt / 1000).format(\"l\") +\r\n            \")\"}\r\n        </p>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const noConsentFormOnFile = () => {\r\n    return (\r\n      <div className=\"profile_button_container\">\r\n        <FontAwesomeIcon\r\n          className=\"profile_button_icon\"\r\n          icon={faFilePdf}\r\n          style={{\r\n            color: \"rgba(177, 48, 0, 0.9)\",\r\n            cursor: \"default\",\r\n          }}\r\n        />\r\n        <h2\r\n          style={{\r\n            color: \"rgba(177, 48, 0, 0.9)\",\r\n            cursor: \"default\",\r\n          }}\r\n        >\r\n          No Consent Form on File\r\n        </h2>\r\n      </div>\r\n    );\r\n  };\r\n\r\n  const renderBarInContactInfo = () => {\r\n    if (!currentScreenSize) {\r\n      if (initialScreenSize >= 1200) {\r\n        return null;\r\n      } else {\r\n        return <p style={{ color: \"rgb(200, 200, 200)\" }}>|</p>;\r\n      }\r\n    } else {\r\n      if (currentScreenSize >= 1200) {\r\n        return null;\r\n      } else {\r\n        return <p style={{ color: \"rgb(200, 200, 200)\" }}>|</p>;\r\n      }\r\n    }\r\n  };\r\n\r\n  const renderDownloadConsentFormButton = (item) => {\r\n    if (item) {\r\n      if (item.consentForm) {\r\n        if (item.consentForm.date) {\r\n          return (\r\n            <>\r\n              {pdfLoading ? (\r\n                <PDFDownloadLink\r\n                  document={\r\n                    <ConsentFormPDF\r\n                      getClientData={{ client: item }}\r\n                      signature={\r\n                        signature\r\n                          ? signature.current\r\n                            ? signature.current.canvasContainer.children[1].toDataURL()\r\n                            : null\r\n                          : null\r\n                      }\r\n                      consentFormLastUpdated={moment\r\n                        .unix(item.consentForm.createdAt / 1000)\r\n                        .format(\"l\")}\r\n                    />\r\n                  }\r\n                  fileName={\r\n                    item.firstName[0].toUpperCase() +\r\n                    item.firstName.slice(1).toLowerCase() +\r\n                    \"_\" +\r\n                    item.lastName[0].toUpperCase() +\r\n                    item.lastName.slice(1).toLowerCase() +\r\n                    \"_\" +\r\n                    \"High_End_Consent_Form.pdf\"\r\n                  }\r\n                >\r\n                  <div\r\n                    className=\"profile_button_container\"\r\n                    ref={pdfDownloadRef}\r\n                    style={{\r\n                      cursor: item.consentForm\r\n                        ? item.consentForm.date\r\n                          ? \"pointer\"\r\n                          : \"default\"\r\n                        : \"default\",\r\n                    }}\r\n                  >\r\n                    <FontAwesomeIcon\r\n                      className=\"profile_button_icon\"\r\n                      icon={\r\n                        item.consentForm\r\n                          ? item.consentForm.date\r\n                            ? faFileDownload\r\n                            : faFilePdf\r\n                          : faFilePdf\r\n                      }\r\n                      style={{\r\n                        color: item.consentForm\r\n                          ? item.consentForm.date\r\n                            ? \"rgba(0, 129, 177, 0.9)\"\r\n                            : \"rgba(177, 48, 0, 0.9)\"\r\n                          : \"rgba(177, 48, 0, 0.9)\",\r\n                        cursor: item.consentForm\r\n                          ? item.consentForm.date\r\n                            ? \"pointer\"\r\n                            : \"default\"\r\n                          : \"default\",\r\n                      }}\r\n                    />\r\n                    <h2\r\n                      style={{\r\n                        color: item.consentForm\r\n                          ? item.consentForm.date\r\n                            ? \"rgba(0, 129, 177, 0.9)\"\r\n                            : \"rgba(177, 48, 0, 0.9)\"\r\n                          : \"rgba(177, 48, 0, 0.9)\",\r\n                        cursor: item.consentForm\r\n                          ? item.consentForm.date\r\n                            ? \"pointer\"\r\n                            : \"default\"\r\n                          : \"default\",\r\n                      }}\r\n                    >\r\n                      {item.consentForm\r\n                        ? item.consentForm.date\r\n                          ? \"Download Latest Consent Form\"\r\n                          : \"No Consent Form on File\"\r\n                        : \"No Consent Form on File\"}\r\n                    </h2>\r\n                    {item.consentForm ? (\r\n                      item.consentForm.date ? (\r\n                        <p>\r\n                          {\"(\" +\r\n                            moment\r\n                              .unix(item.consentForm.createdAt / 1000)\r\n                              .format(\"l\") +\r\n                            \")\"}\r\n                        </p>\r\n                      ) : null\r\n                    ) : null}\r\n                  </div>\r\n                </PDFDownloadLink>\r\n              ) : (\r\n                consentFormOnFile(item)\r\n              )}\r\n            </>\r\n          );\r\n        } else {\r\n          return noConsentFormOnFile();\r\n        }\r\n      } else {\r\n        return noConsentFormOnFile();\r\n      }\r\n    } else {\r\n      return noConsentFormOnFile();\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (getClientsLoading) {\r\n      dispatch(ACTION_LOADING_SPINNER_ACTIVE());\r\n    } else {\r\n      dispatch(ACTION_LOADING_SPINNER_RESET());\r\n    }\r\n  }, [dispatch, getClientsLoading]);\r\n\r\n  useEffect(() => {\r\n    if (getEmployeeError) {\r\n      employeeDataRefetch();\r\n    }\r\n  }, [getEmployeeError, employeeDataRefetch]);\r\n\r\n  useEffect(() => {\r\n    if (getEmployeesError) {\r\n      getEmployeesRefetch();\r\n    }\r\n  }, [getEmployeesError, getEmployeesRefetch]);\r\n\r\n  return (\r\n    <div className=\"admin_clients_container\">\r\n      {redirectToAdminLogInPage()}\r\n      <Modal\r\n        isOpen={imageLoading || loadingSpinnerActive || getClientsLoading}\r\n        style={{\r\n          content: {\r\n            position: \"fixed\",\r\n            zIndex: \"10000\",\r\n            height: \"100%\",\r\n            backdropFilter: \"blur(5px)\",\r\n            WebkitBackdropFilter: \"blur(5px)\",\r\n            paddingBottom: \"10%\",\r\n            borderRadius: \"none\",\r\n            width: \"100vw\",\r\n            top: \"0\",\r\n            left: \"0\",\r\n            right: \"0\",\r\n            bottom: \"0\",\r\n            border: \"none\",\r\n            display: \"flex\",\r\n            flexDirection: \"column\",\r\n            alignItems: \"center\",\r\n            justifyContent: \"center\",\r\n            background: \"rgba(0, 0, 0, 0.5)\",\r\n          },\r\n        }}\r\n      >\r\n        <BounceLoader\r\n          size={100}\r\n          css={override}\r\n          color={\"rgb(44, 44, 52)\"}\r\n          loading={imageLoading || loadingSpinnerActive || getClientsLoading}\r\n        />\r\n      </Modal>\r\n      <div\r\n        className=\"admin_clients_header\"\r\n        style={{\r\n          zIndex:\r\n            logoutClicked ||\r\n            addProfilePhotoClicked ||\r\n            loadingSpinnerActive ||\r\n            imageLoading ||\r\n            cancelAppointmentClicked ||\r\n            getClientsLoading\r\n              ? 0\r\n              : 5,\r\n          filter:\r\n            cancelAppointmentClicked || getClientsLoading\r\n              ? \"blur(5px)\"\r\n              : \"none\",\r\n        }}\r\n      >\r\n        <Link to=\"/admin/menu\">\r\n          <FontAwesomeIcon\r\n            className=\"admin_clients_back_arrow\"\r\n            icon={faChevronLeft}\r\n          />\r\n        </Link>\r\n        <h1>CLIENTS</h1>\r\n      </div>\r\n      <FormGroup>\r\n        <div className=\"admin_clients_searchbar_container\">\r\n          <Input\r\n            className=\"admin_clients_searchbar_input_field\"\r\n            placeholder=\"Filter by client name, email, or phone #\"\r\n            onChange={handleChangeClientFilter}\r\n            maxLength={128}\r\n            onKeyDown={preventKeys}\r\n          />\r\n          <FontAwesomeIcon\r\n            className=\"admin_clients_searchbar_icon\"\r\n            icon={faSearch}\r\n          />\r\n        </div>\r\n      </FormGroup>\r\n      <div className=\"admin_clients_content_container\">\r\n        {getClientsData\r\n          ? getClientsData.clients.length > 0\r\n            ? filteredAllClients\r\n                .sort((a, b) => a.firstName.localeCompare(b.firstName))\r\n                .map((item, i) => {\r\n                  return (\r\n                    <div\r\n                      className=\"admin_individual_client_container\"\r\n                      key={i}\r\n                      onClick={(e) => handleClientToggled(e, item)}\r\n                      ref={individualClientRef}\r\n                    >\r\n                      <Modal\r\n                        isOpen={\r\n                          addProfilePhotoClicked && clientToggled === item._id\r\n                        }\r\n                        className=\"admin_individual_client_add_photo_modal\"\r\n                        style={{\r\n                          content: {\r\n                            position: \"fixed\",\r\n                            zIndex: 10000,\r\n                            opacity: 0.99,\r\n                            height: \"100%\",\r\n                            backdropFilter: \"blur(5px)\",\r\n                            WebkitBackdropFilter: \"blur(5px)\",\r\n                            paddingBottom: \"10%\",\r\n                            borderRadius: \"none\",\r\n                            width: \"100vw\",\r\n                            top: \"0\",\r\n                            left: \"0\",\r\n                            right: \"0\",\r\n                            bottom: \"0\",\r\n                            border: \"none\",\r\n                            display: \"flex\",\r\n                            flexDirection: \"column\",\r\n                            alignItems: \"center\",\r\n                            justifyContent: \"center\",\r\n                            background: \"rgba(0, 0, 0, 0.5)\",\r\n                          },\r\n                        }}\r\n                      >\r\n                        <Transition\r\n                          items={addProfilePhotoClicked}\r\n                          from={{ transform: \"translate3d(0, -65%, 0)\" }}\r\n                          enter={{ transform: \"translate3d(0, 0, 0)\" }}\r\n                          leave={{ display: \"none\" }}\r\n                        >\r\n                          {(addProfilePhotoClicked) =>\r\n                            addProfilePhotoClicked &&\r\n                            ((styleprops) => (\r\n                              <div\r\n                                className=\"admin_individual_client_add_photo_modal_content_container\"\r\n                                style={styleprops}\r\n                              >\r\n                                {takeAPhotoSelected &&\r\n                                !imagePreviewAvailable ? (\r\n                                  <>\r\n                                    <Camera\r\n                                      isSilentMode={true}\r\n                                      onTakePhotoAnimationDone={(dataUri) => {\r\n                                        handleImageUploaded(dataUri);\r\n                                        changeWebcamURI(dataUri);\r\n                                      }}\r\n                                      imageType={IMAGE_TYPES.JPG}\r\n                                    />\r\n                                    <div className=\"admin_individual_client_add_photo_modal_contents\">\r\n                                      <FontAwesomeIcon\r\n                                        className=\"modal_x\"\r\n                                        icon={faTimes}\r\n                                        onClick={() => {\r\n                                          dispatch(\r\n                                            ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET()\r\n                                          );\r\n                                          changeTakeAPhotoSelected(false);\r\n                                        }}\r\n                                      />\r\n                                    </div>\r\n                                  </>\r\n                                ) : (\r\n                                  <div className=\"admin_individual_client_add_photo_modal_contents\">\r\n                                    <FontAwesomeIcon\r\n                                      className=\"modal_x\"\r\n                                      icon={faTimes}\r\n                                      onClick={() => {\r\n                                        dispatch(\r\n                                          ACTION_ADD_PROFILE_PHOTO_CLICKED_RESET()\r\n                                        );\r\n                                        changeTakeAPhotoSelected(false);\r\n                                        changeImageUploaded(\"\");\r\n                                        changeImagePreviewAvailable(false);\r\n                                        changeWebcamURI(\"\");\r\n                                      }}\r\n                                    />\r\n                                    <h2>Update client profile picture</h2>\r\n                                    <span\r\n                                      className=\"admin_individual_client_add_photo_modal_buttons_container\"\r\n                                      style={{\r\n                                        top:\r\n                                          imageUploaded || imagePreviewAvailable\r\n                                            ? \"35%\"\r\n                                            : \"45%\",\r\n                                      }}\r\n                                    >\r\n                                      <ImageUploader\r\n                                        withIcon={\r\n                                          imageUploaded || imagePreviewAvailable\r\n                                            ? false\r\n                                            : true\r\n                                        }\r\n                                        withLabel={false}\r\n                                        buttonStyles={{\r\n                                          display:\r\n                                            imageUploaded ||\r\n                                            imagePreviewAvailable\r\n                                              ? \"none\"\r\n                                              : \"block\",\r\n                                        }}\r\n                                        buttonText=\"Choose image\"\r\n                                        imgExtension={[\".jpg\", \".png\", \".jpeg\"]}\r\n                                        maxFileSize={5242880}\r\n                                        onChange={handleImageUploaded}\r\n                                        singleImage={true}\r\n                                        withPreview={true}\r\n                                      />\r\n                                      {(imageUploaded ||\r\n                                        imagePreviewAvailable) &&\r\n                                      takeAPhotoSelected ? (\r\n                                        <div className=\"fileContainer\">\r\n                                          <div className=\"uploadPictureContainer\">\r\n                                            <div\r\n                                              className=\"deleteImage\"\r\n                                              onClick={() => {\r\n                                                changeWebcamURI(\"\");\r\n                                                changeImagePreviewAvailable(\r\n                                                  false\r\n                                                );\r\n                                                dispatch(\r\n                                                  ACTION_IMAGE_LOADING_RESET()\r\n                                                );\r\n                                                changeImagePreviewAvailable(\r\n                                                  false\r\n                                                );\r\n                                                changeTakeAPhotoSelected(false);\r\n                                                changeImageUploaded(\"\");\r\n                                              }}\r\n                                            >\r\n                                              X\r\n                                            </div>\r\n                                            <img\r\n                                              src={webcamURI}\r\n                                              className=\"uploadPicture\"\r\n                                              alt=\"preview\"\r\n                                            />\r\n                                          </div>\r\n                                        </div>\r\n                                      ) : null}\r\n                                      {imageUploaded ||\r\n                                      imagePreviewAvailable ? (\r\n                                        <div\r\n                                          className=\"admin_individual_client_confirm_photo_button\"\r\n                                          onClick={handleConfirmPhotoSubmit}\r\n                                        >\r\n                                          <p>Confirm photo</p>\r\n                                        </div>\r\n                                      ) : null}\r\n                                      {(initialScreenSize >= 1200 &&\r\n                                        !imageUploaded &&\r\n                                        !imagePreviewAvailable) ||\r\n                                      (currentScreenSize >= 1200 &&\r\n                                        !imageUploaded &&\r\n                                        !imagePreviewAvailable) ? (\r\n                                        <>\r\n                                          <p\r\n                                            style={{\r\n                                              display: !currentScreenSize\r\n                                                ? initialScreenSize >= 1200\r\n                                                  ? \"block\"\r\n                                                  : \"none\"\r\n                                                : currentScreenSize >= 1200\r\n                                                ? \"block\"\r\n                                                : \"none\",\r\n                                            }}\r\n                                          >\r\n                                            OR\r\n                                          </p>\r\n                                          <div\r\n                                            className=\"admin_individual_client_take_a_photo_button\"\r\n                                            onClick={() =>\r\n                                              changeTakeAPhotoSelected(true)\r\n                                            }\r\n                                          >\r\n                                            <p>Take a photo</p>\r\n                                          </div>{\" \"}\r\n                                        </>\r\n                                      ) : null}\r\n                                    </span>\r\n                                  </div>\r\n                                )}\r\n                              </div>\r\n                            ))\r\n                          }\r\n                        </Transition>\r\n                      </Modal>\r\n                      <div\r\n                        className=\"admin_individual_client_initials_square\"\r\n                        style={{\r\n                          background:\r\n                            randomColorArray[\r\n                              getClientsData.clients\r\n                                .sort((a, b) =>\r\n                                  a.firstName.localeCompare(b.firstName)\r\n                                )\r\n                                .map((x) => x.email)\r\n                                .indexOf(item.email)\r\n                            ],\r\n                        }}\r\n                      >\r\n                        <p>\r\n                          {item.firstName[0].toUpperCase() +\r\n                            item.lastName[0].toUpperCase()}\r\n                        </p>\r\n                      </div>\r\n                      <div className=\"admin_individual_client_full_name\">\r\n                        <p>\r\n                          {item.firstName[0].toUpperCase() +\r\n                            item.firstName.slice(1).toLowerCase() +\r\n                            \" \" +\r\n                            item.lastName[0].toUpperCase() +\r\n                            item.lastName.slice(1).toLowerCase()}\r\n                        </p>\r\n                        <p>{item.email ? item.email : null}</p>\r\n                        <p>{item.phoneNumber ? item.phoneNumber : null}</p>\r\n                      </div>\r\n                      <span className=\"admin_individual_client_spacer\" />\r\n                      <FontAwesomeIcon\r\n                        style={{\r\n                          zIndex: logoutClicked || clientToggled ? 0 : 1,\r\n                          transitionDelay: logoutClicked\r\n                            ? \"initial\"\r\n                            : !clientToggled\r\n                            ? \"0.5s\"\r\n                            : \"initial\",\r\n                        }}\r\n                        icon={faEllipsisH}\r\n                        className=\"admin_individual_client_expand_icon\"\r\n                      />\r\n                      <Transition\r\n                        items={clientToggled}\r\n                        from={{ transform: \"translateX(-100%)\" }}\r\n                        enter={{ transform: \"translateX(0%)\" }}\r\n                        leave={{ transform: \"translateX(-100%)\" }}\r\n                        config={{ duration: 200 }}\r\n                      >\r\n                        {(clientToggled) =>\r\n                          clientToggled === item._id &&\r\n                          ((styleprops) => (\r\n                            <div\r\n                              className=\"admin_individual_selected_client_container\"\r\n                              style={{\r\n                                ...styleprops,\r\n                                ...{\r\n                                  zIndex:\r\n                                    logoutClicked ||\r\n                                    addProfilePhotoClicked ||\r\n                                    loadingSpinnerActive ||\r\n                                    imageLoading ||\r\n                                    cancelAppointmentClicked\r\n                                      ? 0\r\n                                      : 1,\r\n                                },\r\n                              }}\r\n                            >\r\n                              <CanvasDraw\r\n                                className=\"consent_form_signature\"\r\n                                saveData={\r\n                                  item.consentForm\r\n                                    ? item.consentForm.consentFormSignature\r\n                                      ? LZString.decompressFromEncodedURIComponent(\r\n                                          item.consentForm.consentFormSignature\r\n                                        )\r\n                                      : null\r\n                                    : null\r\n                                }\r\n                                hideGrid={true}\r\n                                hideInterface={true}\r\n                                disabled\r\n                                canvasHeight=\"100%\"\r\n                                canvasWidth=\"100%\"\r\n                                immediateLoading={true}\r\n                                ref={signature ? signature : null}\r\n                                style={{ display: \"none\" }}\r\n                              />\r\n                              <div className=\"admin_individual_selected_client_contents_container\">\r\n                                <div\r\n                                  className=\"admin_individual_selected_client_back_container\"\r\n                                  ref={selectedClientBackRef}\r\n                                  onClick={(e) => {\r\n                                    adminClientSectionSelected === \"\"\r\n                                      ? handleClientUntoggled(e)\r\n                                      : dispatch(\r\n                                          ACTION_ADMIN_CLIENT_PROFILE_SELECTED()\r\n                                        );\r\n                                  }}\r\n                                >\r\n                                  <FontAwesomeIcon\r\n                                    icon={faLongArrowAltLeft}\r\n                                    className=\"admin_individual_selected_client_back_arrow_icon\"\r\n                                  />\r\n                                  <p>\r\n                                    {adminClientSectionSelected === \"\"\r\n                                      ? \"Back to all clients\"\r\n                                      : \"Back to \" +\r\n                                        item.firstName[0].toUpperCase() +\r\n                                        item.firstName.slice(1).toLowerCase() +\r\n                                        \" \" +\r\n                                        item.lastName[0].toUpperCase() +\r\n                                        item.lastName.slice(1).toLowerCase() +\r\n                                        \"'s Profile\"}\r\n                                  </p>\r\n                                </div>\r\n\r\n                                {adminClientSectionSelected === \"\" ? (\r\n                                  <AdminClientIndividualProfile\r\n                                    item={item}\r\n                                    clientToggled={clientToggled}\r\n                                    changeClientToggled={changeClientToggled}\r\n                                    handleProfilePictureRender={\r\n                                      handleProfilePictureRender\r\n                                    }\r\n                                    renderBarInContactInfo={\r\n                                      renderBarInContactInfo\r\n                                    }\r\n                                    renderDownloadConsentFormButton={\r\n                                      renderDownloadConsentFormButton\r\n                                    }\r\n                                    getClientsData={getClientsData}\r\n                                    getClientsRefetch={getClientsRefetch}\r\n                                    getEmployeeData={\r\n                                      getEmployeeData ? getEmployeeData : null\r\n                                    }\r\n                                  />\r\n                                ) : adminClientSectionSelected ===\r\n                                  \"UpcomingAppointments\" ? (\r\n                                  <div className=\"admin_side_my_appointments_content_container\">\r\n                                    <AdminRenderUpcomingAppointments\r\n                                      data={getOwnAppointmentsData}\r\n                                      getOwnAppointmentsRefetch={\r\n                                        getOwnAppointmentsRefetch\r\n                                      }\r\n                                      item={item}\r\n                                      override={override}\r\n                                      loadingSpinnerActive={\r\n                                        loadingSpinnerActive\r\n                                      }\r\n                                      currentScreenSize={currentScreenSize}\r\n                                      initialScreenSize={initialScreenSize}\r\n                                    />\r\n                                  </div>\r\n                                ) : adminClientSectionSelected ===\r\n                                  \"PastAppointments\" ? (\r\n                                  <div className=\"admin_side_my_appointments_content_container\">\r\n                                    <AdminRenderPastAppointments\r\n                                      data={getOwnPastAppointmentsData}\r\n                                      item={item}\r\n                                      currentScreenSize={currentScreenSize}\r\n                                      initialScreenSize={initialScreenSize}\r\n                                    />\r\n                                  </div>\r\n                                ) : null}\r\n                              </div>\r\n                            </div>\r\n                          ))\r\n                        }\r\n                      </Transition>\r\n                    </div>\r\n                  );\r\n                })\r\n            : null\r\n          : null}\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AdminClients;\r\n"]},"metadata":{},"sourceType":"module"}