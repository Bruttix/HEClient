{"ast":null,"code":"import _slicedToArray from\"D:\\\\WebProjects\\\\Barbershops\\\\HighEnd\\\\Client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState,useMemo}from\"react\";import{Redirect,Link}from\"react-router-dom\";import{useSelector,useDispatch}from\"react-redux\";import{FontAwesomeIcon}from\"@fortawesome/react-fontawesome\";import{faHome,faFileSignature,faCalendarCheck,faUser}from\"@fortawesome/free-solid-svg-icons\";import moment from\"moment\";import ACTION_CONSENT_FORM_LAST_UPDATED from\"../../../actions/ConsentForm/LastUpdated/ACTION_CONSENT_FORM_LAST_UPDATED\";import ACTION_SPLASH_SCREEN_COMPLETE from\"../../../actions/SplashScreenComplete/ACTION_SPLASH_SCREEN_COMPLETE\";import ACTION_SPLASH_SCREEN_HALFWAY from\"../../../actions/SplashScreenHalfway/ACTION_SPLASH_SCREEN_HALFWAY\";import ACTION_BODY_SCROLL_ALLOW from\"../../../actions/Body_Scroll/ACTION_BODY_SCROLL_ALLOW\";import ACTION_LOGIN_IS_NOT_ACTIVE from\"../../../actions/Login/ACTION_LOGIN_IS_NOT_ACTIVE\";import\"./ClientProfile.css\";import\"../../../components/treatments/card_styling.css\";const ClientProfile=props=>{const dispatch=useDispatch();const splashScreenHalfway=useSelector(state=>state.splashScreenHalfway.splashScreenHalfway);const splashScreenComplete=useSelector(state=>state.splashScreenComplete.splashScreenComplete);const userAuthenticated=useSelector(state=>state.userAuthenticated.user_authenticated);const consentFormLastPageOpened=useSelector(state=>state.consentFormLastPageOpened.consent_form_active_page);const consentFormLastUpdated=useSelector(state=>state.consentFormLastUpdated.consent_form_last_updated);const loginIsActive=useSelector(state=>state.loginIsActive.login_is_active);const _useState=useState(false),_useState2=_slicedToArray(_useState,2),pdfLoading=_useState2[0],changePDFLoading=_useState2[1];useMemo(()=>{if(!props.called){props.getOwnAppointments();}},[props]);useMemo(()=>{if(!props.pastAppointmentsCalled){props.getOwnPastAppointments();}},[props]);useEffect(()=>{if(!splashScreenComplete){dispatch(ACTION_SPLASH_SCREEN_COMPLETE());}if(!splashScreenHalfway){dispatch(ACTION_SPLASH_SCREEN_HALFWAY());}},[dispatch,splashScreenComplete,splashScreenHalfway]);useMemo(()=>{if(props.getClientData&&props.getClientData.client&&props.getClientData.client.consentForm.date){if(consentFormLastUpdated!==moment.unix(props.getClientData.client.consentForm.createdAt/1000).format(\"l\")){dispatch(ACTION_CONSENT_FORM_LAST_UPDATED(moment.unix(props.getClientData.client.consentForm.createdAt/1000).format(\"l\")));}}},[props.getClientData,consentFormLastUpdated,dispatch]);useEffect(()=>{if(loginIsActive){dispatch(ACTION_LOGIN_IS_NOT_ACTIVE());}},[dispatch,loginIsActive]);const redirectToLogInPage=()=>{if(!userAuthenticated){return/*#__PURE__*/React.createElement(Redirect,{to:\"/account/login\"});}};const redirectToUpcomingAppointments=()=>{if(userAuthenticated){if(!props.currentScreenSize){if(props.initialScreenSize>=1200){return/*#__PURE__*/React.createElement(Redirect,{to:\"/account/clientprofile/upcomingappointments\"});}}else{if(props.currentScreenSize>=1200){return/*#__PURE__*/React.createElement(Redirect,{to:\"/account/clientprofile/upcomingappointments\"});}}}};useEffect(()=>{return()=>{if(pdfLoading){changePDFLoading(false);}};},[pdfLoading]);return/*#__PURE__*/React.createElement(\"div\",{className:\"client_profile_page_container\"},redirectToLogInPage(),redirectToUpcomingAppointments(),/*#__PURE__*/React.createElement(\"div\",{className:\"client_profile_page_header\"},/*#__PURE__*/React.createElement(\"h1\",null,\"MENU\")),/*#__PURE__*/React.createElement(\"div\",{className:\"client_profile_page_content_container\"},/*#__PURE__*/React.createElement(\"div\",{className:\"profile_home_box_container\"},/*#__PURE__*/React.createElement(Link,{className:\"profile_box_container_link\",to:\"/\",onClick:()=>dispatch(ACTION_BODY_SCROLL_ALLOW())},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faHome,className:\"profile_box_icon\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"HOME\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_consent_form_box_container\"},/*#__PURE__*/React.createElement(Link,{className:\"profile_box_container_link\",to:\"/account/clientprofile/consentform/\".concat(consentFormLastPageOpened)},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faFileSignature,className:\"profile_box_icon\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"CONSENT FORM\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_my_appointments_box_container\"},/*#__PURE__*/React.createElement(Link,{className:\"profile_box_container_link\",to:\"/account/clientprofile/upcomingappointments\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faCalendarCheck,className:\"profile_box_icon\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"MY APPOINTMENTS\"))),/*#__PURE__*/React.createElement(\"div\",{className:\"profile_my_profile_box_container\"},/*#__PURE__*/React.createElement(Link,{className:\"profile_box_container_link\",to:\"/account/clientprofile/profile\"},/*#__PURE__*/React.createElement(FontAwesomeIcon,{icon:faUser,className:\"profile_box_icon\"}),/*#__PURE__*/React.createElement(\"h2\",null,\"MY PROFILE\")))));};export default ClientProfile;","map":{"version":3,"sources":["D:/WebProjects/Barbershops/HighEnd/Client/src/components/account/clientprofile/ClientProfile.js"],"names":["React","useEffect","useState","useMemo","Redirect","Link","useSelector","useDispatch","FontAwesomeIcon","faHome","faFileSignature","faCalendarCheck","faUser","moment","ACTION_CONSENT_FORM_LAST_UPDATED","ACTION_SPLASH_SCREEN_COMPLETE","ACTION_SPLASH_SCREEN_HALFWAY","ACTION_BODY_SCROLL_ALLOW","ACTION_LOGIN_IS_NOT_ACTIVE","ClientProfile","props","dispatch","splashScreenHalfway","state","splashScreenComplete","userAuthenticated","user_authenticated","consentFormLastPageOpened","consent_form_active_page","consentFormLastUpdated","consent_form_last_updated","loginIsActive","login_is_active","pdfLoading","changePDFLoading","called","getOwnAppointments","pastAppointmentsCalled","getOwnPastAppointments","getClientData","client","consentForm","date","unix","createdAt","format","redirectToLogInPage","redirectToUpcomingAppointments","currentScreenSize","initialScreenSize"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useMemo } from \"react\";\r\nimport { Redirect, Link } from \"react-router-dom\";\r\nimport { useSelector, useDispatch } from \"react-redux\";\r\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\r\nimport {\r\n  faHome,\r\n  faFileSignature,\r\n  faCalendarCheck,\r\n  faUser,\r\n} from \"@fortawesome/free-solid-svg-icons\";\r\nimport moment from \"moment\";\r\nimport ACTION_CONSENT_FORM_LAST_UPDATED from \"../../../actions/ConsentForm/LastUpdated/ACTION_CONSENT_FORM_LAST_UPDATED\";\r\nimport ACTION_SPLASH_SCREEN_COMPLETE from \"../../../actions/SplashScreenComplete/ACTION_SPLASH_SCREEN_COMPLETE\";\r\nimport ACTION_SPLASH_SCREEN_HALFWAY from \"../../../actions/SplashScreenHalfway/ACTION_SPLASH_SCREEN_HALFWAY\";\r\nimport ACTION_BODY_SCROLL_ALLOW from \"../../../actions/Body_Scroll/ACTION_BODY_SCROLL_ALLOW\";\r\nimport ACTION_LOGIN_IS_NOT_ACTIVE from \"../../../actions/Login/ACTION_LOGIN_IS_NOT_ACTIVE\";\r\nimport \"./ClientProfile.css\";\r\nimport \"../../../components/treatments/card_styling.css\";\r\n\r\nconst ClientProfile = (props) => {\r\n  const dispatch = useDispatch();\r\n  const splashScreenHalfway = useSelector(\r\n    (state) => state.splashScreenHalfway.splashScreenHalfway\r\n  );\r\n  const splashScreenComplete = useSelector(\r\n    (state) => state.splashScreenComplete.splashScreenComplete\r\n  );\r\n  const userAuthenticated = useSelector(\r\n    (state) => state.userAuthenticated.user_authenticated\r\n  );\r\n  const consentFormLastPageOpened = useSelector(\r\n    (state) => state.consentFormLastPageOpened.consent_form_active_page\r\n  );\r\n  const consentFormLastUpdated = useSelector(\r\n    (state) => state.consentFormLastUpdated.consent_form_last_updated\r\n  );\r\n  const loginIsActive = useSelector(\r\n    (state) => state.loginIsActive.login_is_active\r\n  );\r\n  const [pdfLoading, changePDFLoading] = useState(false);\r\n\r\n  useMemo(() => {\r\n    if (!props.called) {\r\n      props.getOwnAppointments();\r\n    }\r\n  }, [props]);\r\n\r\n  useMemo(() => {\r\n    if (!props.pastAppointmentsCalled) {\r\n      props.getOwnPastAppointments();\r\n    }\r\n  }, [props]);\r\n\r\n  useEffect(() => {\r\n    if (!splashScreenComplete) {\r\n      dispatch(ACTION_SPLASH_SCREEN_COMPLETE());\r\n    }\r\n    if (!splashScreenHalfway) {\r\n      dispatch(ACTION_SPLASH_SCREEN_HALFWAY());\r\n    }\r\n  }, [dispatch, splashScreenComplete, splashScreenHalfway]);\r\n\r\n  useMemo(() => {\r\n    if (\r\n      props.getClientData &&\r\n      props.getClientData.client &&\r\n      props.getClientData.client.consentForm.date\r\n    ) {\r\n      if (\r\n        consentFormLastUpdated !==\r\n        moment\r\n          .unix(props.getClientData.client.consentForm.createdAt / 1000)\r\n          .format(\"l\")\r\n      ) {\r\n        dispatch(\r\n          ACTION_CONSENT_FORM_LAST_UPDATED(\r\n            moment\r\n              .unix(props.getClientData.client.consentForm.createdAt / 1000)\r\n              .format(\"l\")\r\n          )\r\n        );\r\n      }\r\n    }\r\n  }, [props.getClientData, consentFormLastUpdated, dispatch]);\r\n\r\n  useEffect(() => {\r\n    if (loginIsActive) {\r\n      dispatch(ACTION_LOGIN_IS_NOT_ACTIVE());\r\n    }\r\n  }, [dispatch, loginIsActive]);\r\n\r\n  const redirectToLogInPage = () => {\r\n    if (!userAuthenticated) {\r\n      return <Redirect to=\"/account/login\" />;\r\n    }\r\n  };\r\n\r\n  const redirectToUpcomingAppointments = () => {\r\n    if (userAuthenticated) {\r\n      if (!props.currentScreenSize) {\r\n        if (props.initialScreenSize >= 1200) {\r\n          return <Redirect to=\"/account/clientprofile/upcomingappointments\" />;\r\n        }\r\n      } else {\r\n        if (props.currentScreenSize >= 1200) {\r\n          return <Redirect to=\"/account/clientprofile/upcomingappointments\" />;\r\n        }\r\n      }\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    return () => {\r\n      if (pdfLoading) {\r\n        changePDFLoading(false);\r\n      }\r\n    };\r\n  }, [pdfLoading]);\r\n\r\n  return (\r\n    <div className=\"client_profile_page_container\">\r\n      {redirectToLogInPage()}\r\n      {redirectToUpcomingAppointments()}\r\n      <div className=\"client_profile_page_header\">\r\n        <h1>MENU</h1>\r\n      </div>\r\n      <div className=\"client_profile_page_content_container\">\r\n        <div className=\"profile_home_box_container\">\r\n          <Link\r\n            className=\"profile_box_container_link\"\r\n            to=\"/\"\r\n            onClick={() => dispatch(ACTION_BODY_SCROLL_ALLOW())}\r\n          >\r\n            <FontAwesomeIcon icon={faHome} className=\"profile_box_icon\" />\r\n            <h2>HOME</h2>\r\n          </Link>\r\n        </div>\r\n        <div className=\"profile_consent_form_box_container\">\r\n          <Link\r\n            className=\"profile_box_container_link\"\r\n            to={`/account/clientprofile/consentform/${consentFormLastPageOpened}`}\r\n          >\r\n            <FontAwesomeIcon\r\n              icon={faFileSignature}\r\n              className=\"profile_box_icon\"\r\n            />\r\n            <h2>CONSENT FORM</h2>\r\n          </Link>\r\n        </div>\r\n        <div className=\"profile_my_appointments_box_container\">\r\n          <Link\r\n            className=\"profile_box_container_link\"\r\n            to={\"/account/clientprofile/upcomingappointments\"}\r\n          >\r\n            <FontAwesomeIcon\r\n              icon={faCalendarCheck}\r\n              className=\"profile_box_icon\"\r\n            />\r\n            <h2>MY APPOINTMENTS</h2>\r\n          </Link>\r\n        </div>\r\n        <div className=\"profile_my_profile_box_container\">\r\n          <Link\r\n            className=\"profile_box_container_link\"\r\n            to={\"/account/clientprofile/profile\"}\r\n          >\r\n            <FontAwesomeIcon icon={faUser} className=\"profile_box_icon\" />\r\n            <h2>MY PROFILE</h2>\r\n          </Link>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default ClientProfile;\r\n"]},"metadata":{},"sourceType":"module"}